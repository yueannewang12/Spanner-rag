!function(){function e(e,n,r,i){Object.defineProperty(e,n,{get:r,set:i,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequireabc9;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var n=i[e];delete i[e];var o={id:e,exports:{}};return r[e]=o,n.call(o.exports,o,o.exports),o.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){i[e]=n},n.parcelRequireabc9=o);var s=o.register;function a(){return"undefined"!=typeof google}s("jJmky",function(n,r){e(n.exports,"Color",function(){return s}),e(n.exports,"darker",function(){return a}),e(n.exports,"brighter",function(){return l}),e(n.exports,"default",function(){return w}),e(n.exports,"hslConvert",function(){return P}),e(n.exports,"Rgb",function(){return C}),e(n.exports,"rgbConvert",function(){return k}),e(n.exports,"rgb",function(){return N}),e(n.exports,"hsl",function(){return j});var i=o("csDwR");function s(){}var a=.7,l=1.4285714285714286,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",h="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,f=RegExp(`^rgb\\(${u},${u},${u}\\)$`),p=RegExp(`^rgb\\(${h},${h},${h}\\)$`),g=RegExp(`^rgba\\(${u},${u},${u},${c}\\)$`),m=RegExp(`^rgba\\(${h},${h},${h},${c}\\)$`),y=RegExp(`^hsl\\(${c},${h},${h}\\)$`),v=RegExp(`^hsla\\(${c},${h},${h},${c}\\)$`),b={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function _(){return this.rgb().formatHex()}function x(){return this.rgb().formatRgb()}function w(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=d.exec(e))?(r=n[1].length,n=parseInt(n[1],16),6===r?E(n):3===r?new C(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?S(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?S(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=f.exec(e))?new C(n[1],n[2],n[3],1):(n=p.exec(e))?new C(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=g.exec(e))?S(n[1],n[2],n[3],n[4]):(n=m.exec(e))?S(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=y.exec(e))?z(n[1],n[2]/100,n[3]/100,1):(n=v.exec(e))?z(n[1],n[2]/100,n[3]/100,n[4]):b.hasOwnProperty(e)?E(b[e]):"transparent"===e?new C(NaN,NaN,NaN,0):null}function E(e){return new C(e>>16&255,e>>8&255,255&e,1)}function S(e,n,r,i){return i<=0&&(e=n=r=NaN),new C(e,n,r,i)}function k(e){return(e instanceof s||(e=w(e)),e)?new C((e=e.rgb()).r,e.g,e.b,e.opacity):new C}function N(e,n,r,i){return 1==arguments.length?k(e):new C(e,n,r,null==i?1:i)}function C(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}function T(){return`#${L(this.r)}${L(this.g)}${L(this.b)}`}function M(){let e=A(this.opacity);return`${1===e?"rgb(":"rgba("}${O(this.r)}, ${O(this.g)}, ${O(this.b)}${1===e?")":`, ${e})`}`}function A(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function O(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function L(e){return((e=O(e))<16?"0":"")+e.toString(16)}function z(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new D(e,n,r,i)}function P(e){if(e instanceof D)return new D(e.h,e.s,e.l,e.opacity);if(e instanceof s||(e=w(e)),!e)return new D;if(e instanceof D)return e;var n=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),l=NaN,u=a-o,c=(a+o)/2;return u?(l=n===a?(r-i)/u+(r<i)*6:r===a?(i-n)/u+2:(n-r)/u+4,u/=c<.5?a+o:2-a-o,l*=60):u=c>0&&c<1?0:l,new D(l,u,c,e.opacity)}function j(e,n,r,i){return 1==arguments.length?P(e):new D(e,n,r,null==i?1:i)}function D(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}function F(e){return(e=(e||0)%360)<0?e+360:e}function R(e){return Math.max(0,Math.min(1,e||0))}function q(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}(0,i.default)(s,w,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:x,toString:x}),(0,i.default)(C,N,(0,i.extend)(s,{brighter(e){return e=null==e?l:Math.pow(l,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?a:Math.pow(a,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new C(O(this.r),O(this.g),O(this.b),A(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatHex8:function(){return`#${L(this.r)}${L(this.g)}${L(this.b)}${L((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:M,toString:M})),(0,i.default)(D,j,(0,i.extend)(s,{brighter(e){return e=null==e?l:Math.pow(l,e),new D(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?a:Math.pow(a,e),new D(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new C(q(e>=240?e-240:e+120,o,i),q(e,o,i),q(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new D(F(this.h),R(this.s),R(this.l),A(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=A(this.opacity);return`${1===e?"hsl(":"hsla("}${F(this.h)}, ${100*R(this.s)}%, ${100*R(this.l)}%${1===e?")":`, ${e})`}`}}))}),s("csDwR",function(n,r){function i(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function o(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}e(n.exports,"default",function(){return i}),e(n.exports,"extend",function(){return o})}),s("2KTvv",function(n,r){e(n.exports,"Easing",function(){return o}),e(n.exports,"Group",function(){return a}),e(n.exports,"Tween",function(){return h});var i,o=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(e){return 1===e?1:e*e*(2.70158*e-1.70158)},Out:function(e){return 0===e?0:--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}}),Bounce:Object.freeze({In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(2*n,e)/2:(1-Math.pow(2-2*n,e))/2+.5}}}}),s=function(){return performance.now()},a=function(){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];null==(e=o._group)||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},e.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];i._group=void 0,delete this._tweens[i.getId()],delete this._tweensAddedDuringUpdate[i.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},e.prototype.update=function(e,n){void 0===e&&(e=s()),void 0===n&&(n=!0);var r=Object.keys(this._tweens);if(0!==r.length)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&!1===o.update(e,a)&&!n&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},e}(),l={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=l.Utils.Linear;return n<0?s(e[0],e[1],i):n>1?s(e[r],e[r-1],r-i):s(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,n){for(var r=0,i=e.length-1,o=Math.pow,s=l.Utils.Bernstein,a=0;a<=i;a++)r+=o(1-n,i-a)*o(n,a)*e[a]*s(i,a);return r},CatmullRom:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),s=l.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(o=Math.floor(i=r*(1+n))),s(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):n<0?e[0]-(s(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(s(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):s(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=l.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:(i=[1],function(e){var n=1;if(i[e])return i[e];for(var r=e;r>1;r--)n*=r;return i[e]=n,n}),CatmullRom:function(e,n,r,i,o){var s=(r-e)*.5,a=(i-n)*.5,l=o*o;return o*l*(2*n-2*r+s+a)+(-3*n+3*r-2*s-a)*l+s*o+n}}},u=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new a,h=function(){function e(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=o.Linear.None,this._interpolationFunction=l.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=u.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,"object"==typeof n?(this._group=n,n.add(this)):!0===n&&(this._group=c,c.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,n){if(void 0===n&&(n=1e3),this._isPlaying)throw Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,n){if(void 0===e&&(e=s()),void 0===n&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed)for(var r in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,n,r,i,o){for(var s in r){var a=e[s],l=Array.isArray(a),u=l?"array":typeof a,c=!l&&Array.isArray(r[s]);if("undefined"!==u&&"function"!==u){if(c){var h=r[s];if(0===h.length)continue;for(var d=[a],f=0,p=h.length;f<p;f+=1){var g=this._handleRelativeValue(a,h[f]);if(isNaN(g)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(g)}c&&(r[s]=d)}if(("object"===u||l)&&a&&!c){for(var m in n[s]=l?[]:{},a)n[s][m]=a[m];i[s]=l?[]:{};var h=r[s];if(!this._isDynamic){var y={};for(var m in h)y[m]=h[m];r[s]=h=y}this._setupProperties(a,n[s],h,i[s],o)}else(void 0===n[s]||o)&&(n[s]=a),l||(n[s]*=1),c?i[s]=r[s].slice().reverse():i[s]=n[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(e){return void 0===e&&(e=s()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e),this},e.prototype.resume=function(e){return void 0===e&&(e=s()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0),this},e.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return e?e.add(this):console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this},e.prototype.remove=function(){var e;return null==(e=this._group)||e.remove(this),this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=o.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=l.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(n,r){var i,o,a=this;if(void 0===n&&(n=s()),void 0===r&&(r=e.autoStartOnUpdate),this._isPaused)return!0;if(!this._goToEnd&&!this._isPlaying)if(!r)return!1;else this.start(n,!0);if(this._goToEnd=!1,n<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var l=n-this._startTime,u=this._duration+(null!=(i=this._repeatDelayTime)?i:this._delayTime),c=this._duration+this._repeat*u,h=function(){if(0===a._duration||l>c)return 1;var e=Math.trunc(l/u),n=Math.min((l-e*u)/a._duration,1);return 0===n&&l===a._duration?1:n}(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),0===this._duration||l>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((l-this._duration)/u)+1,this._repeat);for(o in isFinite(this._repeat)&&(this._repeat-=f),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[o]||(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(void 0!==n[o]){var s=n[o]||0,a=r[o],l=Array.isArray(e[o]),u=Array.isArray(a);!l&&u?e[o]=this._interpolationFunction(a,i):"object"==typeof a&&a?this._updateProperties(e[o],s,a,i):"number"==typeof(a=this._handleRelativeValue(s,a))&&(e[o]=s+(a-s)*i)}},e.prototype._handleRelativeValue=function(e,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?e+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},e.autoStartOnUpdate=!1,e}();u.nextId,c.getAll.bind(c),c.removeAll.bind(c),c.add.bind(c),c.remove.bind(c),c.update.bind(c)});class l{isFetching=!1;port=8195;endpoints={getPing:"/get_ping",postQuery:"/post_query",postNodeExpansion:"/post_node_expansion"};params=null;static ALLOWED_PROPERTY_TYPES_FOR_NODE_EXPANSION_MATCHING=new Set(["BOOL","BYTES","DATE","INT64","NUMERIC","FLOAT32","FLOAT64","STRING","TIMESTAMP"]);buildRoute(e){let n=window.location.hostname;return"localhost"===n||"127.0.0.1"===n||""===n?`http://localhost:${this.port}${e}`:`/proxy/${this.port}${e}`}constructor(e,n){if(a())this.port=void 0;else{let n=e;if("number"!=typeof n&&isNaN(n=Number.parseInt(n)))return void console.error("Graph Server was not given a numerical port",{port:e});this.port=n}this.params=n}nodeExpansion(e,n,r,i){if(!e.uid)return Promise.reject(Error("Node does not have a UID"));let o=[];if(Array.isArray(i))for(let e of i){if(!e.key||!e.value||"string"!=typeof e.type)continue;let n=e.type.toUpperCase();l.ALLOWED_PROPERTY_TYPES_FOR_NODE_EXPANSION_MATCHING.has(n)&&o.push(e)}let s={uid:e.uid,node_labels:e.labels,node_properties:o,direction:n};return("string"==typeof r&&r.length&&(s.edge_label=r),this.isFetching=!0,a())?google.colab.kernel.invokeFunction("graph_visualization.NodeExpansion",[s,this.params]).then(e=>e.data["application/json"]).finally(()=>this.isFetching=!1):fetch(this.buildRoute(this.endpoints.postNodeExpansion),{method:"POST",body:JSON.stringify({params:this.params,request:s})}).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).catch(e=>{console.error("There has been a problem with your fetch operation:",e)}).finally(()=>this.isFetching=!1)}query(e){let n={query:e,params:this.params};return(this.isFetching=!0,a())?google.colab.kernel.invokeFunction("graph_visualization.Query",[],n).then(e=>e.data["application/json"]).finally(()=>this.isFetching=!1):fetch(this.buildRoute(this.endpoints.postQuery),{method:"POST",body:JSON.stringify(n)}).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).catch(e=>{console.error("There has been a problem with your fetch operation:",e)}).finally(()=>this.isFetching=!1)}ping(){this.promise=fetch(this.buildRoute(this.endpoints.getPing)).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{console.log(e)}).catch(e=>{console.error("There has been a problem with your fetch operation:",e)})}}var u=class{labels=[];labelString="";properties={};instantiated=!1;key_property_names=[];instantiationErrorReason;uid="";constructor({labels:e,properties:n,key_property_names:r,identifier:i,containsDynamicLabelElement:o,allSchemaStaticLabelSets:s}){if(!Array.isArray(e))throw TypeError("labels must be an Array");if(!this._validUid(i))throw TypeError("Invalid identifier");let a=[...e];if(o&&s instanceof Set&&s.size>0)for(let n of s){if(!n instanceof Set||0==n.size||n.size>=e.size)continue;let r=!0;for(let i of n)if(!e.includes(i)){r=!1;break}if(r){let e=[...a];0===(a=a.filter(e=>!n.has(e))).length&&e.length>0&&(a=e);break}}this.labels=a,this.labelString=this.labels.join(" | "),this.properties=n,this.key_property_names=r,this.uid=i,this.instantiated=!0}getLabels(){return this.labelString}_validUid(e){return"string"==typeof e&&e.length>0}},c=class extends u{value;identifiers=[];intermediate=!1;constructor(e){let{labels:n,title:r,properties:i,value:o,key_property_names:s,identifier:a,intermediate:l,containsDynamicLabelElement:u,allSchemaStaticLabelSets:c}=e;if(super({labels:n,title:r,properties:i,key_property_names:s,identifier:a,containsDynamicLabelElement:u,allSchemaStaticLabelSets:c}),this.value=o,this.instantiated=!0,this.intermediate=l||!1,"object"==typeof i&&Array.isArray(s))for(let e of s)e in i&&this.identifiers.push(i[e])}isIntermediateNode(){return this.intermediate}};class h extends u{sourceUid;destinationUid;source;target;curvature={amount:0,nodePairId:""};static Direction=Object.freeze({INCOMING:Symbol("INCOMING"),OUTGOING:Symbol("OUTGOING")});constructor(e){let{source_node_identifier:n,destination_node_identifier:r,labels:i,properties:o,title:s,identifier:a,containsDynamicLabelElement:l,allSchemaStaticLabelSets:u}=e;if(super({labels:i,title:s,properties:o,identifier:a,containsDynamicLabelElement:l,allSchemaStaticLabelSets:u}),!this._validUid(n)||!this._validUid(r)){this.instantiationErrorReason="Edge destination or source invalid",this.instantiated=!1,console.error(this.instantiationErrorReason,e);return}this.sourceUid=n,this.destinationUid=r,this.instantiated=!0}}class d{propertyDeclarationTypes=["TYPE_CODE_UNSPECIFIED","BOOL","INT64","FLOAT64","FLOAT32","TIMESTAMP","DATE","STRING","BYTES","ARRAY","STRUCT","NUMERIC","JSON","PROTO","ENUM"];rawSchema;_allNodeTableStaticLabelSets=new Set;_allEdgeTableStaticLabelSets=new Set;constructor(e){if(this.rawSchema=e,!(e instanceof Object))return;this.rawSchema.edgeTables&&Array.isArray(this.rawSchema.edgeTables)||(this.rawSchema.edgeTables=[]),this.rawSchema.nodeTables&&Array.isArray(this.rawSchema.nodeTables)||(this.rawSchema.nodeTables=[]),this.rawSchema.propertyDeclarations&&Array.isArray(this.rawSchema.propertyDeclarations)||(this.rawSchema.propertyDeclarations=[]),this._precalculateDynamicLabelSets()}_precalculateDynamicLabelSets(){this._allNodeTableStaticLabelSets=new Set,this._allEdgeTableStaticLabelSets=new Set,(this.rawSchema.nodeTables||[]).forEach(e=>{Array.isArray(e.labelNames)&&e.labelNames.length>0&&this._allNodeTableStaticLabelSets.add(new Set(e.labelNames))}),(this.rawSchema.edgeTables||[]).forEach(e=>{Array.isArray(e.labelNames)&&e.labelNames.length>0&&this._allEdgeTableStaticLabelSets.add(new Set(e.labelNames))})}getAllNodeTableStaticLabelSets(){return this._allNodeTableStaticLabelSets}getAllEdgeTableStaticLabelSets(){return this._allEdgeTableStaticLabelSets}containsDynamicLabelNode(){return(this.rawSchema.nodeTables||[]).some(e=>e.dynamicLabelExpr&&"string"==typeof e.dynamicLabelExpr&&e.dynamicLabelExpr.length>0)}containsDynamicLabelEdge(){return(this.rawSchema.edgeTables||[]).some(e=>e.dynamicLabelExpr&&"string"==typeof e.dynamicLabelExpr&&e.dynamicLabelExpr.length>0)}getNamesOfTables(e){let n={};if(!this.rawSchema)return console.error("No schema found"),[];for(let r=0;r<e.length;r++){let i=e[r];if(!i.name){console.error("name of nodeTable is not declared");continue}if("string"!=typeof i.name){console.error("name of nodeTable is not a string");continue}n[i.name]=""}return Object.keys(n)}getUniqueLabels(e){if(!Array.isArray(e))return[];let n=[];for(let r=0;r<e.length;r++){let i=e[r];i.labelNames&&Array.isArray(i.labelNames)||(i.labelNames=[]),i instanceof Object&&i.labelNames instanceof Array&&0!==i.labelNames.length&&n.push(e[r].labelNames[0])}return n}getNodeNames(){return this.rawSchema&&Array.isArray(this.rawSchema.nodeTables)?this.getUniqueLabels(this.rawSchema.nodeTables):[]}getEdgeNames(){return this.rawSchema&&Array.isArray(this.rawSchema.edgeTables)?this.getUniqueLabels(this.rawSchema.edgeTables):[]}getTableNames(){return{edges:this.getEdgeNames(),nodes:this.getNodeNames()}}getPropertiesOfTable(e){let n={},r=e=>{for(let n=0;n<this.rawSchema.propertyDeclarations.length;n++){let r=this.rawSchema.propertyDeclarations[n];if(r.name===e)return r.type}};e.propertyDefinitions&&Array.isArray(e.propertyDefinitions)||(e.propertyDefinitions=[]);for(let i=0;i<e.propertyDefinitions.length;i++){let o=e.propertyDefinitions[i],s=r(o.propertyDeclarationName);if(!s){console.error(`Property Declaration does not contain Property Definition: ${o.propertyDeclarationName}`);continue}n[o.propertyDeclarationName]=s}return n}getEdgesOfNode(e){return this.rawSchema.edgeTables.filter(n=>n.sourceNodeTable.nodeTableName===e.name||n.destinationNodeTable.nodeTableName===e.name)}getNodesOfEdges(e){let n={};for(let r=0;r<this.rawSchema.nodeTables.length;r++){let i=this.rawSchema.nodeTables[r];if(e.sourceNodeTable.nodeTableName===i.name&&(n.from=i),e.destinationNodeTable.nodeTableName===i.name&&(n.to=i),n.from&&n.to)break}return n.to&&n.from||console.error("EdgeTable does not have a source or destination node",e),n}getEdgeFromName(e){let n=this.rawSchema.edgeTables.filter(n=>n.name===e);if(n.length>0)return n[0];console.error(`No edgeTable associated with name ${e}`)}getNodeFromName(e){let n=this.rawSchema.nodeTables.filter(n=>n.name===e);if(n.length>0)return n[0];console.error(`No nodeTable associated with name ${e}`)}getEdgeTableId(e){return this.rawSchema.edgeTables.indexOf(e)}getNodeTableId(e){return this.rawSchema.nodeTables.indexOf(e)}nodeIsConnectedToEdge(e,n){let r={isConnected:!1,isSource:!1},i=this.getNodeFromName(e);if(!i)return console.error(`No node found from name ${e}`),r;let o=this.getEdgeFromName(n);return o?(r.isConnected=!0,r.isSource=o.sourceNodeTable.nodeTableName===i.name):console.error(`No edge found from name ${n}`),r}getDisplayName(e){return e.labelNames[0]}}class f{schema=null;schemaNodes={};schemaEdges={};nodes={};edges={};rowsData=[];queryResult={};focusedGraphObject=null;selectedGraphObject=null;colorScheme=f.ColorScheme.NEIGHBORHOOD;colorPalette=["#1A73E8","#E52592","#12A4AF","#F4511E","#9334E6","#689F38","#3949AB","#546E7A","#EF6C00","#D93025","#1E8E3E","#039BE5","#4682B4","#F0E68C","#00FFFF","#FFB6C1","#E6E6FA","#7B68EE","#CD853F","#BDB76B","#40E0D0","#708090","#DA70D6","#32CD32","#8B008B","#B0E0E6","#FF7F50","#A0522D","#6B8E23","#DC143C","#FFD700","#DB7093"];nodeColors={};schemaNodeColors={};edgeDesign={default:{color:"#DADCE0",width:2,shadowWidth:0,shadowColor:"#000000"},focused:{color:"#80868B",width:4,shadowWidth:6,shadowColor:"#E8EAED"},selected:{color:"#1A73E8",width:4,shadowWidth:8,shadowColor:"rgba(26, 115, 232, 0.25)"}};static ColorScheme=Object.freeze({NEIGHBORHOOD:Symbol("neighborhood"),LABEL:Symbol("label")});static ViewModes=Object.freeze({DEFAULT:Symbol("DEFAULT"),SCHEMA:Symbol("SCHEMA"),TABLE:Symbol("TABLE")});static LayoutModes=Object.freeze({FORCE:Symbol("FORCE"),TOP_DOWN:Symbol("TOP_DOWN"),LEFT_RIGHT:Symbol("LEFT_RIGHT"),RADIAL_IN:Symbol("RADIAL_IN"),RADIAL_OUT:Symbol("RADIAL_OUT")});viewMode=f.ViewModes.DEFAULT;layoutMode=f.LayoutModes.FORCE;lastLayoutMode=f.LayoutModes.FORCE;showLabels=!1;neighborsOfNode={};edgesOfNode={};keyProperties={};nodeCount=0;schemaNodeCount=0;constructor({nodesData:e,edgesData:n,colorPalette:r,colorScheme:i,rowsData:o,schemaData:s,queryResult:a}){this.parseSchema(s),this.nodes=this.parseNodes(e),this.nodeCount=Object.keys(this.nodes).length,this.edges=this.parseEdges(n),this.nodeColors={},this.assignColors(),r&&Array.isArray(r)&&(this.colorPalette=r),i&&(this.colorScheme=i),this.rowsData=o,this.queryResult=a}assignColors(){let e=new Set;for(let n of Object.keys(this.nodes)){let r=this.nodes[n];!(r instanceof c)||r.isIntermediateNode()||e.add(r.getLabels())}for(let n of Object.keys(this.schemaNodes)){let r=this.schemaNodes[n];r instanceof c&&e.add(r.getLabels())}for(let n of e){if(0===this.colorPalette.length){console.error("Node labels exceed the color palette. Assigning default color.");continue}if(!n||!n instanceof String){console.error("Node does not have a label",node);continue}this.nodeColors[n]||(this.nodeColors[n]=this.colorPalette.shift())}}parseSchema(e){if(!(e instanceof Object)){this.schema=new d({});return}this.schema=new d(e);let n=this.schema.rawSchema.nodeTables.map(e=>({labels:e.labelNames,properties:this.schema.getPropertiesOfTable(e),color:"rgb(0, 0, 100)",identifier:this.schema.getNodeTableId(e).toString()}));this.schemaNodes=this.parseNodes(n),this.schemaNodeCount=Object.keys(this.schemaNodes).length;let r=this.schema.rawSchema.edgeTables.map((e,n)=>{let r=this.schema.getNodesOfEdges(e);return{labels:e.labelNames,properties:this.schema.getPropertiesOfTable(e),color:"rgb(0, 0, 100)",destination_node_identifier:this.schema.getNodeTableId(r.to).toString(),source_node_identifier:this.schema.getNodeTableId(r.from).toString(),identifier:this.schema.getEdgeTableId(e).toString()}});this.schemaEdges=this.parseEdges(r)}parseNodes(e){if(!Array.isArray(e))throw console.error("Nodes must be an array",e),Error("Nodes must be an array");let n={},r=this.schema.getAllNodeTableStaticLabelSets(),i=this.schema.containsDynamicLabelNode();return e.forEach(e=>{if(!(e instanceof Object))return void console.error("Node data is not an object",e);let o={...e,containsDynamicLabelElement:i,allSchemaStaticLabelSets:r},s=new c(o);if(!s||!s.instantiated)return void console.error("Unable to instantiate node",s.instantiationErrorReason);s instanceof c&&s.instantiated?(n[s.uid]=s,Array.isArray(s.key_property_names)&&s.key_property_names.length&&(this.keyProperties[s.getLabels()]=s.key_property_names[0])):(s.instantiationErrorReason="Could not construct an instance of Node",console.error(s.instantiationErrorReason,{fullNodeData:o,node:s}))}),n}parseEdges(e){if(!Array.isArray(e))throw console.error("Edges must be an array",e),Error("Edges must be an array");let n={},r=this.schema.getAllEdgeTableStaticLabelSets(),i=this.schema.containsDynamicLabelEdge();return e.forEach(e=>{if(!(e instanceof Object))return void console.error("Edge data is not an object",e);let o={...e,containsDynamicLabelElement:i,allSchemaStaticLabelSets:r},s=new h(o);if(!s||!s.instantiated)return void console.error("Unable to instantiate edge",s.instantiationErrorReason);s instanceof h?(n[s.uid]=s,this._updateEdgeIndices(s)):(s.instantiationErrorReason="Could not construct an instance of Edge",console.error(s.instantiationErrorReason,{fullEdgeData:o,edge:s}))}),n}_updateEdgeIndices(e){this.neighborsOfNode[e.sourceUid]||(this.neighborsOfNode[e.sourceUid]={}),this.neighborsOfNode[e.destinationUid]||(this.neighborsOfNode[e.destinationUid]={}),this.edgesOfNode[e.sourceUid]||(this.edgesOfNode[e.sourceUid]=new Set),this.edgesOfNode[e.destinationUid]||(this.edgesOfNode[e.destinationUid]=new Set),this.neighborsOfNode[e.sourceUid][e.destinationUid]=e,this.neighborsOfNode[e.destinationUid][e.sourceUid]=e,this.edgesOfNode[e.sourceUid].add(e),this.edgesOfNode[e.destinationUid].add(e)}appendGraphData(e,n){let r=this.parseNodes(e),i=this.parseEdges(n);for(let e of Object.keys(r)){let n=this.nodes[e];(!(n instanceof c)||n.isIntermediateNode())&&(this.nodes[e]=r[e])}for(let e of(this.nodeCount=Object.keys(this.nodes).length,Object.keys(i)))this.edges[e]||(this.edges[e]=i[e]);return this.assignColors(),{newNodes:r,newEdges:i}}}class p{incomingEdgeSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M320-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-100 0-170-70T80-480q0-100 70-170t170-70q90 0 156.5 57T557-520h323v80H557q-14 86-80.5 143T320-240Zm0-240Z"/></svg>';outgoingEdgeSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M640-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-90 0-156.5-57T403-440H80v-80h323q14-86 80.5-143T640-720q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-240Z"/></svg>';config;reservedColorsByLabel={};reservedColorsByNeighborhood=[];static EventTypes=Object.freeze({CONFIG_CHANGE:Symbol("configChange"),FOCUS_OBJECT:Symbol("focusObject"),SELECT_OBJECT:Symbol("selectObject"),COLOR_SCHEME:Symbol("colorScheme"),VIEW_MODE_CHANGE:Symbol("viewModeChange"),LAYOUT_MODE_CHANGE:Symbol("layoutModeChange"),SHOW_LABELS:Symbol("showLabels"),NODE_EXPANSION_REQUEST:Symbol("nodeExpansionRequest"),GRAPH_DATA_UPDATE:Symbol("graphDataUpdate")});eventListeners={[p.EventTypes.CONFIG_CHANGE]:[],[p.EventTypes.FOCUS_OBJECT]:[],[p.EventTypes.SELECT_OBJECT]:[],[p.EventTypes.COLOR_SCHEME]:[],[p.EventTypes.VIEW_MODE_CHANGE]:[],[p.EventTypes.LAYOUT_MODE_CHANGE]:[],[p.EventTypes.SHOW_LABELS]:[],[p.EventTypes.NODE_EXPANSION_REQUEST]:[],[p.EventTypes.GRAPH_DATA_UPDATE]:[]};constructor(e){e instanceof f||(e=new f({nodesData:[],edgesData:[],colorScheme:f.ColorScheme.LABEL,rowsData:[],schemaData:{}})),this.config=e}addEventListener(e,n){if(!this.eventListeners[e])throw Error("Invalid event type",e);this.eventListeners[e].push(n)}setViewMode(e){e!==this.config.viewMode&&(this.setFocusedObject(null),this.setSelectedObject(null),this.config.viewMode=e,this.eventListeners[p.EventTypes.VIEW_MODE_CHANGE].forEach(n=>n(e,this.config)))}showLabels(e){this.config.showLabels=e,this.eventListeners[p.EventTypes.SHOW_LABELS].forEach(n=>n(e,this.config))}setLayoutMode(e){this.config.lastLayoutMode=this.config.layoutMode,this.config.layoutMode=e,this.eventListeners[p.EventTypes.LAYOUT_MODE_CHANGE].forEach(n=>n(e,this.config.lastLayoutMode,this.config))}setFocusedObject(e){this.config.focusedGraphObject=e,this.eventListeners[p.EventTypes.FOCUS_OBJECT].forEach(n=>n(e,this.config))}setSelectedObject(e){this.config.selectedGraphObject=e,this.eventListeners[p.EventTypes.SELECT_OBJECT].forEach(n=>n(e,this.config))}setColorScheme(e){e||console.error("Color scheme must be provided",e),this.config.colorScheme=e,this.eventListeners[p.EventTypes.COLOR_SCHEME].forEach(n=>n(e,this.config))}getEdgesOfObject(e){return!e||!e instanceof u?new Set:e instanceof c?this.getEdgesOfNode(e):new Set}getEdgesOfNode(e){return e instanceof c?(this.config.edgesOfNode[e.uid]||(this.config.edgesOfNode[e.uid]=new Set),this.config.edgesOfNode[e.uid]):new Set}getEdgesOfNodeSorted(e){return Array.from(this.getEdgesOfNode(e)).sort((n,r)=>{let i=this.getNode(n.sourceUid===e.uid?n.destinationUid:n.sourceUid),o=this.getNode(r.sourceUid===e.uid?r.destinationUid:r.sourceUid);if(i instanceof Node&&o instanceof Node){let e=i.getLabels().localeCompare(o.getLabels());if(0!==e)return e}let s=n.sourceUid===e.uid?"OUTGOING":"INCOMING";return s!==(r.sourceUid===e.uid?"OUTGOING":"INCOMING")?"INCOMING"===s?-1:1:0})}getEdgeTypesOfNodeSorted(e){return this.getEdgeTypesOfNode(e).sort((e,n)=>e.direction!==n.direction?"INCOMING"===e.direction?-1:1:e.label.localeCompare(n.label))}getEdgeTypesOfNode(e){if(!(e instanceof c)||!this.config||!this.config.schema||!this.config.schema.rawSchema||!this.config.schema.rawSchema.nodeTables)return[];let n=this.config.schema.rawSchema.nodeTables.filter(n=>e.labels.some(e=>n.labelNames.includes(e))),r=new Set;return n.forEach(e=>{this.config.schema.rawSchema.edgeTables.forEach(n=>{n.sourceNodeTable.nodeTableName===e.name&&n.labelNames.forEach(e=>{r.add({label:e,direction:"OUTGOING"})}),n.destinationNodeTable.nodeTableName===e.name&&n.labelNames.forEach(e=>{r.add({label:e,direction:"INCOMING"})})})}),Array.from(r)}getNeighborsOfNode(e){return e instanceof c?(this.config.neighborsOfNode[e.uid]||(this.config.neighborsOfNode[e.uid]={}),this.config.neighborsOfNode[e.uid]):{}}edgeIsConnectedToNode(e,n){return!!e&&e instanceof h&&!!n&&n instanceof c&&(e.sourceUid===n.uid||e.destinationUid===n.uid)}nodeIsNeighborTo(e,n){return n instanceof c&&!!this.getNeighborsOfNode(e)[n.uid]}edgeIsConnectedToFocusedNode(e){return this.edgeIsConnectedToNode(e,this.config.focusedGraphObject)}edgeIsConnectedToSelectedNode(e){return this.edgeIsConnectedToNode(e,this.config.selectedGraphObject)}nodeIsNeighborToFocusedNode(e){return this.nodeIsNeighborTo(e,this.config.focusedGraphObject)}nodeIsNeighborToSelectedNode(e){return this.nodeIsNeighborTo(e,this.config.selectedGraphObject)}getColorForNodeByNeighborhood(e){e&&"number"==typeof e.neighborhood||console.error("Node must have a neighborhood",e);let n=this.reservedColorsByNeighborhood.indexOf(e.neighborhood);return(-1===n&&(n=this.reservedColorsByNeighborhood.push(e.neighborhood)-1),n>this.config.colorPalette.length-1)?(console.error("Ran out of colors for neighborhood"),this.config.colorPalette[0]):this.config.colorPalette[n]}getColorForNodeByLabel(e){let n="rgb(100, 100, 100)";if(!(e instanceof c))return n;if(e.isIntermediateNode())return"rgb(128, 134, 139)";let r=this.config.nodeColors[e.getLabels()];return r||n}getColorForNode(e){switch(this.config.colorScheme){case f.ColorScheme.NEIGHBORHOOD:return this.getColorForNodeByNeighborhood(e);case f.ColorScheme.LABEL:return this.getColorForNodeByLabel(e);default:throw Error("Invalid color scheme",colorScheme)}}appendGraphData(e,n){let r=[];if(Array.isArray(e))for(let n of e){let e=this.config.nodes[n.identifier];(!e||e.isIntermediateNode())&&r.push(n)}let i=[];if(Array.isArray(n))for(let e of n)this.config.edges[e.identifier]||i.push(e);if(r.length||i.length)return this.config.appendGraphData(r,i),this.eventListeners[p.EventTypes.GRAPH_DATA_UPDATE].forEach(e=>e({nodes:this.getNodes(),edges:this.getEdges()},{newNodes:r,newEdges:i},this.config)),{newNodes:r,newEdges:i}}getNode(e){if("string"!=typeof e||0===e.length)return null;let n={};switch(this.config.viewMode){case f.ViewModes.DEFAULT:n=this.config.nodes;break;case f.ViewModes.SCHEMA:n=this.config.schemaNodes}return n[e]}getNodeCount(){return this.config.viewMode===f.ViewModes.DEFAULT?this.config.nodeCount:this.config.schemaNodeCount}getNodes(){let e={};switch(this.config.viewMode){case f.ViewModes.DEFAULT:e=this.config.nodes;break;case f.ViewModes.SCHEMA:e=this.config.schemaNodes}return Object.keys(e).map(n=>e[n])}getEdges(){let e={};switch(this.config.viewMode){case f.ViewModes.DEFAULT:e=this.config.edges;break;case f.ViewModes.SCHEMA:e=this.config.schemaEdges}return Object.keys(e).map(n=>e[n])}getEdgeDesign(e){let n=this.config.selectedGraphObject,r=this.config.selectedGraphObject&&e===this.config.selectedGraphObject;if(n&&r)return this.config.edgeDesign.selected;if(n)if(this.edgeIsConnectedToSelectedNode(e))return this.config.edgeDesign.focused;else return this.config.edgeDesign.default;let i=this.config.focusedGraphObject&&e===this.config.focusedGraphObject;return!n&&i||this.edgeIsConnectedToFocusedNode(e)||this.edgeIsConnectedToSelectedNode(e)?this.config.edgeDesign.focused:this.config.edgeDesign.default}requestNodeExpansion(e,n,r){let i=Object.keys(e.properties).map(n=>({key:n,value:e.properties[n],type:this.getPropertyType(e,n)}));this.eventListeners[p.EventTypes.NODE_EXPANSION_REQUEST].forEach(o=>o(e,n,r,i,this.config))}createNodeExpansionMenu(e,n){let r=document.querySelector(".graph-context-menu");r&&r.remove();let i=document.createElement("div");i.className="graph-context-menu";let o=document.createElement("div");o.className="context-menu-item node-expand-edge",o.dataset.direction=h.Direction.INCOMING.description,o.dataset.label="",o.innerHTML=`${this.incomingEdgeSvg} All incoming edges`,i.appendChild(o);let s=document.createElement("div");s.className="context-menu-item node-expand-edge",s.dataset.direction=h.Direction.OUTGOING.description,s.dataset.label="",s.innerHTML=`${this.outgoingEdgeSvg} All outgoing edges`,i.appendChild(s);let a=document.createElement("div");a.className="context-menu-divider",i.appendChild(a),this.getEdgeTypesOfNodeSorted(e).forEach(({label:e,direction:n})=>{let r=n===h.Direction.INCOMING.description?this.incomingEdgeSvg:this.outgoingEdgeSvg,o=document.createElement("div");o.className="context-menu-item node-expand-edge",o.dataset.direction=n,o.dataset.label=e,o.innerHTML=`${r} ${e}`,i.appendChild(o)}),i.addEventListener("click",e=>{let r=e.target.closest(".node-expand-edge");if(!r)return;let o=r.dataset.label,s=r.dataset.direction;n&&(n(s,o),i.remove())});let l=e=>{i.contains(e.target)||(i.remove(),document.removeEventListener("click",l))};return window.setTimeout(()=>{document.addEventListener("click",l)},0),i}getPropertyType(e,n){if(!this.config.schema||!this.config.schema.rawSchema||!e)return null;let r=this.config.schema.rawSchema,i=r.nodeTables.filter(n=>e.labels.some(e=>n.labelNames.includes(e)));if(0===i.length)return console.error(`No matching node table found for labels: ${e.labels.join(", ")}`),null;for(let e of i){let i=e.propertyDefinitions.find(e=>e.propertyDeclarationName===n);if(i){let e=r.propertyDeclarations.find(e=>e.name===i.propertyDeclarationName);if(e)return e.type}}return console.error(`Property ${n} not found in any matching node tables for labels: ${e.labels.join(", ")}`),null}getKeyProperties(e){if(e instanceof u){let n=[];for(let r of e.key_property_names)n.push(e.properties[r]);return n.join(", ")}return""}}class g{upArrowSvg=`<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043">
            <path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/>
        </svg>`;downArrowSvg=`<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043">
            <path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/>
        </svg>`;closeSvg=`<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043">
            <path d="m336-280-56-56 144-144-144-143 56-56 144 144 143-144 56 56-144 143 144 144-56 56-143-144-144 144Z"/>
        </svg>`;incomingEdgeSvg='<svg height="18px" viewBox="0 -960 960 960" width="18px" fill="#5f6368"><path d="M320-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-100 0-170-70T80-480q0-100 70-170t170-70q90 0 156.5 57T557-520h323v80H557q-14 86-80.5 143T320-240Zm0-240Z"/></svg>';outgoingEdgeSvg='<svg height="18px" viewBox="0 -960 960 960" width="18px" fill="#5f6368"><path d="M640-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-90 0-156.5-57T403-440H80v-80h323q14-86 80.5-143T640-720q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-240Z"/></svg>';circularEdgeSvg='<svg height="18px" viewBox="0 -960 960 960" width="18px" fill="#5f6368"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>';overflowSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/></svg>';store=null;container=null;sectionCollapseState=null;_getTooltipElement(){let e=document.getElementById("custom-tooltip");return e||((e=document.createElement("div")).id="custom-tooltip",e.style.position="fixed",e.style.backgroundColor="#3b4043",e.style.color="white",e.style.padding="6px 10px",e.style.borderRadius="4px",e.style.fontSize="14px",e.style.maxWidth="300px",e.style.zIndex="1000",e.style.pointerEvents="none",e.style.whiteSpace="normal",e.style.wordWrap="break-word",document.body.appendChild(e)),e}_createTooltip(e,n){e.setAttribute("data-tooltip",n),e.addEventListener("mouseenter",n=>{let r=this._getTooltipElement();r.textContent=e.getAttribute("data-tooltip"),r.style.display="block",setTimeout(()=>{let n=e.getBoundingClientRect();r.style.left=`${n.left}px`,r.style.top=`${n.top-r.offsetHeight-5}px`,5>parseFloat(r.style.left)&&(r.style.left="5px"),parseFloat(r.style.left)+r.offsetWidth>window.innerWidth-5&&(r.style.left=`${window.innerWidth-r.offsetWidth-5}px`),5>parseFloat(r.style.top)&&(r.style.top=`${n.bottom+5}px`)},0)}),e.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")})}_nodeChipHtml(e,n=!1,r=null){let i=document.createElement("span");i.style.backgroundColor=this.store.getColorForNode(e),i.className=`node-chip ${n?"clickable":""}`;let o=r||e.getLabels();return i.textContent=o,i.setAttribute("data-tooltip",o),i.addEventListener("mouseenter",()=>{if(this.store.config.selectedGraphObject!==e&&this.store.setFocusedObject(e),i.scrollWidth>i.clientWidth){let e=this._getTooltipElement();e.textContent=i.getAttribute("data-tooltip"),e.style.display="block",setTimeout(()=>{let n=i.getBoundingClientRect();e.style.left=`${n.left}px`,e.style.top=`${n.top-e.offsetHeight-5}px`,5>parseFloat(e.style.left)&&(e.style.left="5px"),parseFloat(e.style.left)+e.offsetWidth>window.innerWidth-5&&(e.style.left=`${window.innerWidth-e.offsetWidth-5}px`),5>parseFloat(e.style.top)&&(e.style.top=`${n.bottom+5}px`)},0)}}),i.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null);let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")}),n&&i.addEventListener("click",n=>{this.store.setFocusedObject(null),this.store.setSelectedObject(e)}),i}_edgeChipHtml(e,n=!1){let r=document.createElement("span");return r.className=`edge-chip ${n?"clickable":""}`,r.textContent=e.getLabels(),n&&(r.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==e&&this.store.setFocusedObject(e)}),r.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),r.addEventListener("click",n=>{this.store.setFocusedObject(null),this.store.setSelectedObject(e)})),r}_initCloseButton(){let e=document.createElement("button");return e.className="close-btn circular-hover-effect",e.innerHTML=this.closeSvg,e.addEventListener("click",()=>{this.store.setSelectedObject(null)}),e}_initOverflowButton(){let e=document.createElement("button");return e.className="overflow-btn circular-hover-effect",e.innerHTML=this.overflowSvg,e.addEventListener("click",()=>{let n=this.store.config.selectedGraphObject;if(n instanceof c){let r=this.store.createNodeExpansionMenu(n,(e,r)=>{n.fx=n.x,n.fy=n.y,this.store.requestNodeExpansion(n,e,r)}),i=e.getBoundingClientRect();r.style.left=i.left+"px",r.style.top=i.bottom+"px",document.body.appendChild(r)}}),e}_initToggleButton(e,n="initial"){let r=document.createElement("button");r.className="collapse-btn";let i=!0,o=()=>{i?r.innerHTML=this.upArrowSvg:r.innerHTML=this.downArrowSvg;let o=i?n:"none";for(let n=0;n<e.length;n++)e[n].style.display=o};return o(),r.addEventListener("click",()=>{i=!i,o()}),r}elements={container:null,content:null,title:{container:null,content:null,closeButton:null,overflowButton:null,icon:null},properties:{container:null,header:null,title:null,propertyList:[]},neighbors:{container:null,header:null,title:null,propertyList:[]},schemaChipLists:{nodeList:{container:null,nodes:[]},edgeList:{container:null,edges:[]}}};constructor(e,n,r){this.store=e,this.elements.mount=n,this.sectionCollapseState=r,this.refresh()}refresh(){this.scaffold(),this.title(),this.store.config.selectedGraphObject?this.store.config.selectedGraphObject instanceof c?(this.properties(),this.neighbors()):(this.neighbors(),this.properties()):this.store.config.viewMode===f.ViewModes.SCHEMA&&(this.schemaNodes(),this.schemaEdges())}scaffold(){this.elements.mount.innerHTML=`
            <style>
                .panel {
                    background-color: white;
                    border-radius: 8px;
                    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 2px 6px 2px rgba(60, 64, 67, 0.15);
                    overflow: hidden;
                    width: 360px;
                    position: absolute;
                    left: 16px;
                    top: 16px;
                    max-height: calc(100% - 2rem);
                    overflow-y: auto;
                    display: flex;
                    flex-direction: column;
                }
    
                .panel-header {
                    padding: 16px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid #DADCE0;
                    overflow: hidden;
                }
                
                .panel-header-buttons {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-left: auto;
                    min-width: 60px;
                }
                
                .schema-header {
                    padding: 16px 16px 10px 16px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .schema-container {
                    padding: 0px 16px 10px 16px;
                    justify-content: space-between;
                    align-items: center;
                }
                
                .schema-container.hide {
                    display: none;
                }
    
                .panel-header h2 {
                    margin: 0;
                    font-size: 20px;
                    font-weight: 400;
                    display: flex;
                    align-items: center;
                    height: 28px;
                    max-width: 100%;
                    overflow: hidden;
                }

                .panel-header .node-chip {
                    max-width: 35%;
                    min-width: 24px;
                }
                
                .panel-header .panel-header-content {
                    display: flex;
                    align-items: center;
                    flex: 1;
                    max-width: 75%;
                    overflow: hidden;
                }
                
                .panel-header .panel-header-content.schema-header-content {
                    font-size: 14px;
                    font-weight: 500;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                }

                .panel-header .selected-object-label {
                    font-size: 16px;
                    font-weight: 600;
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    max-width: 100%;
                }
                
                .schema-header h2 {
                    margin: 0;
                    font-size: 16px;
                    font-weight: 400;
                    display: inline-block;
                }
    
                .node-chip {
                    background-color: #ff5722;
                    padding: 4px 8px;
                    border-radius: 4px;
                    margin-right: 8px;
                    color: white;
                    font-size: 12px;
                    font-weight: bold;
                    position: relative;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    overflow: hidden;
                }
                
                .node-chip.clickable:hover {
                    cursor: pointer;
                    filter: brightness(96%);
                }
                
                .node-chip-text {
                    color: white;
                    font-size: 12px;
                    font-weight: bold;
                }
                
                .count {
                    color: #5F6368;
                    font-weight: normal;
                }
    
                .close-btn, .collapse-btn, .overflow-btn, .edge-direction-btn {
                    background: none;
                    border: none;
                    color: #666;
                    font-size: 20px;
                    cursor: pointer;
                    padding: 0;
                    height: 24px;
                }
                
                .edge-direction-btn {
                    height: auto;
                    font-size: initial;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 4px;
                    margin-right: 8px;
                }
                
                /* Style for the SVG inside the edge direction button */
                .edge-direction-btn svg {
                    width: 18px;
                    height: 18px;
                }
    
                .panel-content {
                    padding: 16px 16px 0;
                    overflow: scroll;
                }
    
                .section {
                    margin-bottom: 16px;
                }
    
                .section-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    cursor: pointer;
                    user-select: none;
                    margin-bottom: 12px;
                }
    
                .section-header h3 {
                    margin: 0;
                    font-size: 14px;
                    font-weight: 600;
                    color: #333;
                }
    
                .section-content {
                    margin-top: 8px;
                }
                
                .property {
                    display: flex;
                    justify-content: space-between;
                    padding: 8px 0;
                    border-top: 1px solid #DADCE0;
                    flex-wrap: nowrap;
                    overflow: hidden;
                }
                
                .property-label {
                    color: #202124;
                    font-size: 13px;
                    font-weight: 600;
                    overflow-wrap: break-word;
                    text-overflow: ellipsis;
                }
                
                .edge-neighbor-type {
                    color: #202124;
                    font-size: 13px;
                    font-weight: 600;
                    flex: 4;
                    width: 40%;
                }
                
                .edge-neighbor-node {
                    color: #202124;
                    font-size: 13px;
                    font-weight: 600;
                    flex: 6;
                    width: 60%;
                }
                
                .edge-neighbor-type {
                    width: calc(40% - 4px);
                    padding-right: 4px;
                    flex: 4;
                }
                
                .edge-neighbor-node {
                    width: 60%;
                    flex: 6;
                }
                
                .property-label.property-label-wrap {
                    width: calc(40% - 4px);
                    padding-right: 4px;
                    flex: 4;
                    display: -webkit-box;
                    -webkit-line-clamp: 3;
                    -webkit-box-orient: vertical;
                    box-sizing: border-box;
                    overflow: hidden;
                }
    
                .property-value {
                    color: #5F6368;
                    font-size: 13px;
                    font-weight: 400;
                    overflow-wrap: break-word;
                    text-overflow: ellipsis;
                    -webkit-line-clamp: 3;
                    transition: background-color 0.2s ease;
                }
                
                .property-value.property-value-wrap {
                    width: 60%;
                    flex: 6;
                    display: -webkit-box;
                    -webkit-line-clamp: 3;
                    -webkit-box-orient: vertical;
                    box-sizing: border-box;
                    overflow: hidden;
                }
    
                .edge-title {
                    background-color: white;
                    border: 1px solid #DADCE0;
                    padding: 4px 8px;
                    border-radius: 4px;
                    margin-right: 8px;
                    font-size: 14px;
                    font-weight: bold;
                }
                
                .edge-chip {
                    background-color: white;
                    border: 1px solid #DADCE0;
                    color: #3C4043;
                    padding: 4px 8px;
                    border-radius: 4px;
                    margin-right: 8px;
                    font-size: 12px;
                    font-weight: bold;
                }

                .neighbor-row-edge .edge-chip {
                    margin-right: 0;
                }
                
                .edge-chip.clickable:hover {
                    cursor: pointer;
                    filter: brightness(96%);
                }
    
                .edge-chip.schema {
                    display: inline-block;
                    margin-bottom: 10px;
                }
                
                .neighbor-row {
                    display: flex;
                    align-items: center;
                    padding: 8px 0;
                    border-top: 1px solid #DADCE0;
                }
                
                .neighbor-row-neighbor {
                    display: flex;
                    justify-content: start;
                    align-items: center;
                    cursor: pointer;
                }
                
                /* New styles for the two-column layout */
                .neighbor-column-left {
                    display: flex;
                    align-items: center;
                    width: 40%;
                    cursor: pointer;
                }
                
                .neighbor-column-right {
                    width: 60%;
                    cursor: pointer;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                }
                
                .schema-row .neighbor-column-left {
                    width: auto;
                }
                
                .schema-row .neighbor-column-right {
                    flex: 1;
                }
                
                .schema-row .neighbor-column-left, .schema-row .neighbor-column-right {
                    overflow: initial;
                    text-overflow: initial;
                    cursor: initial;
                }
                
                .neighbor-row-neighbor * {
                    cursor: pointer;
                }
                
                .neighbor-row-edge {
                    display: flex;
                    flex: 1;
                    justify-content: end;
                    align-items: center;
                }
    
                .neighbor-id {
                    font-weight: 400;
                    color: #333;
                    font-size: 13px;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    display: block;
                    width: 100%;
                }
    
                .chip-wrap-container {
                    display: flex;
                    flex-wrap: wrap;
                    row-gap: 12px;
                    column-gap: 4px;
                }

                /* Circular hover effect class */
                .circular-hover-effect {
                    border-radius: 50%;
                    transition: background-color 0.2s ease;
                }
                
                .circular-hover-effect:hover {
                    background-color: rgba(95, 99, 104, 0.1);
                }
            </style>
            <div class="panel">
                <div class="panel-header"></div>
                <div class="panel-content"></div>
            </div>`,this.elements.container=this.elements.mount.querySelector(".panel"),this.elements.content=this.elements.mount.querySelector(".panel-content"),this.elements.title.container=this.elements.container.querySelector(".panel-header"),this.elements.title.content=document.createElement("span"),this.elements.title.content.className="panel-header-content",this.elements.title.closeButton=document.createElement("button"),this.elements.properties.container=document.createElement("div"),this.elements.schemaChipLists.nodeList.container=document.createElement("div"),this.elements.schemaChipLists.edgeList.container=document.createElement("div")}title(){let e,n=this.store.config.selectedGraphObject,{container:r,content:i}=this.elements.title,o=this.elements.title.closeButton;r.innerHTML="";let s=document.createElement("div");s.className="panel-header-buttons",r.appendChild(i);let a=()=>{if(i.classList.remove("schema-header-content"),n instanceof c&&(i.appendChild(this._nodeChipHtml(n)),this.store.config.viewMode===f.ViewModes.DEFAULT)){let r=document.createElement("span");r.className="selected-object-label",r.textContent=this.store.getKeyProperties(n),r.addEventListener("mouseenter",()=>{if(r.scrollWidth>r.clientWidth){let e=this._getTooltipElement();e.textContent=r.textContent,e.style.display="block",setTimeout(()=>{let n=r.getBoundingClientRect();e.style.left=`${n.left}px`,e.style.top=`${n.top-e.offsetHeight-5}px`,5>parseFloat(e.style.left)&&(e.style.left="5px"),parseFloat(e.style.left)+e.offsetWidth>window.innerWidth-5&&(e.style.left=`${window.innerWidth-e.offsetWidth-5}px`),5>parseFloat(e.style.top)&&(e.style.top=`${n.bottom+5}px`)},0)}}),r.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")}),r.style.cursor="pointer",r.addEventListener("click",()=>{navigator.clipboard.writeText(r.textContent).then(()=>{let e=r.style.backgroundColor,n=r.style.borderRadius;r.style.backgroundColor="rgba(0, 0, 0, 0.1)",r.style.borderRadius="4px";let i=this._getTooltipElement();i.textContent="copied to clipboard",i.style.display="block";let o=r.getBoundingClientRect();i.style.left=`${o.left}px`,i.style.top=`${o.top-i.offsetHeight-5}px`,setTimeout(()=>{r.style.backgroundColor=e,r.style.borderRadius=n},200),setTimeout(()=>{i.style.display="none"},1e3)}).catch(e=>{console.error("Could not copy text: ",e)})}),i.appendChild(r),e=this._initOverflowButton()}n instanceof h&&i.appendChild(this._edgeChipHtml(n)),o=this._initCloseButton()},l=()=>{let e=this.store.getNodes(),n=this.store.config.schema.getEdgeNames();i.textContent=`${e.length} nodes, ${n.length} edges`,i.classList.add("schema-header-content"),r.style.borderBottom="none",o=this._initToggleButton([this.elements.content],"block")};n?a():this.store.config.viewMode===f.ViewModes.SCHEMA&&l(),e&&s.appendChild(e),o&&s.appendChild(o),r.appendChild(s)}_createSection(e,n,r,i=0){let o=document.createElement("div");o.className="section",i&&(o.style.marginBottom=`${i}px`);let s=document.createElement("div");s.className="section-content";let a=null,l=null,u=null;if(r){(a=document.createElement("div")).className="section-header",(l=document.createElement("h3")).textContent=e;let n=this.sectionCollapseState[e]??!1;s.style.display=n?"none":"block",(u=document.createElement("button")).className="collapse-btn",u.innerHTML=n?this.downArrowSvg:this.upArrowSvg,u.addEventListener("click",()=>{let n="none"===s.style.display;s.style.display=n?"block":"none",u.innerHTML=n?this.upArrowSvg:this.downArrowSvg,this.sectionCollapseState[e]=!n}),o.appendChild(a),a.appendChild(l),a.appendChild(u)}o.appendChild(s);for(let e=0;e<n.length;e++)s.appendChild(n[e]);return{container:o,header:a,title:l,button:u,content:s}}properties(){let e=this.store.config.selectedGraphObject;if(!e||!e.properties)return;let n="",r="";this.store.config.viewMode===f.ViewModes.DEFAULT&&(n="property-label-wrap",r="property-value-wrap");let i=(e,i)=>{let o=document.createElement("div");o.className="property";let s=document.createElement("div");s.className=`property-label ${n}`,s.textContent=e,s.addEventListener("mouseenter",()=>{if(s.scrollHeight>s.clientHeight){let n=this._getTooltipElement();n.textContent=e,n.style.display="block",setTimeout(()=>{let e=s.getBoundingClientRect();n.style.left=`${e.left}px`,n.style.top=`${e.top-n.offsetHeight-5}px`,5>parseFloat(n.style.left)&&(n.style.left="5px"),parseFloat(n.style.left)+n.offsetWidth>window.innerWidth-5&&(n.style.left=`${window.innerWidth-n.offsetWidth-5}px`),5>parseFloat(n.style.top)&&(n.style.top=`${e.bottom+5}px`)},0)}}),s.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")});let a=document.createElement("div");return a.className=`property-value ${r}`,a.textContent=i,a.style.cursor="pointer",a.addEventListener("mouseenter",()=>{if(a.scrollHeight>a.clientHeight){let e=this._getTooltipElement();e.textContent=i,e.style.display="block",setTimeout(()=>{let n=a.getBoundingClientRect();e.style.left=`${n.left}px`,e.style.top=`${n.top-e.offsetHeight-5}px`,5>parseFloat(e.style.left)&&(e.style.left="5px"),parseFloat(e.style.left)+e.offsetWidth>window.innerWidth-5&&(e.style.left=`${window.innerWidth-e.offsetWidth-5}px`),5>parseFloat(e.style.top)&&(e.style.top=`${n.bottom+5}px`)},0)}}),a.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")}),a.addEventListener("click",()=>{navigator.clipboard.writeText(i).then(()=>{let e=a.style.backgroundColor,n=a.style.borderRadius;a.style.backgroundColor="rgba(0, 0, 0, 0.1)",a.style.borderRadius="4px";let r=this._getTooltipElement();r.textContent="copied to clipboard",r.style.display="block";let i=a.getBoundingClientRect();r.style.left=`${i.left}px`,r.style.top=`${i.top-r.offsetHeight-5}px`,setTimeout(()=>{a.style.backgroundColor=e,a.style.borderRadius=n},200),setTimeout(()=>{r.style.display="none"},1e3)}).catch(e=>{console.error("Could not copy text: ",e)})}),o.appendChild(s),o.appendChild(a),o},o=Object.entries(e.properties).map(([e,n])=>i(e,n));this.elements.properties=this._createSection("Properties",o,!0),this.elements.properties.title.innerHTML=`Properties <span class="count">${o.length}</span>`,this.elements.content.appendChild(this.elements.properties.container)}neighbors(){let e=this.store.config.selectedGraphObject;if(!e||!e.properties)return;let n=[];if(e instanceof c){let r=this.store.getEdgesOfNodeSorted(e);if(this.store.config.viewMode===f.ViewModes.DEFAULT)for(let i of r){let r=this.store.getNode(i.sourceUid===e.uid?i.destinationUid:i.sourceUid),o=document.createElement("div");o.className="neighbor-row";let s=document.createElement("div");s.className="neighbor-column-left";let a=document.createElement("div");a.className="neighbor-column-right";let l=document.createElement("button");l.className="edge-direction-btn circular-hover-effect",l.innerHTML=i.sourceUid===e.uid?this.outgoingEdgeSvg:this.incomingEdgeSvg;let u=i.sourceUid===e.uid?`Destination edge: ${i.getLabels()}`:`Source edge: ${i.getLabels()}`;this._createTooltip(l,u),l.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==i&&this.store.setFocusedObject(i)}),l.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),l.addEventListener("click",()=>{this.store.setFocusedObject(null),this.store.setSelectedObject(i)}),s.appendChild(l);let c=this._nodeChipHtml(r,!1);c.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==r&&this.store.setFocusedObject(r)}),c.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),c.addEventListener("click",()=>{this.store.setFocusedObject(null),this.store.setSelectedObject(r)}),s.appendChild(c),a.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==r&&this.store.setFocusedObject(r)}),a.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),a.addEventListener("click",()=>{this.store.setFocusedObject(null),this.store.setSelectedObject(r)});let h=document.createElement("span");h.className="neighbor-id";let d=this.store.getKeyProperties(r);h.textContent=d,h.addEventListener("mouseenter",()=>{if(h.scrollWidth>h.clientWidth){let e=this._getTooltipElement();e.textContent=d,e.style.display="block",setTimeout(()=>{let n=h.getBoundingClientRect();e.style.left=`${n.left}px`,e.style.top=`${n.top-e.offsetHeight-5}px`,5>parseFloat(e.style.left)&&(e.style.left="5px"),parseFloat(e.style.left)+e.offsetWidth>window.innerWidth-5&&(e.style.left=`${window.innerWidth-e.offsetWidth-5}px`),5>parseFloat(e.style.top)&&(e.style.top=`${n.bottom+5}px`)},0)}}),h.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")}),a.appendChild(h),o.appendChild(s),o.appendChild(a),n.push(o)}else{let i={};for(let n of r){let r=this.store.getNode(n.sourceUid===e.uid?n.destinationUid:n.sourceUid);i[r.uid]||(i[r.uid]=[]),i[r.uid].push(n)}for(let r of Object.keys(i)){let o=this.store.getNode(r),s=i[r],a=s.filter(n=>n.destinationUid===e.uid&&n.sourceUid!==e.uid),l=s.filter(n=>n.sourceUid===e.uid&&n.destinationUid!==e.uid),u=s.filter(n=>n.sourceUid===e.uid&&n.destinationUid===e.uid),c=(e,n)=>{let r=document.createElement("div");r.className="neighbor-row schema-row";let i=document.createElement("div");i.className="neighbor-column-left";let s=document.createElement("div");s.className="neighbor-column-right";let a=document.createElement("button");switch(a.className="edge-direction-btn circular-hover-effect",n){case"source":a.innerHTML=this.outgoingEdgeSvg;break;case"destination":a.innerHTML=this.incomingEdgeSvg;break;case"circular":a.innerHTML=this.circularEdgeSvg}i.appendChild(a);let l=this._nodeChipHtml(o,!0);for(let n of(s.appendChild(l),e)){let e=this._edgeChipHtml(n,!0);s.appendChild(e)}return r.appendChild(i),r.appendChild(s),r};if(l.length){let e=c(l,"source");n.push(e)}if(a.length){let e=c(a,"destination");n.push(e)}if(u.length){let e=c(a,"circular");n.push(e)}}}}else if(e instanceof h){let n=document.createElement("div");n.className="section";let r=document.createElement("div");r.className="section-content",n.appendChild(r),this.elements.neighbors={container:n,content:r},["source","target"].forEach((n,i)=>{let o=e[n];if(!o)return;let s=document.createElement("div");s.className="neighbor-row";let a=document.createElement("div");a.className="neighbor-column-left";let l=document.createElement("button");l.className="edge-direction-btn circular-hover-effect",l.innerHTML="target"===n?this.outgoingEdgeSvg:this.incomingEdgeSvg;let u="target"===n?`Destination edge: ${e.getLabels()}`:`Source edge: ${e.getLabels()}`;this._createTooltip(l,u),a.appendChild(l);let c=this._nodeChipHtml(o,!1);a.appendChild(c),a.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==o&&this.store.setFocusedObject(o)}),a.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),a.addEventListener("click",()=>{this.store.setFocusedObject(null),this.store.setSelectedObject(o)});let h=document.createElement("div");if(h.className="neighbor-column-right",this.store.config.viewMode===f.ViewModes.DEFAULT){let e=document.createElement("span");e.className="neighbor-id";let n=this.store.getKeyProperties(o);e.textContent=n,e.addEventListener("mouseenter",()=>{if(e.scrollWidth>e.clientWidth){let r=this._getTooltipElement();r.textContent=n,r.style.display="block",setTimeout(()=>{let n=e.getBoundingClientRect();r.style.left=`${n.left}px`,r.style.top=`${n.top-r.offsetHeight-5}px`,5>parseFloat(r.style.left)&&(r.style.left="5px"),parseFloat(r.style.left)+r.offsetWidth>window.innerWidth-5&&(r.style.left=`${window.innerWidth-r.offsetWidth-5}px`),5>parseFloat(r.style.top)&&(r.style.top=`${n.bottom+5}px`)},0)}}),e.addEventListener("mouseleave",()=>{let e=document.getElementById("custom-tooltip");e&&(e.style.display="none")}),h.appendChild(e)}h.addEventListener("mouseenter",()=>{this.store.config.selectedGraphObject!==o&&this.store.setFocusedObject(o)}),h.addEventListener("mouseleave",()=>{this.store.setFocusedObject(null)}),h.addEventListener("click",()=>{this.store.setFocusedObject(null),this.store.setSelectedObject(o)}),s.appendChild(a),s.appendChild(h),0===i&&(s.style.borderTop="none"),r.appendChild(s)})}e instanceof c&&(this.elements.neighbors=this._createSection("Neighbors",n,!0),this.elements.neighbors.title.innerHTML=`Neighbors <span class="count">${n.length}</span>`),this.elements.content.appendChild(this.elements.neighbors.container)}schemaNodes(){this.elements.content.style.paddingTop="0";let e=document.createElement("div");e.className="chip-wrap-container";let n=this.store.getNodes();for(let r=0;r<n.length;r++){let i=n[r],o=this._nodeChipHtml(i,!0);e.appendChild(o)}let r=this._createSection("",[e],!1,28);this.elements.content.appendChild(r.container)}schemaEdges(){let e=document.createElement("div");e.className="chip-wrap-container";let n=this.store.getEdges();for(let r=0;r<n.length;r++){let i=n[r],o=this._edgeChipHtml(i,!0);e.appendChild(o)}let r=this._createSection("",[e],!1);this.elements.content.appendChild(r.container)}}class m{store;mount;domConstructor;_sectionCollapseState={};constructor(e,n){this.store=e,this.mount=n,this.constructSidebar(),this.initializeEvents(this.store)}constructSidebar(){let e=this.mount;e.className="sidebar",this.store.config.viewMode===f.ViewModes.DEFAULT?this.selectedObject?e.style.display="initial":e.style.display="none":e.style.display="initial",this.domConstructor=new g(this.store,e,this._sectionCollapseState)}initializeEvents(e){if(!(e instanceof p))throw Error("Store must be an instance of GraphStore");e.addEventListener(p.EventTypes.GRAPH_DATA_UPDATE,(e,n,r)=>{this.domConstructor&&this.domConstructor.refresh()}),e.addEventListener(p.EventTypes.VIEW_MODE_CHANGE,(e,n)=>{this.selectedObject=n.selectedGraphObject,this.mount.innerHTML="",this.mount.textContent="",e!==f.ViewModes.TABLE&&this.constructSidebar()}),e.addEventListener(p.EventTypes.SELECT_OBJECT,(e,n)=>{this.selectedObject=e,this.mount.innerHTML="",this.mount.textContent="",this.constructSidebar()})}}var y=class{svg={bubble:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M580-120q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm0-80q17 0 28.5-11.5T620-240q0-17-11.5-28.5T580-280q-17 0-28.5 11.5T540-240q0 17 11.5 28.5T580-200Zm80-200q-92 0-156-64t-64-156q0-92 64-156t156-64q92 0 156 64t64 156q0 92-64 156t-156 64Zm0-80q59 0 99.5-40.5T800-620q0-59-40.5-99.5T660-760q-59 0-99.5 40.5T520-620q0 59 40.5 99.5T660-480ZM280-240q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T360-400q0-33-23.5-56.5T280-480q-33 0-56.5 23.5T200-400q0 33 23.5 56.5T280-320Zm300 80Zm80-380ZM280-400Z"/></svg>',table:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm240-240H200v160h240v-160Zm80 0v160h240v-160H520Zm-80-80v-160H200v160h240Zm80 0h240v-160H520v160ZM200-680h560v-80H200v80Z"/></svg>',schema:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M160-40v-240h100v-80H160v-240h100v-80H160v-240h280v240H340v80h100v80h120v-80h280v240H560v-80H440v80H340v80h100v240H160Zm80-80h120v-80H240v80Zm0-320h120v-80H240v80Zm400 0h120v-80H640v80ZM240-760h120v-80H240v80Zm60-40Zm0 320Zm400 0ZM300-160Z"/></svg>',enterFullScreen:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043"><path d="M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z"/></svg>',exitFullScreen:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043"><path d="M240-120v-120H120v-80h200v200h-80Zm400 0v-200h200v80H720v120h-80ZM120-640v-80h120v-120h80v200H120Zm520 0v-200h80v120h120v80H640Z"/></svg>'};elements={views:{container:null,buttons:[]},layout:{container:null,title:null,buttons:[],content:null},nodeEdgeCount:null,showLabels:{container:null,switch:null},fullscreen:null};constructor(e,n){this.store=e,this.mount=n,this.scaffold(),this.initializeEvents()}scaffold(){this.mount.innerHTML=`
            <style>
                header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                .menu-bar {
                    align-items: center;
                    border-bottom: 1px solid #DADCE0;
                    box-sizing: border-box;
                    color: #3C4043;
                    display: flex;
                    padding: 16px 24px 16px 16px;
                    width: 100%;
                    background: #fff;
                }
                .menu-item {
                    display: flex;
                    margin-right: 16px;
                }
                .menu-bar .hidden {
                    visibility: hidden;
                }
                .fullscreen-container.remove {
                    display: none;
                }
                .toggle-container {
                    display: flex;
                    align-items: center;
                    height: 100%;
                    margin-left: 10px;
                }
                .toggle-switch {
                    position: relative;
                    display: inline-block;
                    width: 46px;
                    height: 24px;
                    flex-shrink: 0;
                }
                .toggle-switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                    margin: 0;
                    padding: 0;
                }
                .hidden .toggle-slider {
                    transition: 0ms;
                }
                .toggle-slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #e9ecef;
                    transition: .4s;
                    border-radius: 24px;
                }
                .toggle-slider:before {
                    position: absolute;
                    content: "";
                    height: 18px;
                    width: 18px;
                    left: 3px;
                    bottom: 3px;
                    background-color: white;
                    transition: .3s;
                    border-radius: 50%;
                }
                input:checked + .toggle-slider {
                    background-color: #228be6;
                }
                input:checked + .toggle-slider:before {
                    transform: translateX(22px);
                }
                .toggle-label {
                    margin-left: 8px;
                    color: #202124;
                    line-height: 24px;
                    font-size: .9rem;
                }
                .graph-element-tooltip {
                    font: 12px 'Google Sans', 'Roboto', sans-serif;
                    position: absolute;
                    padding: 4px 8px;
                    box-sizing: border-box;
                    pointer-events: none;
                    transition: opacity 0.2s ease-in-out;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                    border-radius: 4px;
                }
                
                /* Ensure .graph-tooltip built-in from force-graph does not interfere */
                .graph-tooltip {
                    background: none !important;
                    border: none !important;
                    padding: 0 !important;
                }

                .menu-bar .dropdown {
                    margin-right: 16px;
                    position: relative;
                }

                .dropdown-toggle {
                    appearance: none;
                    background: url("data:image/svg+xml;utf8,<svg fill='rgba(73, 80, 87, 1)' height='24' viewBox='0 0 24 24' width='24'><path d='M7 10l5 5 5-5z'/></svg>") no-repeat;
                    background-position: right 10px center;
                    background-color: white;
                    padding: 12px 40px 12px 16px;
                    border: 1px solid #80868B;
                    border-radius: 4px;
                    color: #3C4043;
                    cursor: pointer;
                    text-align: left;
                    
                    width: 220px;

                    font-family: inherit;
                    font-size: .9rem;
                }
                
                .dropdown-toggle.disabled {
                    background: url("data:image/svg+xml;utf8,<svg fill='rgba(73, 80, 87, .6)' height='24' viewBox='0 0 24 24' width='24'><path d='M7 10l5 5 5-5z'/></svg>") no-repeat;
                    background-position: right 10px center;
                    background-color: #EBEBE4;
                    border: 1px solid #EBEBE4;
                    cursor: default;
                }

                .arrow-down {
                    margin-left: 5px;
                    font-size: 10px;
                }

                .menu-bar .dropdown .dropdown-content {
                    display: none;
                    position: absolute;
                    background-color: #fff;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                    z-index: 1;
                    top: 100%;
                    left: 0;
                    padding: 8px 0;
                }

                .menu-bar .dropdown:hover .dropdown-content:not(.disabled) {
                    display: block;
                }

                .menu-bar .dropdown .dropdown-item {
                    color: #495057;
                    padding: 8px 32px 8px 8px;
                    text-decoration: none;
                    display: flex;
                    align-items: center;
                }

                .menu-bar .dropdown .dropdown-item.selected {
                    background: url("data:image/svg+xml;utf8,<svg height='24' viewBox='0 0 24 24' width='24' fill='none'><path d='M2 6L5 9L10 3' stroke='rgba(73, 80, 87, 1)' stroke-width='2' stroke-linecap='square'/></svg>") no-repeat;
                    background-position: left 15px top 100%;
                }

                .menu-bar .dropdown .dropdown-item:hover {
                    background-color: #f8f9fa;
                }

                .checkmark {
                    width: 20px;
                    margin-right: 8px;
                }

                .element-count {
                    color: #000;
                    display: flex;
                    flex: 1;
                    font-weight: 500;
                }

                .item-text {
                    flex: 1;
                    font-size: .9rem;
                }
                
                #graph-tools {
                    position: absolute;
                    bottom: 16px;
                    right: 16px;
                }
        
                #graph-tools button {
                    display: block;
                    width: 40px;
                    height: 40px;
                    background-color: transparent;
                    border: none;
                    border-radius: 20px;
                    cursor: pointer;
                }
        
                #graph-tools button:hover {
                    background-color: rgba(26, 115, 232, .08);
                }
                
                .view-toggle-group,
                .fullscreen-container {
                    display: flex;
                    align-items: center;
                    margin-right: 16px;
                    border: 1px solid #DADCE0;
                    border-radius: 4px;
                    overflow: hidden;
                }

                .view-toggle-group .view-toggle-button,
                .fullscreen-container .fullscreen-button {
                    background: none;
                    border: none;
                    padding: 8px;
                    display: flex;
                    cursor: pointer;
                    align-items: center;
                    justify-content: center;
                    border-radius: 0;
                }
                
                .view-toggle-button.disabled {
                    cursor: default;
                    opacity: 0.5;
                    background-color: rgba(0, 0, 0, .03);
                }

                .view-toggle-button:not(:last-child) {
                    border-right: 1px solid #DADCE0;
                }

                .view-toggle-button:hover:not(.view-toggle-button.disabled, .view-toggle-button.active),
                .fullscreen-button:hover {
                    background-color: rgba(0, 0, 0, 0.04);
                }

                .view-toggle-button.active {
                    background-color: #E8F0FE;
                }

                .view-toggle-button.active svg {
                    fill: #1A73E8;
                }
            </style>
            <div class="menu-bar">
                <div class="view-toggle-group">
                    <button class="view-toggle-button active" id="view-default" data-view="${f.ViewModes.DEFAULT.description}" title="Graph View">
                        ${this.svg.bubble}
                    </button>
                    <button class="view-toggle-button" id="view-table" data-view="${f.ViewModes.TABLE.description}" title="Table View">
                        ${this.svg.table}
                    </button>
                    <button class="view-toggle-button" id="view-schema" data-view="${f.ViewModes.SCHEMA.description}" title="Schema View">
                        ${this.svg.schema}
                    </button>
                </div>
                
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        Force layout
                    </button>
                    <div class="dropdown-content">
                        <a href="#" class="dropdown-item selected" data-layout="${f.LayoutModes.FORCE.description}">
                            <span class="checkmark"></span>
                            <span class="item-text">Force layout</span>
                        </a>
                        <a href="#" class="dropdown-item" data-layout="${f.LayoutModes.TOP_DOWN.description}">
                            <span class="checkmark"></span>
                            <span class="item-text">Top-down</span>
                        </a>
                        <a href="#" class="dropdown-item" data-layout="${f.LayoutModes.LEFT_RIGHT.description}">
                            <span class="checkmark"></span>
                            <span class="item-text">Left-to-right</span>
                        </a>
                        <a href="#" class="dropdown-item" data-layout="${f.LayoutModes.RADIAL_IN.description}">
                            <span class="checkmark"></span>
                            <span class="item-text">Radial inward</span>
                        </a>
                        <a href="#" class="dropdown-item" data-layout="${f.LayoutModes.RADIAL_OUT.description}">
                            <span class="checkmark"></span>
                            <span class="item-text">Radial outward</span>
                        </a>
                    </div>
                </div>
                
                <div class="element-count"></div>
                
                <div class="toggle-container" id="show-labels-container">
                    <label class="toggle-switch">
                        <input id="show-labels" type="checkbox">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Show labels</span>
                </div>
                
                <div class="fullscreen-container remove">
                    <button class="fullscreen-button">
                        ${this.svg.enterFullScreen}
                    </button>
                </div>
            </div>`,this.elements.views.container=this.mount.querySelector(".view-toggle-group"),this.elements.views.default=this.mount.querySelector("#view-default"),this.elements.views.table=this.mount.querySelector("#view-table"),this.elements.views.schema=this.mount.querySelector("#view-schema"),this.elements.layout.container=this.mount.querySelector(".dropdown"),this.elements.layout.buttons=this.mount.querySelectorAll(".dropdown-item"),this.elements.layout.title=this.mount.querySelector(".dropdown-toggle"),this.elements.layout.content=this.mount.querySelector(".dropdown-content"),this.elements.nodeEdgeCount=this.mount.querySelector(".element-count"),this.elements.showLabels.container=this.mount.querySelector("#show-labels-container"),this.elements.showLabels.switch=this.mount.querySelector("#show-labels"),this.elements.fullscreen=this.mount.querySelector(".fullscreen-button"),this.refreshNodeEdgeCount()}refreshNodeEdgeCount(){this.elements.nodeEdgeCount&&(this.elements.nodeEdgeCount.textContent=`${Object.keys(this.store.config.nodes).length} nodes, ${Object.keys(this.store.config.edges).length} edges`)}initializeEvents(){if(this.elements.views.buttons=this.mount.querySelectorAll(".view-toggle-button"),this.elements.views.buttons.forEach(e=>{switch(e.dataset.view){case f.ViewModes.DEFAULT.description:Object.keys(this.store.config.nodes).length?e.addEventListener("click",()=>this.store.setViewMode(f.ViewModes[e.dataset.view])):e.classList.add("disabled");break;case f.ViewModes.TABLE.description:this.store.config.queryResult instanceof Object?e.addEventListener("click",()=>this.store.setViewMode(f.ViewModes[e.dataset.view])):e.classList.add("disabled");break;case f.ViewModes.SCHEMA.description:this.store.config.schema&&this.store.config.schema.rawSchema?e.addEventListener("click",()=>this.store.setViewMode(f.ViewModes[e.dataset.view])):e.classList.add("disabled")}}),this.store.addEventListener(p.EventTypes.VIEW_MODE_CHANGE,e=>{switch(this.elements.views.buttons.forEach(n=>{n.dataset.view===e.description?n.classList.add("active"):n.classList.remove("active")}),e){case f.ViewModes.DEFAULT:this.elements.layout.container.classList.remove("hidden"),this.elements.nodeEdgeCount.classList.remove("hidden"),this.elements.showLabels.container.classList.remove("hidden"),"undefined"==typeof google&&this.elements.fullscreen.parentElement.classList.add("remove");break;case f.ViewModes.TABLE:this.elements.layout.container.classList.add("hidden"),this.elements.nodeEdgeCount.classList.add("hidden"),this.elements.showLabels.container.classList.add("hidden"),"undefined"==typeof google&&this.elements.fullscreen.parentElement.classList.remove("remove");break;case f.ViewModes.SCHEMA:this.elements.layout.container.classList.add("hidden"),this.elements.nodeEdgeCount.classList.add("hidden"),this.elements.showLabels.container.classList.add("hidden"),"undefined"==typeof google&&this.elements.fullscreen.parentElement.classList.add("remove")}}),this.elements.layout.content.addEventListener("click",e=>{e.preventDefault();let n=e.target.closest(".dropdown-item");n&&this.store.setLayoutMode(f.LayoutModes[n.dataset.layout])}),this.store.addEventListener(p.EventTypes.LAYOUT_MODE_CHANGE,e=>{this.elements.layout.buttons.forEach(n=>{n.dataset.layout===e.description?(n.classList.add("selected"),this.elements.layout.title.textContent=n.textContent):n.classList.remove("selected")})}),this.elements.showLabels.switch.addEventListener("change",()=>{this.store.showLabels(this.elements.showLabels.switch.checked)}),this.store.addEventListener(p.EventTypes.SHOW_LABELS,e=>{this.elements.showLabels.switch.checked=e}),this.store.addEventListener(p.EventTypes.GRAPH_DATA_UPDATE,(e,n,r)=>{this.refreshNodeEdgeCount()}),"undefined"==typeof google){let e=(e,n=300)=>{let r=0;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>{e.apply(this,i)},n)}},n=this.mount.parentElement;window.addEventListener("fullscreenchange",e(e=>{n===e.target&&(document.fullscreenElement?this.elements.fullscreen.innerHTML=this.svg.exitFullScreen:this.elements.fullscreen.innerHTML=this.svg.enterFullScreen)})),this.elements.fullscreen.addEventListener("click",()=>{document.fullscreenElement?(this.elements.fullscreen.innerHTML=this.svg.enterFullScreen,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(this.elements.fullscreen.innerHTML=this.svg.exitFullScreen,n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen())})}}},v=class{svg={up:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/></svg>',down:'<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/></svg>'};mount=null;menuMount=null;store=null;rows=[];currentPage=0;rowsPerPage=0;pageLengths=[50,100,200];constructor(e,n,r){this.store=e,this.mount=n,this.menuMount=r,this.currentPage=0,this.rowsPerPage=this.pageLengths[0],this.expandedRows=new Set,this.initializeEvents(),this.parseQueryResultToRows(),this.render()}initializeEvents(){let e=(e,n=300)=>{let r=0;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>{e.apply(this,i)},n)}},n=this.mount.parentElement.parentElement;window.addEventListener("fullscreenchange",e(e=>{if(n===e.target)if(document.fullscreenElement){let e=window.innerHeight-this.menuMount.offsetHeight;this.mount.style.width=window.innerWidth+"px",this.mount.style.height=e+"px"}else this.mount.style.width="100%",this.mount.style.height="616px"}))}parseQueryResultToRows(){if(!this.store||!this.store.config)return void this.handleError("Cannot generate table: sorry, something went wrong");if(!this.store.config.queryResult||"object"!=typeof this.store.config.queryResult){this.handleError("Cannot generate table: query result not found or malformed"),console.error("Cannot generate table: query result not found or malformed",this.store.config.queryResult);return}try{this.rows=[];let e=Object.keys(this.store.config.queryResult),n=e.reduce((e,n)=>{let r=this.store.config.queryResult[n];return r instanceof Array?Math.max(e,r.length):e},0);for(let r=0;r<n;r++){let n=[];for(let i of e)r<this.store.config.queryResult[i].length?n.push(this.store.config.queryResult[i][r]):n.push({});this.rows.push(n)}}catch(e){this.handleError("Cannot generate table: sorry, something went wrong"),console.error("Error generating table:",e)}}render(){if(!this.store||!this.store.config)return void this.handleError("Cannot generate table: sorry, something went wrong");if(!this.store.config.queryResult||"object"!=typeof this.store.config.queryResult){this.handleError("Cannot generate table: query result not found or malformed"),console.error("Cannot generate table: query result not found or malformed",this.store.config.queryResult);return}if(this.mount.innerHTML=`
            <style>
                /* Add styles for the container itself */
                #${this.mount.id} {
                    width: 100%;
                    max-width: 100%;
                    height: 616px;
                    overflow: scroll;
                    display: flex;
                    flex-direction: column;
                }
            
                #${this.mount.id} table.spanner-table {
                    table-layout: fixed !important;
                    border-collapse: collapse;
                    font-family: 'Google Sans', Roboto, Arial, sans-serif;
                    width: max-content;
                    min-width: 100%;
                    margin-bottom: 0;
                }
                
                .table-error {
                    padding: 2rem;
                    color: #d93025;
                    background: #fce8e6;
                    border-radius: 4px;
                    margin: 1rem;
                    font-family: 'Google Sans', Roboto, Arial, sans-serif;
                }
                
                .table-empty-state {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    padding: 3rem;
                    color: #5f6368;
                }
            
                .spanner-table-wrapper {
                    overflow-x: auto;
                    width: 100%;
                    position: relative;
                    max-width: 100%;
                    display: block;
                    overflow-y: scroll;
                    flex: 1;
                    background-color: #FBFDFF;
                }
            
                .spanner-table th, .spanner-table td {
                    border-bottom: 1px solid #ddd;
                    text-align: left;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    vertical-align: middle;
                    padding: 0 0 0 8px;
                }
            
                .spanner-table th {
                    background-color: #f2f2f2;
                    position: sticky;
                    top: 0;
                    font-weight: 500;
                    color: rgb(112, 112, 112);
                    text-align: left !important;
                    z-index: 9;
                }
            
                div.spanner-table-wrapper table.spanner-table tbody tr {
                    background-color: #fff;
                }
                
                div.spanner-table-wrapper table.spanner-table tr {
                    height: 1.75rem;
                    padding: 0;
                }
            
                div.spanner-table-wrapper table.spanner-table tbody tr:hover {
                    background-color: #f5f5f5;
                }
                
                table.spanner-table thead tr th.expand-column.header, 
                table.spanner-table tbody tr td.expand-column {
                    padding: 0 !important;
                    box-sizing: content-box !important;
                    min-width: 32px !important;
                    max-width: 32px !important;
                    width: 32px !important;
                }
            
                table.spanner-table tbody tr td.expand-column {
                    position: sticky;
                    right: -1px;
                    background: white;
                    text-align: center;
                    z-index: 1;
                    vertical-align: top !important;
                }
            
                table.spanner-table tbody tr td.expand-column::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 100%;
                    border-left: 1px solid #ddd;
                }
            
                .expand-icon {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                
                    cursor: pointer;
                    opacity: 0.7;
                    line-height: 0;
                    height: 1.75rem;
                    
                }
            
                .expand-icon:hover {
                    opacity: 1;
                }
            
                .cell-content {
                    overflow: hidden;
                    text-overflow: ellipsis;
                    text-align: left;
                    line-height: 1.2rem;
                    font-size: .8rem;
                }
            
                .expanded .cell-content {
                    overflow: visible;
                    white-space: pre-wrap;
                    max-height: none;
                    word-break: break-word;
                }
            
                .expanded td {
                    white-space: normal;
                    max-height: none;
                    overflow: visible;
                }
            
                .pagination-controls {
                    display: flex;
                    justify-content: flex-end;
                    align-items: center;
                    padding: 16px;
                    color: rgb(112, 112, 112);
                    font-size: 14px;
                    border-top: 1px solid #ddd;
                }
            
                .rows-per-page {
                    margin-right: 32px;
                }
            
                .rows-per-page select {
                    margin: 0 8px;
                    padding: 4px;
                }
            
                .pagination-range {
                    margin-right: 32px;
                }
            
                .pagination-arrows {
                    display: flex;
                    gap: 8px;
                }
            
                .pagination-arrow {
                    cursor: pointer;
                    padding: 4px;
                    opacity: 0.7;
                    background-color: #fff;
                    border: none;
                }
            
                .pagination-arrow:hover {
                    opacity: 1;
                }
            
                .pagination-arrow[disabled] {
                    opacity: 0.3;
                    cursor: default;
                }
            
                td {
                    position: relative;
                }
            </style>
            <div class="spanner-table-wrapper">
                <div class="table-error hidden"></div>
                <div class="table-empty-state hidden">
                    <p>No data available to display</p>
                </div>
                <table class="spanner-table"></table>
            </div>
        `,0===this.rows.length)return void this.mount.querySelector(".table-empty-state").classList.remove("hidden");let e=this.mount.querySelector(".spanner-table"),n=this.createTableHeader();n instanceof HTMLElement&&e.appendChild(n);let r=this.createTableBody();r instanceof HTMLElement&&e.appendChild(r),this.createPaginationControls()}handleError(e,n="error"){let r=this.mount.querySelector(".table-error"),i=this.mount.querySelector(".spanner-table");r.classList.remove("hidden"),r.textContent=e,i.classList.add("hidden")}createTableHeader(){if(!this.store||!this.store.config)return console.error("Cannot generate table: requires store and config"),null;if(!this.store.config.queryResult||"object"!=typeof this.store.config.queryResult)return console.error("Cannot generate table: query result not found or malformed",this.store.config.queryResult),null;let e=document.createElement("thead"),n=document.createElement("tr");Object.keys(this.store.config.queryResult).forEach(e=>{let r=e;"string"!=typeof e&&(console.warn("Table header error: expecting field to be a string",e),r="column");let i=document.createElement("th");i.textContent=r,n.appendChild(i)});let r=document.createElement("th");return r.className="expand-column header",n.appendChild(r),e.appendChild(n),e}formatCellContent(e,n){let r="",i=!1;if(null==e||""===e)return{content:r,truncated:i};try{if(this.expandedRows.has(n))switch(typeof e){case"string":r=e;break;case"object":r=JSON.stringify(e,null,4)||"{}";break;default:r=String(e)}else{switch(typeof e){case"string":r=e;break;case"object":r=JSON.stringify(e)||"{}";break;default:r=String(e)}(i=r.length>80)&&(r=r.substring(0,77)+"...")}}catch(i){console.warn("Error formatting cell data:",{error:i,cellData:e,rowIndex:n}),r="<Error: check console>"}return{content:r,truncated:i}}createTableBody(){let e=document.createElement("tbody");if(!this.rows instanceof Array)return e;let n=this.currentPage*this.rowsPerPage,r=n+this.rowsPerPage;return this.rows.slice(n,r).forEach((r,i)=>{let o=n+i,s=document.createElement("tr"),a=!1;r.forEach((e,n)=>{let r=document.createElement("td"),i=document.createElement("div");i.className="cell-content";let{content:l,truncated:u}=this.formatCellContent(e,o);i.textContent=l,r.appendChild(i),s.appendChild(r),a=a||u});let l=document.createElement("td");if(l.className="expand-column",a){let e=document.createElement("span");e.innerHTML=this.expandedRows.has(o)?this.svg.down:this.svg.up,e.className="expand-icon",e.onclick=n=>{n.stopPropagation();let i=this.expandedRows.has(o);i?(this.expandedRows.delete(o),e.innerHTML=this.svg.up):(this.expandedRows.add(o),e.innerHTML=this.svg.down),s.classList.toggle("expanded",!i),this.updateRowContent(s,r,o)},l.appendChild(e)}s.appendChild(l),this.expandedRows.has(o)&&s.classList.add("expanded"),e.appendChild(s)}),e}updateRowContent(e,n,r){if(!(e instanceof HTMLElement))return;let i=Array.from(e.children).slice(0,-1);for(let e=0;e<i.length;e++){let o=i[e].querySelector(".cell-content");if(!o)return;o.textContent=this.formatCellContent(n[e],r).content}}createPaginationControls(){let e=document.createElement("div");e.className="pagination-controls";let n=document.createElement("div");n.className="rows-per-page";let r=document.createElement("select");this.pageLengths.forEach(e=>{let n=document.createElement("option");n.value=e,n.textContent=e,n.selected=e===this.rowsPerPage,r.appendChild(n)}),r.addEventListener("change",e=>{this.rowsPerPage=parseInt(e.target.value),this.currentPage=0,this.render()}),n.appendChild(document.createTextNode("Rows per page:")),n.appendChild(r);let i=document.createElement("div");i.className="pagination-range";let o=this.currentPage*this.rowsPerPage+1,s=Math.min((this.currentPage+1)*this.rowsPerPage,this.rows.length);i.textContent=`${o}\u{2013}${s} of ${this.rows.length}`;let a=document.createElement("div");a.className="pagination-arrows";let l=(e,n,r)=>{let i=document.createElement("button");return i.className="pagination-arrow",i.textContent=e,i.onclick=n,r&&i.setAttribute("disabled",""),i};a.appendChild(l("",()=>this.goToPage(0),0===this.currentPage)),a.appendChild(l("",()=>this.goToPage(this.currentPage-1),0===this.currentPage)),a.appendChild(l("",()=>this.goToPage(this.currentPage+1),s>=this.rows.length)),a.appendChild(l("",()=>this.goToPage(Math.floor(this.rows.length/this.rowsPerPage)),s>=this.rows.length)),e.appendChild(n),e.appendChild(i),e.appendChild(a),this.mount.appendChild(e)}goToPage(e){this.currentPage=e,this.render()}};function b(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,s,a,l,u,c,h,d,f,p=e._root,g={data:i},m=e._x0,y=e._y0,v=e._x1,b=e._y1;if(!p)return e._root=g,e;for(;p.length;)if((c=n>=(s=(m+v)/2))?m=s:v=s,(h=r>=(a=(y+b)/2))?y=a:b=a,o=p,!(p=p[d=h<<1|c]))return o[d]=g,e;if(l=+e._x.call(null,p.data),u=+e._y.call(null,p.data),n===l&&r===u)return g.next=p,o?o[d]=g:e._root=g,e;do o=o?o[d]=[,,,,]:e._root=[,,,,],(c=n>=(s=(m+v)/2))?m=s:v=s,(h=r>=(a=(y+b)/2))?y=a:b=a;while((d=h<<1|c)==(f=(u>=a)<<1|l>=s))return o[f]=p,o[d]=g,e}function _(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function x(e){return e[0]}function w(e){return e[1]}function E(e,n,r){var i=new S(null==n?x:n,null==r?w:r,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function S(e,n,r,i,o,s){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function k(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var N=E.prototype=S.prototype;function C(e){return function(){return e}}function T(e){return(e()-.5)*1e-6}function M(e){return e.x+e.vx}function A(e){return e.y+e.vy}function O(){}function L(e){return null==e?O:function(){return this.querySelector(e)}}function z(){return[]}function P(e){return null==e?z:function(){return this.querySelectorAll(e)}}function j(e){return function(){return this.matches(e)}}function D(e){return function(n){return n.matches(e)}}N.copy=function(){var e,n,r=new S(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return r;if(!i.length)return r._root=k(i),r;for(e=[{source:i,target:r._root=[,,,,]}];i=e.pop();)for(var o=0;o<4;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,,,]}):i.target[o]=k(n));return r},N.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e);return b(this.cover(n,r),n,r,e)},N.addAll=function(e){var n,r,i,o,s=e.length,a=Array(s),l=Array(s),u=1/0,c=1/0,h=-1/0,d=-1/0;for(r=0;r<s;++r)!(isNaN(i=+this._x.call(null,n=e[r]))||isNaN(o=+this._y.call(null,n)))&&(a[r]=i,l[r]=o,i<u&&(u=i),i>h&&(h=i),o<c&&(c=o),o>d&&(d=o));if(u>h||c>d)return this;for(this.cover(u,c).cover(h,d),r=0;r<s;++r)b(this,a[r],l[r],e[r]);return this},N.cover=function(e,n){if(isNaN(e*=1)||isNaN(n*=1))return this;var r=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,s=(i=Math.floor(n))+1;else{for(var a,l,u=o-r||1,c=this._root;r>e||e>=o||i>n||n>=s;)switch(l=(n<i)<<1|e<r,(a=[,,,,])[l]=c,c=a,u*=2,l){case 0:o=r+u,s=i+u;break;case 1:r=o-u,s=i+u;break;case 2:o=r+u,i=s-u;break;case 3:r=o-u,i=s-u}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._x1=o,this._y1=s,this},N.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},N.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},N.find=function(e,n,r){var i,o,s,a,l,u,c,h=this._x0,d=this._y0,f=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new _(m,h,d,f,p)),null==r?r=1/0:(h=e-r,d=n-r,f=e+r,p=n+r,r*=r);u=g.pop();)if((m=u.node)&&!((o=u.x0)>f)&&!((s=u.y0)>p)&&!((a=u.x1)<h)&&!((l=u.y1)<d))if(m.length){var y=(o+a)/2,v=(s+l)/2;g.push(new _(m[3],y,v,a,l),new _(m[2],o,v,y,l),new _(m[1],y,s,a,v),new _(m[0],o,s,y,v)),(c=(n>=v)<<1|e>=y)&&(u=g[g.length-1],g[g.length-1]=g[g.length-1-c],g[g.length-1-c]=u)}else{var b=e-this._x.call(null,m.data),x=n-this._y.call(null,m.data),w=b*b+x*x;if(w<r){var E=Math.sqrt(r=w);h=e-E,d=n-E,f=e+E,p=n+E,i=m.data}}return i},N.remove=function(e){if(isNaN(s=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var n,r,i,o,s,a,l,u,c,h,d,f,p=this._root,g=this._x0,m=this._y0,y=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=s>=(l=(g+y)/2))?g=l:y=l,(h=a>=(u=(m+v)/2))?m=u:v=u,n=p,!(p=p[d=h<<1|c]))return this;if(!p.length)break;(n[d+1&3]||n[d+2&3]||n[d+3&3])&&(r=n,f=d)}for(;p.data!==e;)if(i=p,!(p=p.next))return this;return((o=p.next)&&delete p.next,i)?o?i.next=o:delete i.next:n?(o?n[d]=o:delete n[d],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(r?r[f]=p:this._root=p)):this._root=o,this},N.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},N.root=function(){return this._root},N.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},N.visit=function(e){var n,r,i,o,s,a,l=[],u=this._root;for(u&&l.push(new _(u,this._x0,this._y0,this._x1,this._y1));n=l.pop();)if(!e(u=n.node,i=n.x0,o=n.y0,s=n.x1,a=n.y1)&&u.length){var c=(i+s)/2,h=(o+a)/2;(r=u[3])&&l.push(new _(r,c,h,s,a)),(r=u[2])&&l.push(new _(r,i,h,c,a)),(r=u[1])&&l.push(new _(r,c,o,s,h)),(r=u[0])&&l.push(new _(r,i,o,c,h))}return this},N.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new _(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var o=n.node;if(o.length){var s,a=n.x0,l=n.y0,u=n.x1,c=n.y1,h=(a+u)/2,d=(l+c)/2;(s=o[0])&&r.push(new _(s,a,l,h,d)),(s=o[1])&&r.push(new _(s,h,l,u,d)),(s=o[2])&&r.push(new _(s,a,d,h,c)),(s=o[3])&&r.push(new _(s,h,d,u,c))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this},N.x=function(e){return arguments.length?(this._x=e,this):this._x},N.y=function(e){return arguments.length?(this._y=e,this):this._y};var F=Array.prototype.find;function R(){return this.firstElementChild}var q=Array.prototype.filter;function I(){return Array.from(this.children)}function U(e){return Array(e.length)}function H(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}function B(e,n,r,i,o,s){for(var a,l=0,u=n.length,c=s.length;l<c;++l)(a=n[l])?(a.__data__=s[l],i[l]=a):r[l]=new H(e,s[l]);for(;l<u;++l)(a=n[l])&&(o[l]=a)}function $(e,n,r,i,o,s,a){var l,u,c,h=new Map,d=n.length,f=s.length,p=Array(d);for(l=0;l<d;++l)(u=n[l])&&(p[l]=c=a.call(u,u.__data__,l,n)+"",h.has(c)?o[l]=u:h.set(c,u));for(l=0;l<f;++l)c=a.call(e,s[l],l,s)+"",(u=h.get(c))?(i[l]=u,u.__data__=s[l],h.delete(c)):r[l]=new H(e,s[l]);for(l=0;l<d;++l)(u=n[l])&&h.get(p[l])===u&&(o[l]=u)}function G(e){return e.__data__}function V(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}H.prototype={constructor:H,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Z="http://www.w3.org/1999/xhtml",W={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(e){var n=e+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=e.slice(0,r))&&(e=e.slice(r+1)),W.hasOwnProperty(n)?{space:W[n],local:e}:e}function Y(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function J(e,n){return e.style.getPropertyValue(n)||Y(e).getComputedStyle(e,null).getPropertyValue(n)}function Q(e){return e.trim().split(/^|\s+/)}function K(e){return e.classList||new ee(e)}function ee(e){this._node=e,this._names=Q(e.getAttribute("class")||"")}function et(e,n){for(var r=K(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function en(e,n){for(var r=K(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function er(){this.textContent=""}function ei(){this.innerHTML=""}function eo(){this.nextSibling&&this.parentNode.appendChild(this)}function es(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ea(e){var n=X(e);return(n.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Z&&n.documentElement.namespaceURI===Z?n.createElement(e):n.createElementNS(r,e)}})(n)}function el(){return null}function eu(){var e=this.parentNode;e&&e.removeChild(this)}function ec(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function eh(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ed(e){return function(){var n=this.__on;if(n){for(var r,i=0,o=-1,s=n.length;i<s;++i)(r=n[i],e.type&&r.type!==e.type||r.name!==e.name)?n[++o]=r:this.removeEventListener(r.type,r.listener,r.options);++o?n.length=o:delete this.__on}}}function ef(e,n,r){return function(){var i,o=this.__on,s=function(e){n.call(this,e,this.__data__)};if(o){for(var a=0,l=o.length;a<l;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=n;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:n,listener:s,options:r},o?o.push(i):this.__on=[i]}}function ep(e,n,r){var i=Y(e),o=i.CustomEvent;"function"==typeof o?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}ee.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eg=[null];function em(e,n){this._groups=e,this._parents=n}function ey(){return new em([[document.documentElement]],eg)}function ev(e){return"string"==typeof e?new em([[document.querySelector(e)]],[document.documentElement]):new em([[e]],eg)}em.prototype=ey.prototype={constructor:em,select:function(e){"function"!=typeof e&&(e=L(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var s,a,l=n[o],u=l.length,c=i[o]=Array(u),h=0;h<u;++h)(s=l[h])&&(a=e.call(s,s.__data__,h,l))&&("__data__"in s&&(a.__data__=s.__data__),c[h]=a);return new em(i,this._parents)},selectAll:function(e){if("function"==typeof e){var n;n=e,e=function(){var e;return e=n.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=P(e);for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,u=r[a],c=u.length,h=0;h<c;++h)(l=u[h])&&(o.push(e.call(l,l.__data__,h,u)),s.push(l));return new em(o,s)},selectChild:function(e){var n;return this.select(null==e?R:(n="function"==typeof e?e:D(e),function(){return F.call(this.children,n)}))},selectChildren:function(e){var n;return this.selectAll(null==e?I:(n="function"==typeof e?e:D(e),function(){return q.call(this.children,n)}))},filter:function(e){"function"!=typeof e&&(e=j(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var s,a=n[o],l=a.length,u=i[o]=[],c=0;c<l;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&u.push(s);return new em(i,this._parents)},data:function(e,n){if(!arguments.length)return Array.from(this,G);var r=n?$:B,i=this._parents,o=this._groups;"function"!=typeof e&&(b=e,e=function(){return b});for(var s=o.length,a=Array(s),l=Array(s),u=Array(s),c=0;c<s;++c){var h=i[c],d=o[c],f=d.length,p="object"==typeof(v=e.call(h,h&&h.__data__,c,i))&&"length"in v?v:Array.from(v),g=p.length,m=l[c]=Array(g),y=a[c]=Array(g);r(h,d,m,y,u[c]=Array(f),p,n);for(var v,b,_,x,w=0,E=0;w<g;++w)if(_=m[w]){for(w>=E&&(E=w+1);!(x=y[E])&&++E<g;);_._next=x||null}}return(a=new em(a,i))._enter=l,a._exit=u,a},enter:function(){return new em(this._enter||this._groups.map(U),this._parents)},exit:function(){return new em(this._exit||this._groups.map(U),this._parents)},join:function(e,n,r){var i=this.enter(),o=this,s=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=n&&(o=n(o))&&(o=o.selection()),null==r?s.remove():r(s),i&&o?i.merge(o).order():o},merge:function(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,s=i.length,a=Math.min(o,s),l=Array(o),u=0;u<a;++u)for(var c,h=r[u],d=i[u],f=h.length,p=l[u]=Array(f),g=0;g<f;++g)(c=h[g]||d[g])&&(p[g]=c);for(;u<o;++u)l[u]=r[u];return new em(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i,o=e[n],s=o.length-1,a=o[s];--s>=0;)(i=o[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function n(n,r){return n&&r?e(n.__data__,r.__data__):!n-!r}e||(e=V);for(var r=this._groups,i=r.length,o=Array(i),s=0;s<i;++s){for(var a,l=r[s],u=l.length,c=o[s]=Array(u),h=0;h<u;++h)(a=l[h])&&(c[h]=a);c.sort(n)}return new em(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null},size:function(){let e=0;for(let n of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o,s=n[r],a=0,l=s.length;a<l;++a)(o=s[a])&&e.call(o,o.__data__,a,s);return this},attr:function(e,n){var r=X(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof n?r.local?function(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}:function(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}:r.local?function(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}:function(e,n){return function(){this.setAttribute(e,n)}})(r,n))},style:function(e,n,r){return arguments.length>1?this.each((null==n?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof n?function(e,n,r){return function(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}:function(e,n,r){return function(){this.style.setProperty(e,n,r)}})(e,n,null==r?"":r)):J(this.node(),e)},property:function(e,n){return arguments.length>1?this.each((null==n?function(e){return function(){delete this[e]}}:"function"==typeof n?function(e,n){return function(){var r=n.apply(this,arguments);null==r?delete this[e]:this[e]=r}}:function(e,n){return function(){this[e]=n}})(e,n)):this.node()[e]},classed:function(e,n){var r=Q(e+"");if(arguments.length<2){for(var i=K(this.node()),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}return this.each(("function"==typeof n?function(e,n){return function(){(n.apply(this,arguments)?et:en)(this,e)}}:n?function(e){return function(){et(this,e)}}:function(e){return function(){en(this,e)}})(r,n))},text:function(e){return arguments.length?this.each(null==e?er:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ei:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(eo)},lower:function(){return this.each(es)},append:function(e){var n="function"==typeof e?e:ea(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(e,n){var r="function"==typeof e?e:ea(e),i=null==n?el:"function"==typeof n?n:L(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(eu)},clone:function(e){return this.select(e?eh:ec)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,n,r){var i,o,s=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}}),a=s.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var u,c=0,h=l.length;c<h;++c)for(i=0,u=l[c];i<a;++i)if((o=s[i]).type===u.type&&o.name===u.name)return u.value}return}for(i=0,l=n?ef:ed;i<a;++i)this.each(l(s[i],n,r));return this},dispatch:function(e,n){return this.each(("function"==typeof n?function(e,n){return function(){return ep(this,e,n.apply(this,arguments))}}:function(e,n){return function(){return ep(this,e,n)}})(e,n))},[Symbol.iterator]:function*(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&(yield i)}};var eb={value:()=>{}};function e_(){for(var e,n=0,r=arguments.length,i={};n<r;++n){if(!(e=arguments[n]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new ex(i)}function ex(e){this._=e}function ew(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=eb,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:n,value:r}),e}ex.prototype=e_.prototype={constructor:ex,on:function(e,n){var r,i=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:n}}),s=-1,a=o.length;if(arguments.length<2){for(;++s<a;)if((r=(e=o[s]).type)&&(r=function(e,n){for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).name===n)return r.value}(i[r],e.name)))return r;return}if(null!=n&&"function"!=typeof n)throw Error("invalid callback: "+n);for(;++s<a;)if(r=(e=o[s]).type)i[r]=ew(i[r],e.name,n);else if(null==n)for(r in i)i[r]=ew(i[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new ex(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var r,i,o=Array(r),s=0;s<r;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(n,o)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],o=0,s=i.length;o<s;++o)i[o].value.apply(n,r)}};let eE={passive:!1},eS={capture:!0,passive:!1};function ek(e){e.stopImmediatePropagation()}function eN(e){e.preventDefault(),e.stopImmediatePropagation()}function eC(e){var n=e.document.documentElement,r=ev(e).on("dragstart.drag",eN,eS);"onselectstart"in n?r.on("selectstart.drag",eN,eS):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function eT(e,n){var r=e.document.documentElement,i=ev(e).on("dragstart.drag",null);n&&(i.on("click.drag",eN,eS),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function eM(e){return((e=Math.exp(e))+1/e)/2}var eA=function e(n,r,i){function o(e,o){var s,a,l=e[0],u=e[1],c=e[2],h=o[0],d=o[1],f=o[2],p=h-l,g=d-u,m=p*p+g*g;if(m<1e-12)a=Math.log(f/c)/n,s=function(e){return[l+e*p,u+e*g,c*Math.exp(n*e*a)]};else{var y=Math.sqrt(m),v=(f*f-c*c+i*m)/(2*c*r*y),b=(f*f-c*c-i*m)/(2*f*r*y),_=Math.log(Math.sqrt(v*v+1)-v);a=(Math.log(Math.sqrt(b*b+1)-b)-_)/n,s=function(e){var i,o,s=e*a,h=eM(_),d=c/(r*y)*(h*(((i=Math.exp(2*(i=n*s+_)))-1)/(i+1))-((o=Math.exp(o=_))-1/o)/2);return[l+d*p,u+d*g,c*h/eM(n*s+_)]}}return s.duration=1e3*a*n/Math.SQRT2,s}return o.rho=function(n){var r=Math.max(.001,+n),i=r*r;return e(r,i,i*i)},o}(Math.SQRT2,2,4);function eO(e,n){if(e=function(e){let n;for(;n=e.sourceEvent;)e=n;return e}(e),void 0===n&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}var eL,ez,eP=0,ej=0,eD=0,eF=0,eR=0,eq=0,eI="object"==typeof performance&&performance.now?performance:Date,eU="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eH(){return eR||(eU(eB),eR=eI.now()+eq)}function eB(){eR=0}function e$(){this._call=this._time=this._next=null}function eG(e,n,r){var i=new e$;return i.restart(e,n,r),i}function eV(){eR=(eF=eI.now())+eq,eP=ej=0;try{eH(),++eP;for(var e,n=eL;n;)(e=eR-n._time)>=0&&n._call.call(void 0,e),n=n._next;--eP}finally{eP=0,function(){for(var e,n,r=eL,i=1/0;r;)r._call?(i>r._time&&(i=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:eL=n);ez=e,eW(i)}(),eR=0}}function eZ(){var e=eI.now(),n=e-eF;n>1e3&&(eq-=n,eF=e)}function eW(e){!eP&&(ej&&(ej=clearTimeout(ej)),e-eR>24?(e<1/0&&(ej=setTimeout(eV,e-eI.now()-eq)),eD&&(eD=clearInterval(eD))):(eD||(eF=eI.now(),eD=setInterval(eZ,1e3)),eP=1,eU(eV)))}function eX(e,n,r){var i=new e$;return n=null==n?0:+n,i.restart(r=>{i.stop(),e(r+n)},n,r),i}e$.prototype=eG.prototype={constructor:e$,restart:function(e,n,r){if("function"!=typeof e)throw TypeError("callback is not a function");r=(null==r?eH():+r)+(null==n?0:+n),this._next||ez===this||(ez?ez._next=this:eL=this,ez=this),this._call=e,this._time=r,eW()},stop:function(){this._call&&(this._call=null,this._time=1/0,eW())}};var eY=e_("start","end","cancel","interrupt"),eJ=[];function eQ(e,n,r,i,o,s){var a=e.__transition;if(a){if(r in a)return}else e.__transition={};!function(e,n,r){var i,o=e.__transition;function s(u){var c,h,d,f;if(1!==r.state)return l();for(c in o)if((f=o[c]).name===r.name){if(3===f.state)return eX(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(eX(function(){3===r.state&&(r.state=4,r.timer.restart(a,r.delay,r.time),a(u))}),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(c=0,r.state=3,i=Array(d=r.tween.length),h=-1;c<d;++c)(f=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++h]=f);i.length=h+1}}function a(n){for(var o=n<r.duration?r.ease.call(null,n/r.duration):(r.timer.restart(l),r.state=5,1),s=-1,a=i.length;++s<a;)i[s].call(e,o);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){for(var i in r.state=6,r.timer.stop(),delete o[n],o)return;delete e.__transition}o[n]=r,r.timer=eG(function(e){r.state=1,r.timer.restart(s,r.delay,r.time),r.delay<=e&&s(e-r.delay)},0,r.time)}(e,r,{name:n,index:i,group:o,on:eY,tween:eJ,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function eK(e,n){var r=e1(e,n);if(r.state>0)throw Error("too late; already scheduled");return r}function e0(e,n){var r=e1(e,n);if(r.state>3)throw Error("too late; already running");return r}function e1(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw Error("transition not found");return r}function e2(e,n){var r,i,o,s=e.__transition,a=!0;if(s){for(o in n=null==n?null:n+"",s){if((r=s[o]).name!==n){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete s[o]}a&&delete e.__transition}}function e5(e,n){return e*=1,n*=1,function(r){return e*(1-r)+n*r}}var e3=180/Math.PI,e4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e6(e,n,r,i,o,s){var a,l,u;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(u=e*r+n*i)&&(r-=e*u,i-=n*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),e*i<n*r&&(e=-e,n=-n,u=-u,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(n,e)*e3,skewX:Math.atan(u)*e3,scaleX:a,scaleY:l}}function e8(e,n,r,i){function o(e){return e.length?e.pop()+" ":""}return function(s,a){var l,u,c,h,d=[],f=[];return s=e(s),a=e(a),!function(e,i,o,s,a,l){if(e!==o||i!==s){var u=a.push("translate(",null,n,null,r);l.push({i:u-4,x:e5(e,o)},{i:u-2,x:e5(i,s)})}else(o||s)&&a.push("translate("+o+n+s+r)}(s.translateX,s.translateY,a.translateX,a.translateY,d,f),l=s.rotate,u=a.rotate,l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:e5(l,u)})):u&&d.push(o(d)+"rotate("+u+i),c=s.skewX,h=a.skewX,c!==h?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:e5(c,h)}):h&&d.push(o(d)+"skewX("+h+i),!function(e,n,r,i,s,a){if(e!==r||n!==i){var l=s.push(o(s)+"scale(",null,",",null,")");a.push({i:l-4,x:e5(e,r)},{i:l-2,x:e5(n,i)})}else(1!==r||1!==i)&&s.push(o(s)+"scale("+r+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,d,f),s=a=null,function(e){for(var n,r=-1,i=f.length;++r<i;)d[(n=f[r]).i]=n.x(e);return d.join("")}}}var e7=e8(function(e){let n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?e4:e6(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),e9=e8(function(e){return null==e?e4:(ng||(ng=document.createElementNS("http://www.w3.org/2000/svg","g")),ng.setAttribute("transform",e),e=ng.transform.baseVal.consolidate())?e6((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):e4},", ",")",")");function te(e,n,r){var i=e._id;return e.each(function(){var e=e0(this,i);(e.value||(e.value={}))[n]=r.apply(this,arguments)}),function(e){return e1(e,i).value[n]}}var tt=(o("jJmky"),o("jJmky"));function tn(e,n,r,i,o){var s=e*e,a=s*e;return((1-3*e+3*s-a)*n+(4-6*s+3*a)*r+(1+3*e+3*s-3*a)*i+a*o)/6}var tr=e=>()=>e;function ti(e,n){var r=n-e;return r?function(n){return e+n*r}:tr(isNaN(e)?n:e)}var to=function e(n){var r,i=1==(r=+n)?ti:function(e,n){var i,o,s;return n-e?(i=e,o=n,i=Math.pow(i,s=r),o=Math.pow(o,s)-i,s=1/s,function(e){return Math.pow(i+e*o,s)}):tr(isNaN(e)?n:e)};function o(e,n){var r=i((e=(0,tt.rgb)(e)).r,(n=(0,tt.rgb)(n)).r),o=i(e.g,n.g),s=i(e.b,n.b),a=ti(e.opacity,n.opacity);return function(n){return e.r=r(n),e.g=o(n),e.b=s(n),e.opacity=a(n),e+""}}return o.gamma=e,o}(1);function ts(e){return function(n){var r,i,o=n.length,s=Array(o),a=Array(o),l=Array(o);for(r=0;r<o;++r)i=(0,tt.rgb)(n[r]),s[r]=i.r||0,a[r]=i.g||0,l[r]=i.b||0;return s=e(s),a=e(a),l=e(l),i.opacity=1,function(e){return i.r=s(e),i.g=a(e),i.b=l(e),i+""}}}ts(function(e){var n=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),o=e[i],s=e[i+1],a=i>0?e[i-1]:2*o-s,l=i<n-1?e[i+2]:2*s-o;return tn((r-i/n)*n,a,o,s,l)}}),ts(function(e){var n=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*n),o=e[(i+n-1)%n],s=e[i%n],a=e[(i+1)%n],l=e[(i+2)%n];return tn((r-i/n)*n,o,s,a,l)}});var ta=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tl=RegExp(ta.source,"g");function tu(e,n){var r;return("number"==typeof n?e5:n instanceof(0,tt.default)?to:(r=(0,tt.default)(n))?(n=r,to):function(e,n){var r,i,o,s,a,l=ta.lastIndex=tl.lastIndex=0,u=-1,c=[],h=[];for(e+="",n+="";(o=ta.exec(e))&&(s=tl.exec(n));)(a=s.index)>l&&(a=n.slice(l,a),c[u]?c[u]+=a:c[++u]=a),(o=o[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,h.push({i:u,x:e5(o,s)})),l=tl.lastIndex;return l<n.length&&(a=n.slice(l),c[u]?c[u]+=a:c[++u]=a),c.length<2?h[0]?(r=h[0].x,function(e){return r(e)+""}):(i=n,function(){return i}):(n=h.length,function(e){for(var r,i=0;i<n;++i)c[(r=h[i]).i]=r.x(e);return c.join("")})})(e,n)}var tc=ey.prototype.constructor;function th(e){return function(){this.style.removeProperty(e)}}var td=0;function tf(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}var tp=ey.prototype;tf.prototype=(function(e){return ey().transition(e)}).prototype={constructor:tf,select:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=L(e));for(var i=this._groups,o=i.length,s=Array(o),a=0;a<o;++a)for(var l,u,c=i[a],h=c.length,d=s[a]=Array(h),f=0;f<h;++f)(l=c[f])&&(u=e.call(l,l.__data__,f,c))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,eQ(d[f],n,r,f,d,e1(l,r)));return new tf(s,this._parents,n,r)},selectAll:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=P(e));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var u,c=i[l],h=c.length,d=0;d<h;++d)if(u=c[d]){for(var f,p=e.call(u,u.__data__,d,c),g=e1(u,r),m=0,y=p.length;m<y;++m)(f=p[m])&&eQ(f,n,r,m,p,g);s.push(p),a.push(u)}return new tf(s,a,n,r)},selectChild:tp.selectChild,selectChildren:tp.selectChildren,filter:function(e){"function"!=typeof e&&(e=j(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var s,a=n[o],l=a.length,u=i[o]=[],c=0;c<l;++c)(s=a[c])&&e.call(s,s.__data__,c,a)&&u.push(s);return new tf(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=Array(i),l=0;l<s;++l)for(var u,c=n[l],h=r[l],d=c.length,f=a[l]=Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)a[l]=n[l];return new tf(a,this._parents,this._name,this._id)},selection:function(){return new tc(this._groups,this._parents)},transition:function(){for(var e=this._name,n=this._id,r=++td,i=this._groups,o=i.length,s=0;s<o;++s)for(var a,l=i[s],u=l.length,c=0;c<u;++c)if(a=l[c]){var h=e1(a,n);eQ(a,e,r,c,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new tf(i,this._parents,e,r)},call:tp.call,nodes:tp.nodes,node:tp.node,size:tp.size,empty:tp.empty,each:tp.each,on:function(e,n){var r,i,o,s,a,l,u=this._id;return arguments.length<2?e1(this.node(),u).on.on(e):this.each((r=u,i=e,o=n,l=(i+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})?eK:e0,function(){var e=l(this,r),n=e.on;n!==s&&(a=(s=n).copy()).on(i,o),e.on=a}))},attr:function(e,n){var r=X(e),i="transform"===r?e9:tu;return this.attrTween(e,"function"==typeof n?(r.local?function(e,n,r){var i,o,s;return function(){var a,l,u=r(this);return null==u?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===i&&l===o?s:(o=l,s=n(i=a,u))}}:function(e,n,r){var i,o,s;return function(){var a,l,u=r(this);return null==u?void this.removeAttribute(e):(a=this.getAttribute(e))===(l=u+"")?null:a===i&&l===o?s:(o=l,s=n(i=a,u))}})(r,i,te(this,"attr."+e,n)):null==n?(r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(r):(r.local?function(e,n,r){var i,o,s=r+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===i?o:o=n(i=a,r)}}:function(e,n,r){var i,o,s=r+"";return function(){var a=this.getAttribute(e);return a===s?null:a===i?o:o=n(i=a,r)}})(r,i,n))},attrTween:function(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw Error();var i=X(e);return this.tween(r,(i.local?function(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttributeNS(e.space,e.local,o.call(this,n))}),r}return o._value=n,o}:function(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttribute(e,o.call(this,n))}),r}return o._value=n,o})(i,n))},style:function(e,n,r){var i,o,s,a,l,u,c,h,d,f,p,g,m,y,v,b,_,x,w,E,S,k="transform"==(e+="")?e7:tu;return null==n?this.styleTween(e,(i=e,function(){var e=J(this,i),n=(this.style.removeProperty(i),J(this,i));return e===n?null:e===o&&n===s?a:a=k(o=e,s=n)})).on("end.style."+e,th(e)):"function"==typeof n?this.styleTween(e,(l=e,u=te(this,"style."+e,n),function(){var e=J(this,l),n=u(this),r=n+"";return null==n&&(this.style.removeProperty(l),r=n=J(this,l)),e===r?null:e===c&&r===h?d:(h=r,d=k(c=e,n))})).each((f=this._id,_="end."+(b="style."+(p=e)),function(){var e=e0(this,f),n=e.on,r=null==e.value[b]?v||(v=th(p)):void 0;(n!==g||y!==r)&&(m=(g=n).copy()).on(_,y=r),e.on=m})):this.styleTween(e,(x=e,S=n+"",function(){var e=J(this,x);return e===S?null:e===w?E:E=k(w=e,n)}),r).on("end.style."+e,null)},styleTween:function(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw Error();return this.tween(i,function(e,n,r){var i,o;function s(){var s=n.apply(this,arguments);return s!==o&&(i=(o=s)&&function(n){this.style.setProperty(e,s.call(this,n),r)}),i}return s._value=n,s}(e,n,null==r?"":r))},text:function(e){var n,r;return this.tween("text","function"==typeof e?(n=te(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(r=null==e?"":e+"",function(){this.textContent=r}))},textTween:function(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();return this.tween(n,function(e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e){this.textContent=i.call(this,e)}),n}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}))},tween:function(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i,o=e1(this.node(),r).tween,s=0,a=o.length;s<a;++s)if((i=o[s]).name===e)return i.value;return null}return this.each((null==n?function(e,n){var r,i;return function(){var o=e0(this,e),s=o.tween;if(s!==r){i=r=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===n){(i=i.slice()).splice(a,1);break}}o.tween=i}}:function(e,n,r){var i,o;if("function"!=typeof r)throw Error();return function(){var s=e0(this,e),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:n,value:r},u=0,c=o.length;u<c;++u)if(o[u].name===n){o[u]=l;break}u===c&&o.push(l)}s.tween=o}})(r,e,n))},delay:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?function(e,n){return function(){eK(this,e).delay=+n.apply(this,arguments)}}:function(e,n){return n*=1,function(){eK(this,e).delay=n}})(n,e)):e1(this.node(),n).delay},duration:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?function(e,n){return function(){e0(this,e).duration=+n.apply(this,arguments)}}:function(e,n){return n*=1,function(){e0(this,e).duration=n}})(n,e)):e1(this.node(),n).duration},ease:function(e){var n=this._id;return arguments.length?this.each(function(e,n){if("function"!=typeof n)throw Error();return function(){e0(this,e).ease=n}}(n,e)):e1(this.node(),n).ease},easeVarying:function(e){var n;if("function"!=typeof e)throw Error();return this.each((n=this._id,function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw Error();e0(this,n).ease=r}))},end:function(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(s,a){var l={value:a},u={value:function(){0==--o&&s()}};r.each(function(){var r=e0(this,i),o=r.on;o!==e&&((n=(e=o).copy())._.cancel.push(l),n._.interrupt.push(l),n._.end.push(u)),r.on=n}),0===o&&s()})},[Symbol.iterator]:tp[Symbol.iterator]};var tg={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};ey.prototype.interrupt=function(e){return this.each(function(){e2(this,e)})},ey.prototype.transition=function(e){var n,r;e instanceof tf?(n=e._id,e=e._name):(n=++td,(r=tg).time=eH(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a,l=i[s],u=l.length,c=0;c<u;++c)(a=l[c])&&eQ(a,e,n,c,l,r||function(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw Error(`transition ${n} not found`);return r}(a,n));return new tf(i,this._parents,e,n)};var tm=e=>()=>e;function ty(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function tv(e,n,r){this.k=e,this.x=n,this.y=r}tv.prototype={constructor:tv,scale:function(e){return 1===e?this:new tv(this.k*e,this.x,this.y)},translate:function(e,n){return 0===e&0===n?this:new tv(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tb=new tv(1,0,0);function t_(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tb;return e.__zoom}function tx(e){e.stopImmediatePropagation()}function tw(e){e.preventDefault(),e.stopImmediatePropagation()}function tE(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tk(){return this.__zoom||tb}function tN(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tC(){return navigator.maxTouchPoints||"ontouchstart"in this}function tT(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],s=e.invertY(n[0][1])-r[0][1],a=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}t_.prototype=tv.prototype;var tM=e=>()=>e;function tA(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:u,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function tO(e){return!e.ctrlKey&&!e.button}function tL(){return this.parentNode}function tz(e,n){return null==n?{x:e.x,y:e.y}:n}function tP(){return navigator.maxTouchPoints||"ontouchstart"in this}function tj(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}function tD(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r>o||void 0===r&&o>=o)&&(r=o)}return r}tA.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var tF=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)},tR="object"==typeof n&&n&&n.Object===Object&&n,tq="object"==typeof self&&self&&self.Object===Object&&self,tI=tR||tq||Function("return this")(),tU=function(){return tI.Date.now()},tH=/\s/,tB=function(e){for(var n=e.length;n--&&tH.test(e.charAt(n)););return n},t$=/^\s+/,tG=tI.Symbol,tV=Object.prototype,tZ=tV.hasOwnProperty,tW=tV.toString,tX=tG?tG.toStringTag:void 0,tY=function(e){var n=tZ.call(e,tX),r=e[tX];try{e[tX]=void 0;var i=!0}catch(e){}var o=tW.call(e);return i&&(n?e[tX]=r:delete e[tX]),o},tJ=Object.prototype.toString,tQ=tG?tG.toStringTag:void 0,tK=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":tQ&&tQ in Object(e)?tY(e):tJ.call(e)},t0=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==tK(e)},t1=0/0,t2=/^[-+]0x[0-9a-f]+$/i,t5=/^0b[01]+$/i,t3=/^0o[0-7]+$/i,t4=parseInt,t6=function(e){if("number"==typeof e)return e;if(t0(e))return t1;if(tF(e)){var n,r="function"==typeof e.valueOf?e.valueOf():e;e=tF(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,tB(n)+1).replace(t$,""):n;var i=t5.test(e);return i||t3.test(e)?t4(e.slice(2),i?2:8):t2.test(e)?t1:+e},t8=Math.max,t7=Math.min,t9=function(e,n,r){var i,o,s,a,l,u,c=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(n){var r=i,s=o;return i=o=void 0,c=n,a=e.apply(s,r)}function g(e){var r=e-u,i=e-c;return void 0===u||r>=n||r<0||d&&i>=s}function m(){var e,r,i,o=tU();if(g(o))return y(o);l=setTimeout(m,(e=o-u,r=o-c,i=n-e,d?t7(i,s-r):i))}function y(e){return(l=void 0,f&&i)?p(e):(i=o=void 0,a)}function v(){var e,r=tU(),s=g(r);if(i=arguments,o=this,u=r,s){if(void 0===l)return c=e=u,l=setTimeout(m,n),h?p(e):a;if(d)return clearTimeout(l),l=setTimeout(m,n),p(u)}return void 0===l&&(l=setTimeout(m,n)),a}return n=t6(n)||0,tF(r)&&(h=!!r.leading,s=(d="maxWait"in r)?t8(t6(r.maxWait)||0,n):s,f="trailing"in r?!!r.trailing:f),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=u=o=l=void 0},v.flush=function(){return void 0===l?a:y(tU())},v},ne=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw TypeError("Expected a function");return tF(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),t9(e,n,{leading:i,maxWait:n,trailing:o})},nt=o("2KTvv");function nn(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var nr=(Object.defineProperty(nd=function e(n,r){var i=r.default,o=r.triggerUpdate,s=r.onChange;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.name=n,this.defaultVal=void 0===i?null:i,this.triggerUpdate=void 0===o||o,this.onChange=void 0===s?function(e,n){}:s},"prototype",{writable:!1}),nd);function ni(e){var n=e.stateInit,r=void 0===n?function(){return{}}:n,i=e.props,o=void 0===i?{}:i,s=e.methods,a=void 0===s?{}:s,l=e.aliases,u=void 0===l?{}:l,c=e.init,h=void 0===c?function(){}:c,d=e.update,f=void 0===d?function(){}:d,p=Object.keys(o).map(function(e){return new nr(e,o[e])});return function e(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=!!(this instanceof e?this.constructor:void 0),l=s?i.shift():void 0,c=i[0],d=void 0===c?{}:c,g=Object.assign({},r instanceof Function?r(d):r,{initialised:!1}),m={};function y(e){return v(e,d),b(),y}var v=function(e,n){h.call(y,e,g,n),g.initialised=!0},b=t9(function(){g.initialised&&(f.call(y,g,m),m={})},1);return p.forEach(function(e){var n,r,i,o,s,a,l,u;y[e.name]=(r=(n=e).name,o=void 0!==(i=n.triggerUpdate)&&i,a=void 0===(s=n.onChange)?function(e,n){}:s,u=void 0===(l=n.defaultVal)?null:l,function(e){var n=g[r];if(!arguments.length)return n;var i=void 0===e?u:e;return g[r]=i,a.call(y,i,g,n),m.hasOwnProperty(r)||(m[r]=n),o&&b(),y})}),Object.keys(a).forEach(function(e){y[e]=function(){for(var n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=a[e]).call.apply(n,[y,g].concat(i))}}),Object.entries(u).forEach(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,s,a,l=[],u=!0,c=!1;try{s=(r=r.call(e)).next,!1;for(;!(u=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return nn(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nn(e,n):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return y[r]=y[i]}),y.resetProps=function(){return p.forEach(function(e){y[e.name](e.defaultVal)}),y},y.resetProps(),g._rerender=b,s&&l&&y(l),y}}var no=function(e){return"function"==typeof e?e:"string"==typeof e?function(n){return n[e]}:function(n){return e}},ns={};function na(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function nl(e,n,r){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:r;throw TypeError("Private element is not present on this object")}function nu(e,n){return e.get(nl(e,n))}function nc(e,n,r){(function(e,n){if(n.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.set(e,r)}function nh(e,n,r){return e.set(nl(e,n),r),r}ns=function(){"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}var n,r,i,o=/^\s+/,s=/\s+$/;function a(n,r){if(r=r||{},(n=n||"")instanceof a)return n;if(!(this instanceof a))return new a(n,r);var i,l,u,c,h,d,f,p,g,m,y,v,b,_,x,w,E,k,T,A,L=(l={r:0,g:0,b:0},u=1,c=null,h=null,d=null,f=!1,p=!1,"string"==typeof(i=n)&&(i=function(e){e=e.replace(o,"").replace(s,"").toLowerCase();var n,r=!1;if(S[e])e=S[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=z.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=z.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=z.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=z.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=z.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=z.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=z.hex8.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),a:M(n[4])/255,format:r?"name":"hex8"}:(n=z.hex6.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),format:r?"name":"hex"}:(n=z.hex4.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),a:M(n[4]+""+n[4])/255,format:r?"name":"hex8"}:!!(n=z.hex3.exec(e))&&{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),format:r?"name":"hex"}}(i)),"object"==e(i)&&(P(i.r)&&P(i.g)&&P(i.b)?(g=i.r,m=i.g,y=i.b,l={r:255*C(g,255),g:255*C(m,255),b:255*C(y,255)},f=!0,p="%"===String(i.r).substr(-1)?"prgb":"rgb"):P(i.h)&&P(i.s)&&P(i.v)?(c=O(i.s),h=O(i.v),v=i.h,b=c,_=h,v=6*C(v,360),b=C(b,100),_=C(_,100),x=Math.floor(v),w=v-x,E=_*(1-b),k=_*(1-w*b),T=_*(1-(1-w)*b),l={r:255*[_,k,E,E,T,_][A=x%6],g:255*[T,_,_,k,E,E][A],b:255*[E,E,T,_,_,k][A]},f=!0,p="hsv"):P(i.h)&&P(i.s)&&P(i.l)&&(c=O(i.s),d=O(i.l),l=function(e,n,r){var i,o,s;function a(e,n,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(n-e)*6*r:r<.5?n:r<2/3?e+(n-e)*(2/3-r)*6:e}if(e=C(e,360),n=C(n,100),r=C(r,100),0===n)i=o=s=r;else{var l=r<.5?r*(1+n):r+n-r*n,u=2*r-l;i=a(u,l,e+1/3),o=a(u,l,e),s=a(u,l,e-1/3)}return{r:255*i,g:255*o,b:255*s}}(i.h,c,d),f=!0,p="hsl"),i.hasOwnProperty("a")&&(u=i.a)),u=N(u),{ok:f,format:i.format||p,r:Math.min(255,Math.max(l.r,0)),g:Math.min(255,Math.max(l.g,0)),b:Math.min(255,Math.max(l.b,0)),a:u});this._originalInput=n,this._r=L.r,this._g=L.g,this._b=L.b,this._a=L.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||L.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=L.ok}function l(e,n,r){e=C(e,255);var i,o,s=Math.max(e,n=C(n,255),r=C(r,255)),a=Math.min(e,n,r),l=(s+a)/2;if(s==a)i=o=0;else{var u=s-a;switch(o=l>.5?u/(2-s-a):u/(s+a),s){case e:i=(n-r)/u+6*(n<r);break;case n:i=(r-e)/u+2;break;case r:i=(e-n)/u+4}i/=6}return{h:i,s:o,l:l}}function u(e,n,r){e=C(e,255);var i,o=Math.max(e,n=C(n,255),r=C(r,255)),s=Math.min(e,n,r),a=o-s;if(o==s)i=0;else{switch(o){case e:i=(n-r)/a+6*(n<r);break;case n:i=(r-e)/a+2;break;case r:i=(e-n)/a+4}i/=6}return{h:i,s:0===o?0:a/o,v:o}}function c(e,n,r,i){var o=[A(Math.round(e).toString(16)),A(Math.round(n).toString(16)),A(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(e,n,r,i){return[A(L(i)),A(Math.round(e).toString(16)),A(Math.round(n).toString(16)),A(Math.round(r).toString(16))].join("")}function d(e,n){n=0===n?0:n||10;var r=a(e).toHsl();return r.s-=n/100,r.s=T(r.s),a(r)}function f(e,n){n=0===n?0:n||10;var r=a(e).toHsl();return r.s+=n/100,r.s=T(r.s),a(r)}function p(e){return a(e).desaturate(100)}function g(e,n){n=0===n?0:n||10;var r=a(e).toHsl();return r.l+=n/100,r.l=T(r.l),a(r)}function m(e,n){n=0===n?0:n||10;var r=a(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-(n/100*255)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-(n/100*255)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-(n/100*255)))),a(r)}function y(e,n){n=0===n?0:n||10;var r=a(e).toHsl();return r.l-=n/100,r.l=T(r.l),a(r)}function v(e,n){var r=a(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,a(r)}function b(e){var n=a(e).toHsl();return n.h=(n.h+180)%360,a(n)}function _(e,n){if(isNaN(n)||n<=0)throw Error("Argument to polyad must be a positive number");for(var r=a(e).toHsl(),i=[a(e)],o=360/n,s=1;s<n;s++)i.push(a({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function x(e){var n=a(e).toHsl(),r=n.h;return[a(e),a({h:(r+72)%360,s:n.s,l:n.l}),a({h:(r+216)%360,s:n.s,l:n.l})]}function w(e,n,r){n=n||6,r=r||30;var i=a(e).toHsl(),o=360/r,s=[a(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,s.push(a(i));return s}function E(e,n){n=n||6;for(var r=a(e).toHsv(),i=r.h,o=r.s,s=r.v,l=[],u=1/n;n--;)l.push(a({h:i,s:o,v:s})),s=(s+u)%1;return l}a.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i=this.toRgb();return e=i.r/255,n=i.g/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*((r=i.b/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=N(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=u(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var n,r,i,o,s,a;return n=this._r,r=this._g,i=this._b,o=this._a,s=e,a=[A(Math.round(n).toString(16)),A(Math.round(r).toString(16)),A(Math.round(i).toString(16)),A(L(o))],s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*C(this._r,255))+"%",g:Math.round(100*C(this._g,255))+"%",b:Math.round(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%)":"rgba("+Math.round(100*C(this._r,255))+"%, "+Math.round(100*C(this._g,255))+"%, "+Math.round(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var n="#"+h(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=a(e);r="#"+h(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0;return!n&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(_,[3])},tetrad:function(){return this._applyCombination(_,[4])}},a.fromRatio=function(n,r){if("object"==e(n)){var i={};for(var o in n)n.hasOwnProperty(o)&&("a"===o?i[o]=n[o]:i[o]=O(n[o]));n=i}return a(n,r)},a.equals=function(e,n){return!!e&&!!n&&a(e).toRgbString()==a(n).toRgbString()},a.random=function(){return a.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},a.mix=function(e,n,r){r=0===r?0:r||50;var i=a(e).toRgb(),o=a(n).toRgb(),s=r/100;return a({r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a})},a.readability=function(e,n){var r=a(e),i=a(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},a.isReadable=function(e,n,r){var i,o,s,l,u,c=a.readability(e,n);switch(u=!1,(o=((i=(i=r)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),s=(i.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==s&&"large"!==s&&(s="small"),l={level:o,size:s}).level+l.size){case"AAsmall":case"AAAlarge":u=c>=4.5;break;case"AAlarge":u=c>=3;break;case"AAAsmall":u=c>=7}return u},a.mostReadable=function(e,n,r){var i,o,s,l,u=null,c=0;o=(r=r||{}).includeFallbackColors,s=r.level,l=r.size;for(var h=0;h<n.length;h++)(i=a.readability(e,n[h]))>c&&(c=i,u=a(n[h]));return a.isReadable(e,u,{level:s,size:l})||!o?u:(r.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],r))};var S=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=a.hexNames=function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}(S);function N(e){return(isNaN(e=parseFloat(e))||e<0||e>1)&&(e=1),e}function C(e,n){"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var r,i,o="string"==typeof(i=e)&&-1!=i.indexOf("%");return(e=Math.min(n,Math.max(0,parseFloat(e))),o&&(e=parseInt(e*n,10)/100),1e-6>Math.abs(e-n))?1:e%n/parseFloat(n)}function T(e){return Math.min(1,Math.max(0,e))}function M(e){return parseInt(e,16)}function A(e){return 1==e.length?"0"+e:""+e}function O(e){return e<=1&&(e=100*e+"%"),e}function L(e){return Math.round(255*parseFloat(e)).toString(16)}var z=(r="[\\s|\\(]+("+(n="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",{CSS_UNIT:new RegExp(n),rgb:RegExp("rgb"+r),rgba:RegExp("rgba"+i),hsl:RegExp("hsl"+r),hsla:RegExp("hsla"+i),hsv:RegExp("hsv"+r),hsva:RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function P(e){return!!z.CSS_UNIT.exec(e)}return a}();var nd,nf,np,ng,nm,ny,nv,nb,n_,nx,nw,nE,nS,nk,nN,nC=function(e,n,r){return(e<<16)+(n<<8)+r},nT=function(e){var n,r=((n=ns)&&n.__esModule?n.default:n)(e).toRgb();return nC(r.r,r.g,r.b)},nM=function(e,n){return 123*e%Math.pow(2,n)},nA=new WeakMap,nO=new WeakMap,nL=(nf=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");nc(this,nA,void 0),nc(this,nO,void 0),nh(nO,this,n),this.reset()},np=[{key:"reset",value:function(){nh(nA,this,["__reserved for background__"])}},{key:"register",value:function(e){if(nu(nA,this).length>=Math.pow(2,24-nu(nO,this)))return null;var n,r=nu(nA,this).length,i=nM(r,nu(nO,this)),o=(n=r+(i<<24-nu(nO,this)),"#".concat(Math.min(n,0x1000000).toString(16).padStart(6,"0")));return nu(nA,this).push(e),o}},{key:"lookup",value:function(e){if(!e)return null;var n="string"==typeof e?nT(e):nC.apply(void 0,function(e){if(Array.isArray(e))return na(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return na(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?na(e,n):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(!n)return null;var r=n&Math.pow(2,24-nu(nO,this))-1,i=n>>24-nu(nO,this)&Math.pow(2,nu(nO,this))-1;return nM(r,nu(nO,this))!==i||r>=nu(nA,this).length?null:nu(nA,this)[r]}}],function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}(i.key),i)}}(nf.prototype,np),Object.defineProperty(nf,"prototype",{writable:!1}),nf),nz={},nP=[],nj=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,nD=Array.isArray;function nF(e,n){for(var r in n)e[r]=n[r];return e}function nR(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function nq(e,n,r,i,o){var s={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++nv:o,__i:-1,__u:0};return null==o&&null!=ny.vnode&&ny.vnode(s),s}function nI(e){return e.children}function nU(e,n){this.props=e,this.context=n}function nH(e,n){if(null==n)return e.__?nH(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if(null!=(r=e.__k[n])&&null!=r.__e)return r.__e;return"function"==typeof e.type?nH(e):null}function nB(e){(!e.__d&&(e.__d=!0)&&nb.push(e)&&!n$.__r++||n_!=ny.debounceRendering)&&((n_=ny.debounceRendering)||nx)(n$)}function n$(){for(var e,n,r,i,o,s,a=1;nb.length;)nb.length>a&&nb.sort(nw),e=nb.shift(),a=nb.length,e.__d&&(n=void 0,i=(r=e.__v).__e,o=[],s=[],e.__P&&((n=nF({},r)).__v=r.__v+1,ny.vnode&&ny.vnode(n),nX(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,null==i?nH(r):i,!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,nJ(o,n,s),n.__e!=i&&function e(n){var r,i;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,r=0;r<n.__k.length;r++)if(null!=(i=n.__k[r])&&null!=i.__e){n.__e=n.__c.base=i.__e;break}return e(n)}}(n)));n$.__r=0}function nG(e,n,r,i,o,s,a,l,u,c,h){var d,f,p,g,m,y,v=i&&i.__k||nP,b=n.length;for(u=function(e,n,r,i,o){var s,a,l,u,c,h=r.length,d=h,f=0;for(e.__k=Array(o),s=0;s<o;s++)null!=(a=n[s])&&"boolean"!=typeof a&&"function"!=typeof a?(u=s+f,(a=e.__k[s]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?nq(null,a,null,null,null):nD(a)?nq(nI,{children:a},null,null,null):null==a.constructor&&a.__b>0?nq(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,l=null,-1!=(c=a.__i=function(e,n,r,i){var o,s,a,l=e.key,u=e.type,c=n[r],h=null!=c&&0==(2&c.__u);if(null===c&&null==e.key||h&&l==c.key&&u==c.type)return r;if(i>+!!h){for(o=r-1,s=r+1;o>=0||s<n.length;)if(null!=(c=n[a=o>=0?o--:s++])&&0==(2&c.__u)&&l==c.key&&u==c.type)return a}return -1}(a,r,u,d))&&(d--,(l=r[c])&&(l.__u|=2)),null==l||null==l.__v?(-1==c&&(o>h?f--:o<h&&f++),"function"!=typeof a.type&&(a.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,a.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<h;s++)null!=(l=r[s])&&0==(2&l.__u)&&(l.__e==i&&(i=nH(l)),function e(n,r,i){var o,s;if(ny.unmount&&ny.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||nQ(o,null,r)),null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){ny.__e(e,r)}o.base=o.__P=null}if(o=n.__k)for(s=0;s<o.length;s++)o[s]&&e(o[s],r,i||"function"!=typeof n.type);i||nR(n.__e),n.__c=n.__=n.__e=void 0}(l,l));return i}(r,n,v,u,b),d=0;d<b;d++)null!=(p=r.__k[d])&&(f=-1==p.__i?nz:v[p.__i]||nz,p.__i=d,y=nX(e,p,f,o,s,a,l,u,c,h),g=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&nQ(f.ref,null,p),h.push(p.ref,p.__c||g,p)),null==m&&null!=g&&(m=g),4&p.__u||f.__k===p.__k?u=function e(n,r,i){var o,s;if("function"==typeof n.type){for(o=n.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=n,r=e(o[s],r,i));return r}n.__e!=r&&(r&&n.type&&!i.contains(r)&&(r=nH(n)),i.insertBefore(n.__e,r||null),r=n.__e);do r=r&&r.nextSibling;while(null!=r&&8==r.nodeType)return r}(p,u,e):"function"==typeof p.type&&void 0!==y?u=y:g&&(u=g.nextSibling),p.__u&=-7);return r.__e=m,u}function nV(e,n,r){"-"==n[0]?e.setProperty(n,null==r?"":r):e[n]=null==r?"":"number"!=typeof r||nj.test(n)?r:r+"px"}function nZ(e,n,r,i,o){var s,a;e:if("style"==n)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||nV(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||nV(e.style,n,r[n])}else if("o"==n[0]&&"n"==n[1])s=n!=(n=n.replace(nE,"$1")),n=(a=n.toLowerCase())in e||"onFocusOut"==n||"onFocusIn"==n?a.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+s]=r,r?i?r.u=i.u:(r.u=nS,e.addEventListener(n,s?nN:nk,s)):e.removeEventListener(n,s?nN:nk,s);else{if("http://www.w3.org/2000/svg"==o)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=n&&"height"!=n&&"href"!=n&&"list"!=n&&"form"!=n&&"tabIndex"!=n&&"download"!=n&&"rowSpan"!=n&&"colSpan"!=n&&"role"!=n&&"popover"!=n&&n in e)try{e[n]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!=n[4]?e.removeAttribute(n):e.setAttribute(n,"popover"==n&&1==r?"":r))}}function nW(e){return function(n){if(this.l){var r=this.l[n.type+e];if(null==n.t)n.t=nS++;else if(n.t<r.u)return;return r(ny.event?ny.event(n):n)}}}function nX(e,n,r,i,o,s,a,l,u,c){var h,d,f,p,g,m,y,v,b,_,x,w,E,S,k,N,C,T=n.type;if(null!=n.constructor)return null;128&r.__u&&(u=!!(32&r.__u),s=[l=n.__e=r.__e]),(h=ny.__b)&&h(n);e:if("function"==typeof T)try{if(v=n.props,b="prototype"in T&&T.prototype.render,_=(h=T.contextType)&&i[h.__c],x=h?_?_.props.value:h.__:i,r.__c?y=(d=n.__c=r.__c).__=d.__E:(b?n.__c=d=new T(v,x):(n.__c=d=new nU(v,x),d.constructor=T,d.render=nK),_&&_.sub(d),d.props=v,d.state||(d.state={}),d.context=x,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=T.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=nF({},d.__s)),nF(d.__s,T.getDerivedStateFromProps(v,d.__s))),p=d.props,g=d.state,d.__v=n,f)b&&null==T.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==T.getDerivedStateFromProps&&v!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,x)||n.__v==r.__v){for(n.__v!=r.__v&&(d.props=v,d.state=d.__s,d.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(e){e&&(e.__=n)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,x),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,g,m)})}if(d.context=x,d.props=v,d.__P=e,d.__e=!1,E=ny.__r,S=0,b){for(d.state=d.__s,d.__d=!1,E&&E(n),h=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do d.__d=!1,E&&E(n),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++S<25)d.state=d.__s,null!=d.getChildContext&&(i=nF(nF({},i),d.getChildContext())),b&&!f&&null!=d.getSnapshotBeforeUpdate&&(m=d.getSnapshotBeforeUpdate(p,g)),N=h,null!=h&&h.type===nI&&null==h.key&&(N=function e(n){return"object"!=typeof n||null==n||n.__b&&n.__b>0?n:nD(n)?n.map(e):nF({},n)}(h.props.children)),l=nG(e,nD(N)?N:[N],n,r,i,o,s,a,l,u,c),d.base=n.__e,n.__u&=-161,d.__h.length&&a.push(d),y&&(d.__E=d.__=null)}catch(e){if(n.__v=null,u||null!=s)if(e.then){for(n.__u|=u?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,n.__e=l}else{for(C=s.length;C--;)nR(s[C]);nY(n)}else n.__e=r.__e,n.__k=r.__k,e.then||nY(n);ny.__e(e,n,r)}else null==s&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):l=n.__e=function(e,n,r,i,o,s,a,l,u){var c,h,d,f,p,g,m,y=r.props,v=n.props,b=n.type;if("svg"==b?o="http://www.w3.org/2000/svg":"math"==b?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=s){for(c=0;c<s.length;c++)if((p=s[c])&&"setAttribute"in p==!!b&&(b?p.localName==b:3==p.nodeType)){e=p,s[c]=null;break}}if(null==e){if(null==b)return document.createTextNode(v);e=document.createElementNS(o,b,v.is&&v),l&&(ny.__m&&ny.__m(n,s),l=!1),s=null}if(null==b)y===v||l&&e.data==v||(e.data=v);else{if(s=s&&nm.call(e.childNodes),y=r.props||nz,!l&&null!=s)for(y={},c=0;c<e.attributes.length;c++)y[(p=e.attributes[c]).name]=p.value;for(c in y)if(p=y[c],"children"==c);else if("dangerouslySetInnerHTML"==c)d=p;else if(!(c in v)){if("value"==c&&"defaultValue"in v||"checked"==c&&"defaultChecked"in v)continue;nZ(e,c,null,p,o)}for(c in v)p=v[c],"children"==c?f=p:"dangerouslySetInnerHTML"==c?h=p:"value"==c?g=p:"checked"==c?m=p:l&&"function"!=typeof p||y[c]===p||nZ(e,c,p,y[c],o);if(h)l||d&&(h.__html==d.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(d&&(e.innerHTML=""),nG("template"==n.type?e.content:e,nD(f)?f:[f],n,r,i,"foreignObject"==b?"http://www.w3.org/1999/xhtml":o,s,a,s?s[0]:r.__k&&nH(r,0),l,u),null!=s)for(c=s.length;c--;)nR(s[c]);l||(c="value","progress"==b&&null==g?e.removeAttribute("value"):null==g||g===e[c]&&("progress"!=b||g)&&("option"!=b||g==y[c])||nZ(e,c,g,y[c],o),c="checked",null!=m&&m!=e[c]&&nZ(e,c,m,y[c],o))}return e}(r.__e,n,r,i,o,s,a,u,c);return(h=ny.diffed)&&h(n),128&n.__u?void 0:l}function nY(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(nY)}function nJ(e,n,r){for(var i=0;i<r.length;i++)nQ(r[i],r[++i],r[++i]);ny.__c&&ny.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){ny.__e(e,n.__v)}})}function nQ(e,n,r){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==n||(e.__u=e(n))}else e.current=n}catch(e){ny.__e(e,r)}}function nK(e,n,r){return this.constructor(e,r)}function n0(e,n,r){var i,o,s,a,l=nF({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),n)"key"==s?i=n[s]:"ref"==s?o=n[s]:l[s]=void 0===n[s]&&null!=a?a[s]:n[s];return arguments.length>2&&(l.children=arguments.length>3?nm.call(arguments,2):r),nq(e.type,l,i||e.key,o||e.ref,null)}function n1(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function n2(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function n5(e){return(n5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}nm=nP.slice,ny={__e:function(e,n,r,i){for(var o,s,a;n=n.__;)if((o=n.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(n){e=n}throw e}},nv=0,nU.prototype.setState=function(e,n){var r;r=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=nF({},this.state),"function"==typeof e&&(e=e(nF({},r),this.props)),e&&nF(r,e),null!=e&&this.__v&&(n&&this._sb.push(n),nB(this))},nU.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),nB(this))},nU.prototype.render=nI,nb=[],nx="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nw=function(e,n){return e.__v.__b-n.__v.__b},n$.__r=0,nE=/(PointerCapture)$|Capture$/i,nS=0,nk=nW(!1),nN=nW(!0);var n3=function(e){if("object"!==n5(e))return e;var n,r=n0(e);return r.props&&(r.props=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?n2(Object(r),!0).forEach(function(n){var i,o;i=n,o=r[n],(i=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}({},r.props),null!=r&&null!=(n=r.props)&&n.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(n3):n3(r.props.children))),r},n4=function(e){var n;return null!=(n=n0(e))&&null==n.constructor},n6=function(e,n){var r,i,o,s,a,l;delete n.__k,r=n3(e),(i=n)==document&&(i=document.documentElement),ny.__&&ny.__(r,i),s=o&&o.__k||i.__k,a=[],l=[],nX(i,r=(o||i).__k=function(e,n,r){var i,o,s,a={};for(s in n)"key"==s?i=n[s]:"ref"==s?o=n[s]:a[s]=n[s];if(arguments.length>2&&(a.children=arguments.length>3?nm.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return nq(e,a,i,o,null)}(nI,null,[r]),s||nz,nz,i.namespaceURI,o?[o]:s?null:i.firstChild?nm.call(i.childNodes):null,a,o?o:s?s.__e:i.firstChild,!1,l),nJ(a,r,l)};!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".float-tooltip-kap {\n  position: absolute;\n  width: max-content; /* prevent shrinking near right edge */\n  max-width: max(50%, 150px);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font: 12px sans-serif;\n  color: #eee;\n  background: rgba(0,0,0,0.6);\n  pointer-events: none;\n}\n");var n8=ni({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.style,o=ev(e&&"object"===n5(e)&&e.node&&"function"==typeof e.node?e.node():e);"static"===o.style("position")&&o.style("position","relative"),n.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(void 0===i?{}:i).forEach(function(e){var r=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,s,a,l=[],u=!0,c=!1;try{s=(r=r.call(e)).next,!1;for(;!(u=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return n1(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n1(e,n):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=r[0],o=r[1];return n.tooltipEl.style(i,o)}),n.tooltipEl.style("left","-10000px").style("display","none");var s="tooltip-".concat(Math.round(1e12*Math.random()));n.mouseInside=!1,o.on("mousemove.".concat(s),function(e){n.mouseInside=!0;var r=eO(e),i=o.node(),s=i.offsetWidth,a=i.offsetHeight,l=[null===n.offsetX||void 0===n.offsetX?"-".concat(r[0]/s*100,"%"):"number"==typeof n.offsetX?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,null===n.offsetY||void 0===n.offsetY?a>130&&a-r[1]<100?"calc(-100% - 6px)":"21px":"number"==typeof n.offsetY?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",r[0]+"px").style("top",r[1]+"px").style("transform","translate(".concat(l.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(s),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(s),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):"string"==typeof e.content?e.tooltipEl.html(e.content):n4(e.content)?(e.tooltipEl.text(""),n6(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function n7(e){return function(){return e}}function n9(e){return(e()-.5)*1e-6}function re(e){return e.index}function rt(e,n){var r=e.get(n);if(!r)throw Error("node not found: "+n);return r}function rn(e,n,r){if(isNaN(n))return e;var i,o,s,a,l,u,c=e._root,h={data:r},d=e._x0,f=e._x1;if(!c)return e._root=h,e;for(;c.length;)if((a=n>=(o=(d+f)/2))?d=o:f=o,i=c,!(c=c[l=+a]))return i[l]=h,e;if(n===(s=+e._x.call(null,c.data)))return h.next=c,i?i[l]=h:e._root=h,e;do i=i?i[l]=[,,]:e._root=[,,],(a=n>=(o=(d+f)/2))?d=o:f=o;while((l=+a)==(u=+(s>=o)))return i[u]=c,i[l]=h,e}function rr(e,n,r){this.node=e,this.x0=n,this.x1=r}function ri(e){return e[0]}function ro(e,n){var r=new rs(null==n?ri:n,NaN,NaN);return null==e?r:r.addAll(e)}function rs(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function ra(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var rl=ro.prototype=rs.prototype;function ru(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var s,a,l,u,c,h,d,f,p,g,m,y,v=e._root,b={data:o},_=e._x0,x=e._y0,w=e._z0,E=e._x1,S=e._y1,k=e._z1;if(!v)return e._root=b,e;for(;v.length;)if((f=n>=(a=(_+E)/2))?_=a:E=a,(p=r>=(l=(x+S)/2))?x=l:S=l,(g=i>=(u=(w+k)/2))?w=u:k=u,s=v,!(v=v[m=g<<2|p<<1|f]))return s[m]=b,e;if(c=+e._x.call(null,v.data),h=+e._y.call(null,v.data),d=+e._z.call(null,v.data),n===c&&r===h&&i===d)return b.next=v,s?s[m]=b:e._root=b,e;do s=s?s[m]=Array(8):e._root=Array(8),(f=n>=(a=(_+E)/2))?_=a:E=a,(p=r>=(l=(x+S)/2))?x=l:S=l,(g=i>=(u=(w+k)/2))?w=u:k=u;while((m=g<<2|p<<1|f)==(y=(d>=u)<<2|(h>=l)<<1|c>=a))return s[y]=v,s[m]=b,e}function rc(e,n,r,i,o,s,a){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=s,this.z1=a}rl.copy=function(){var e,n,r=new rs(this._x,this._x0,this._x1),i=this._root;if(!i)return r;if(!i.length)return r._root=ra(i),r;for(e=[{source:i,target:r._root=[,,]}];i=e.pop();)for(var o=0;o<2;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,]}):i.target[o]=ra(n));return r},rl.add=function(e){let n=+this._x.call(null,e);return rn(this.cover(n),n,e)},rl.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),i=1/0,o=-1/0;for(let s=0,a;s<n;++s)!isNaN(a=+this._x.call(null,e[s]))&&(r[s]=a,a<i&&(i=a),a>o&&(o=a));if(i>o)return this;this.cover(i).cover(o);for(let i=0;i<n;++i)rn(this,r[i],e[i]);return this},rl.cover=function(e){if(isNaN(e*=1))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i,o,s=r-n||1,a=this._root;n>e||e>=r;)switch(o=+(e<n),(i=[,,])[o]=a,a=i,s*=2,o){case 0:r=n+s;break;case 1:n=r-s}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._x1=r,this},rl.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},rl.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},rl.find=function(e,n){var r,i,o,s,a,l=this._x0,u=this._x1,c=[],h=this._root;for(h&&c.push(new rr(h,l,u)),null==n?n=1/0:(l=e-n,u=e+n);s=c.pop();)if((h=s.node)&&!((i=s.x0)>u)&&!((o=s.x1)<l))if(h.length){var d=(i+o)/2;c.push(new rr(h[1],d,o),new rr(h[0],i,d)),(a=+(e>=d))&&(s=c[c.length-1],c[c.length-1]=c[c.length-1-a],c[c.length-1-a]=s)}else{var f=Math.abs(e-this._x.call(null,h.data));f<n&&(n=f,l=e-f,u=e+f,r=h.data)}return r},rl.remove=function(e){if(isNaN(s=+this._x.call(null,e)))return this;var n,r,i,o,s,a,l,u,c,h=this._root,d=this._x0,f=this._x1;if(!h)return this;if(h.length)for(;;){if((l=s>=(a=(d+f)/2))?d=a:f=a,n=h,!(h=h[u=+l]))return this;if(!h.length)break;n[u+1&1]&&(r=n,c=u)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return((o=h.next)&&delete h.next,i)?o?i.next=o:delete i.next:n?(o?n[u]=o:delete n[u],(h=n[0]||n[1])&&h===(n[1]||n[0])&&!h.length&&(r?r[c]=h:this._root=h)):this._root=o,this},rl.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},rl.root=function(){return this._root},rl.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},rl.visit=function(e){var n,r,i,o,s=[],a=this._root;for(a&&s.push(new rr(a,this._x0,this._x1));n=s.pop();)if(!e(a=n.node,i=n.x0,o=n.x1)&&a.length){var l=(i+o)/2;(r=a[1])&&s.push(new rr(r,l,o)),(r=a[0])&&s.push(new rr(r,i,l))}return this},rl.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new rr(this._root,this._x0,this._x1));n=r.pop();){var o=n.node;if(o.length){var s,a=n.x0,l=n.x1,u=(a+l)/2;(s=o[0])&&r.push(new rr(s,a,u)),(s=o[1])&&r.push(new rr(s,u,l))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.x1);return this},rl.x=function(e){return arguments.length?(this._x=e,this):this._x};let rh=(e,n,r,i,o,s)=>Math.sqrt((e-i)**2+(n-o)**2+(r-s)**2);function rd(e){return e[0]}function rf(e){return e[1]}function rp(e){return e[2]}function rg(e,n,r,i){var o=new rm(null==n?rd:n,null==r?rf:r,null==i?rp:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?o:o.addAll(e)}function rm(e,n,r,i,o,s,a,l,u){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function ry(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var rv=rg.prototype=rm.prototype;function rb(e){return e.x}function r_(e){return e.y}function rx(e){return e.z}rv.copy=function(){var e,n,r=new rm(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return r;if(!i.length)return r._root=ry(i),r;for(e=[{source:i,target:r._root=Array(8)}];i=e.pop();)for(var o=0;o<8;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=Array(8)}):i.target[o]=ry(n));return r},rv.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return ru(this.cover(n,r,i),n,r,i,e)},rv.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n),s=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,h=-1/0;for(let d=0,f,p,g,m;d<n;++d)!(isNaN(p=+this._x.call(null,f=e[d]))||isNaN(g=+this._y.call(null,f))||isNaN(m=+this._z.call(null,f)))&&(r[d]=p,i[d]=g,o[d]=m,p<s&&(s=p),p>u&&(u=p),g<a&&(a=g),g>c&&(c=g),m<l&&(l=m),m>h&&(h=m));if(s>u||a>c||l>h)return this;this.cover(s,a,l).cover(u,c,h);for(let s=0;s<n;++s)ru(this,r[s],i[s],o[s],e[s]);return this},rv.cover=function(e,n,r){if(isNaN(e*=1)||isNaN(n*=1)||isNaN(r*=1))return this;var i=this._x0,o=this._y0,s=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1,u=(s=Math.floor(r))+1;else{for(var c,h,d=a-i||1,f=this._root;i>e||e>=a||o>n||n>=l||s>r||r>=u;)switch(h=(r<s)<<2|(n<o)<<1|e<i,(c=Array(8))[h]=f,f=c,d*=2,h){case 0:a=i+d,l=o+d,u=s+d;break;case 1:i=a-d,l=o+d,u=s+d;break;case 2:a=i+d,o=l-d,u=s+d;break;case 3:i=a-d,o=l-d,u=s+d;break;case 4:a=i+d,l=o+d,s=u-d;break;case 5:i=a-d,l=o+d,s=u-d;break;case 6:a=i+d,o=l-d,s=u-d;break;case 7:i=a-d,o=l-d,s=u-d}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=u,this},rv.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},rv.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},rv.find=function(e,n,r,i){var o,s,a,l,u,c,h,d,f,p=this._x0,g=this._y0,m=this._z0,y=this._x1,v=this._y1,b=this._z1,_=[],x=this._root;for(x&&_.push(new rc(x,p,g,m,y,v,b)),null==i?i=1/0:(p=e-i,g=n-i,m=r-i,y=e+i,v=n+i,b=r+i,i*=i);d=_.pop();)if((x=d.node)&&!((s=d.x0)>y)&&!((a=d.y0)>v)&&!((l=d.z0)>b)&&!((u=d.x1)<p)&&!((c=d.y1)<g)&&!((h=d.z1)<m))if(x.length){var w=(s+u)/2,E=(a+c)/2,S=(l+h)/2;_.push(new rc(x[7],w,E,S,u,c,h),new rc(x[6],s,E,S,w,c,h),new rc(x[5],w,a,S,u,E,h),new rc(x[4],s,a,S,w,E,h),new rc(x[3],w,E,l,u,c,S),new rc(x[2],s,E,l,w,c,S),new rc(x[1],w,a,l,u,E,S),new rc(x[0],s,a,l,w,E,S)),(f=(r>=S)<<2|(n>=E)<<1|e>=w)&&(d=_[_.length-1],_[_.length-1]=_[_.length-1-f],_[_.length-1-f]=d)}else{var k=e-this._x.call(null,x.data),N=n-this._y.call(null,x.data),C=r-this._z.call(null,x.data),T=k*k+N*N+C*C;if(T<i){var M=Math.sqrt(i=T);p=e-M,g=n-M,m=r-M,y=e+M,v=n+M,b=r+M,o=x.data}}return o},rv.findAllWithinRadius=function(e,n,r,i){let o=[],s=e-i,a=n-i,l=r-i,u=e+i,c=n+i,h=r+i;return this.visit((d,f,p,g,m,y,v)=>{if(!d.length)do{let s=d.data;rh(e,n,r,this._x(s),this._y(s),this._z(s))<=i&&o.push(s)}while(d=d.next)return f>u||p>c||g>h||m<s||y<a||v<l}),o},rv.remove=function(e){if(isNaN(s=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e))||isNaN(l=+this._z.call(null,e)))return this;var n,r,i,o,s,a,l,u,c,h,d,f,p,g,m,y=this._root,v=this._x0,b=this._y0,_=this._z0,x=this._x1,w=this._y1,E=this._z1;if(!y)return this;if(y.length)for(;;){if((d=s>=(u=(v+x)/2))?v=u:x=u,(f=a>=(c=(b+w)/2))?b=c:w=c,(p=l>=(h=(_+E)/2))?_=h:E=h,n=y,!(y=y[g=p<<2|f<<1|d]))return this;if(!y.length)break;(n[g+1&7]||n[g+2&7]||n[g+3&7]||n[g+4&7]||n[g+5&7]||n[g+6&7]||n[g+7&7])&&(r=n,m=g)}for(;y.data!==e;)if(i=y,!(y=y.next))return this;return((o=y.next)&&delete y.next,i)?o?i.next=o:delete i.next:n?(o?n[g]=o:delete n[g],(y=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&y===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!y.length&&(r?r[m]=y:this._root=y)):this._root=o,this},rv.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},rv.root=function(){return this._root},rv.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},rv.visit=function(e){var n,r,i,o,s,a,l,u,c=[],h=this._root;for(h&&c.push(new rc(h,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=c.pop();)if(!e(h=n.node,i=n.x0,o=n.y0,s=n.z0,a=n.x1,l=n.y1,u=n.z1)&&h.length){var d=(i+a)/2,f=(o+l)/2,p=(s+u)/2;(r=h[7])&&c.push(new rc(r,d,f,p,a,l,u)),(r=h[6])&&c.push(new rc(r,i,f,p,d,l,u)),(r=h[5])&&c.push(new rc(r,d,o,p,a,f,u)),(r=h[4])&&c.push(new rc(r,i,o,p,d,f,u)),(r=h[3])&&c.push(new rc(r,d,f,s,a,l,p)),(r=h[2])&&c.push(new rc(r,i,f,s,d,l,p)),(r=h[1])&&c.push(new rc(r,d,o,s,a,f,p)),(r=h[0])&&c.push(new rc(r,i,o,s,d,f,p))}return this},rv.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new rc(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();){var o=n.node;if(o.length){var s,a=n.x0,l=n.y0,u=n.z0,c=n.x1,h=n.y1,d=n.z1,f=(a+c)/2,p=(l+h)/2,g=(u+d)/2;(s=o[0])&&r.push(new rc(s,a,l,u,f,p,g)),(s=o[1])&&r.push(new rc(s,f,l,u,c,p,g)),(s=o[2])&&r.push(new rc(s,a,p,u,f,h,g)),(s=o[3])&&r.push(new rc(s,f,p,u,c,h,g)),(s=o[4])&&r.push(new rc(s,a,l,g,f,p,d)),(s=o[5])&&r.push(new rc(s,f,l,g,c,p,d)),(s=o[6])&&r.push(new rc(s,a,p,g,f,h,d)),(s=o[7])&&r.push(new rc(s,f,p,g,c,h,d))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this},rv.x=function(e){return arguments.length?(this._x=e,this):this._x},rv.y=function(e){return arguments.length?(this._y=e,this):this._y},rv.z=function(e){return arguments.length?(this._z=e,this):this._z};var rw=Math.PI*(3-Math.sqrt(5)),rE=20*Math.PI/(9+Math.sqrt(221));let{abs:rS,cos:rk,sin:rN,acos:rC,atan2:rT,sqrt:rM,pow:rA}=Math;function rO(e){return e<0?-rA(-e,1/3):rA(e,1/3)}let rL=Math.PI,rz=2*rL,rP=rL/2,rj=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,rD=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,rF={x:0,y:0,z:0},rR={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){let r=n(e),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),rM(i)},compute:function(e,n,r){if(0===e)return n[0].t=0,n[0];let i=n.length-1;if(1===e)return n[i].t=1,n[i];let o=1-e,s=n;if(0===i)return n[0].t=e,n[0];if(1===i){let n={x:o*s[0].x+e*s[1].x,y:o*s[0].y+e*s[1].y,t:e};return r&&(n.z=o*s[0].z+e*s[1].z),n}if(i<4){let n=o*o,a=e*e,l,u,c,h=0;2===i?(s=[s[0],s[1],s[2],rF],l=n,u=o*e*2,c=a):3===i&&(l=n*o,u=n*e*3,c=o*a*3,h=e*a);let d={x:l*s[0].x+u*s[1].x+c*s[2].x+h*s[3].x,y:l*s[0].y+u*s[1].y+c*s[2].y+h*s[3].y,t:e};return r&&(d.z=l*s[0].z+u*s[1].z+c*s[2].z+h*s[3].z),d}let a=JSON.parse(JSON.stringify(n));for(;a.length>1;){for(let n=0;n<a.length-1;n++)a[n]={x:a[n].x+(a[n+1].x-a[n].x)*e,y:a[n].y+(a[n+1].y-a[n].y)*e},void 0!==a[n].z&&(a[n].z=a[n].z+(a[n+1].z-a[n].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,n,r,i){let o=1-e,s=r[0],a=r[1],l=r[2],u=r[3],c;return(s*=o,a*=e,2===n.length)?(c=s+a,{x:(s*n[0].x+a*n[1].x)/c,y:(s*n[0].y+a*n[1].y)/c,z:!!i&&(s*n[0].z+a*n[1].z)/c,t:e}):(s*=o,a*=2*o,l*=e*e,3===n.length)?(c=s+a+l,{x:(s*n[0].x+a*n[1].x+l*n[2].x)/c,y:(s*n[0].y+a*n[1].y+l*n[2].y)/c,z:!!i&&(s*n[0].z+a*n[1].z+l*n[2].z)/c,t:e}):(s*=o,a*=1.5*o,l*=3*o,u*=e*e*e,4===n.length)?(c=s+a+l+u,{x:(s*n[0].x+a*n[1].x+l*n[2].x+u*n[3].x)/c,y:(s*n[0].y+a*n[1].y+l*n[2].y+u*n[3].y)/c,z:!!i&&(s*n[0].z+a*n[1].z+l*n[2].z+u*n[3].z)/c,t:e}):void 0},derive:function(e,n){let r=[];for(let i=e,o=i.length,s=o-1;o>1;o--,s--){let e=[];for(let r=0,o;r<s;r++)o={x:s*(i[r+1].x-i[r].x),y:s*(i[r+1].y-i[r].y)},n&&(o.z=s*(i[r+1].z-i[r].z)),e.push(o);r.push(e),i=e}return r},between:function(e,n,r){return n<=e&&e<=r||rR.approximately(e,n)||rR.approximately(e,r)},approximately:function(e,n,r){return rS(e-n)<=(r||1e-6)},length:function(e){let n=rR.Tvalues.length,r=0;for(let i=0,o;i<n;i++)o=.5*rR.Tvalues[i]+.5,r+=rR.Cvalues[i]*rR.arcfn(o,e);return .5*r},map:function(e,n,r,i,o){return i+(e-n)/(r-n)*(o-i)},lerp:function(e,n,r){let i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return void 0!==n.z&&void 0!==r.z&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return void 0!==e.z&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(rR.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,s=r.x-e.x,a=r.y-e.y;return rT(i*a-o*s,i*s+o*a)},round:function(e,n){let r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){let r=e.x-n.x,i=e.y-n.y;return rM(r*r+i*i)},closest:function(e,n){let r=rA(2,63),i,o;return e.forEach(function(e,s){(o=rR.dist(n,e))<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=rA(e,n)+rA(1-e,n);return rS((r-1)/r)},projectionratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=rA(1-e,n),i=rA(e,n)+r;return r/i},lli8:function(e,n,r,i,o,s,a,l){let u=(e-r)*(s-l)-(n-i)*(o-a);return 0!=u&&{x:((e*i-n*r)*(o-a)-(e-r)*(o*l-s*a))/u,y:((e*i-n*r)*(s-l)-(n-i)*(o*l-s*a))/u}},lli4:function(e,n,r,i){let o=e.x,s=e.y,a=n.x,l=n.y,u=r.x,c=r.y,h=i.x,d=i.y;return rR.lli8(o,s,a,l,u,c,h,d)},lli:function(e,n){return rR.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new rW(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=rj,r=rj,i=rD,o=rD;return e.forEach(function(e){let s=e.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!rR.bboxoverlap(n,i))return[];let s=[],a=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(n){n.virtual||l.forEach(function(i){if(i.virtual)return;let a=n.intersects(i,o);a.length>0&&(a.c1=n,a.c2=i,a.s1=e,a.s2=r,s.push(a))})}),s},makeshape:function(e,n,r){let i=n.points.length,o=e.points.length,s=rR.makeline(n.points[i-1],e.points[0]),a=rR.makeline(e.points[o-1],n.points[0]),l={startcap:s,forward:e,back:n,endcap:a,bbox:rR.findbbox([s,e,n,a])};return l.intersections=function(e){return rR.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=rj,o=rD,s,a;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,u=r.length;l<u;l++)s=r[l],(a=e.get(s))[n]<i&&(i=a[n]),a[n]>o&&(o=a[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){let r=n.p1.x,i=n.p1.y,o=-rT(n.p2.y-i,n.p2.x-r);return e.map(function(e){return{x:(e.x-r)*rk(o)-(e.y-i)*rN(o),y:(e.x-r)*rN(o)+(e.y-i)*rk(o)}})},roots:function(e,n){let r,i,o;n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let s=e.length-1,a=rR.align(e,n),l=function(e){return 0<=e&&e<=1};if(2===s){let e=a[0].y,n=a[1].y,r=a[2].y,i=e-2*n+r;if(0!==i){let o=-rM(n*n-e*r),s=-e+n;return[-(o+s)/i,-(-o+s)/i].filter(l)}return n!==r&&0===i?[(2*n-r)/(2*n-2*r)].filter(l):[]}let u=a[0].y,c=a[1].y,h=a[2].y,d=-u+3*c-3*h+a[3].y,f=3*u-6*c+3*h,p=-3*u+3*c,g=u;if(rR.approximately(d,0)){if(rR.approximately(f,0))return rR.approximately(p,0)?[]:[-g/p].filter(l);let e=rM(p*p-4*f*g),n=2*f;return[(e-p)/n,(-p-e)/n].filter(l)}f/=d;let m=(3*(p/=d)-f*f)/3,y=m/3,v=(2*f*f*f-9*f*p+27*(g/=d))/27,b=v/2,_=b*b+y*y*y;if(_<0){let e=-m/3,n=rM(e*e*e),r=-v/(2*n),s=rC(r<-1?-1:r>1?1:r),a=2*rO(n);return i=a*rk(s/3)-f/3,[i,o=a*rk((s+rz)/3)-f/3,a*rk((s+2*rz)/3)-f/3].filter(l)}if(0===_)return[i=2*(r=b<0?rO(-b):-rO(b))-f/3,o=-r-f/3].filter(l);{let e=rM(_);return[(r=rO(-b+e))-rO(b+e)-f/3].filter(l)}},droots:function(e){if(3===e.length){let n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(0!==o){let e=-rM(r*r-n*i),s=-n+r;return[-(e+s)/o,-(-e+s)/o]}return r!==i&&0===o?[(2*r-i)/(2*(r-i))]:[]}if(2===e.length){let n=e[0],r=e[1];if(n!==r)return[n/(n-r)]}return[]},curvature:function(e,n,r,i,o){let s,a,l,u,c=0,h=0,d=rR.compute(e,n),f=rR.compute(e,r),p=d.x*d.x+d.y*d.y;if(i?(s=rM(rA(d.y*f.z-f.y*d.z,2)+rA(d.z*f.x-f.z*d.x,2)+rA(d.x*f.y-f.x*d.y,2)),a=rA(p+d.z*d.z,1.5)):(s=d.x*f.y-d.y*f.x,a=rA(p,1.5)),0===s||0===a)return{k:0,r:0};if(c=s/a,h=a/s,!o){let o=rR.curvature(e-.001,n,r,i,!0).k,s=rR.curvature(e+.001,n,r,i,!0).k;u=(s-c+(c-o))/2,l=(rS(s-c)+rS(c-o))/2}return{k:c,r:h,dk:u,adk:l}},inflections:function(e){if(e.length<4)return[];let n=rR.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,s=18*(-3*r+2*i+3*o-n[3].x*n[2].y),a=18*(3*r-i-3*o),l=18*(o-r);if(rR.approximately(s,0)){if(!rR.approximately(a,0)){let e=-l/a;if(0<=e&&e<=1)return[e]}return[]}let u=2*s;if(rR.approximately(u,0))return[];let c=a*a-4*s*l;if(c<0)return[];let h=Math.sqrt(c);return[(h-a)/u,-(a+h)/u].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,n){let r=["x","y"],i=r.length;for(let o=0,s,a,l,u;o<i;o++)if(a=e[s=r[o]].mid,l=n[s].mid,u=(e[s].size+n[s].size)/2,rS(a-l)>=u)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){let i=e.bbox(),o=n.bbox(),s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(n._t1+n._t2)/2|0)/1e5];let a=e.split(.5),l=n.split(.5),u=[{left:a.left,right:l.left},{left:a.left,right:l.right},{left:a.right,right:l.right},{left:a.right,right:l.left}];u=u.filter(function(e){return rR.bboxoverlap(e.left.bbox(),e.right.bbox())});let c=[];return 0===u.length?c:(u.forEach(function(e){c=c.concat(rR.pairiteration(e.left,e.right,s))}),c=c.filter(function(e,n){return c.indexOf(e)===n}))},getccenter:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,s=r.x-n.x,a=r.y-n.y,l=i*rk(rP)-o*rN(rP),u=i*rN(rP)+o*rk(rP),c=s*rk(rP)-a*rN(rP),h=s*rN(rP)+a*rk(rP),d=(e.x+n.x)/2,f=(e.y+n.y)/2,p=(n.x+r.x)/2,g=(n.y+r.y)/2,m=rR.lli8(d,f,d+l,f+u,p,g,p+c,g+h),y=rR.dist(m,e),v=rT(e.y-m.y,e.x-m.x),b=rT(n.y-m.y,n.x-m.x),_=rT(r.y-m.y,r.x-m.x),x;return v<_?((v>b||b>_)&&(v+=rz),v>_&&(x=_,_=v,v=x)):_<b&&b<v?(x=_,_=v,v=x):_+=rz,m.s=v,m.e=_,m.r=y,m},numberSort:function(e,n){return e-n}};class rq{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return rR.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)rR.expandbox(n,e[r].bbox());return n}offset(e){let n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new rq(n)}}let{abs:rI,min:rU,max:rH,cos:rB,sin:r$,acos:rG,sqrt:rV}=Math,rZ=Math.PI;class rW{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;let e=[];n.forEach(function(n){["x","y","z"].forEach(function(r){void 0!==n[r]&&e.push(n[r])})}),n=e}let i=!1,o=n.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let s=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,a=this.points=[];for(let e=0,r=s?3:2;e<o;e+=r){var l={x:n[e],y:n[e+1]};s&&(l.z=n[e+2]),a.push(l)}let u=this.order=a.length-1,c=this.dims=["x","y"];s&&c.push("z"),this.dimlen=c.length;let h=rR.align(a,{p1:a[0],p2:a[u]}),d=rR.dist(a[0],a[u]);this._linear=h.reduce((e,n)=>e+rI(n.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(void 0===i&&(i=.5),0===i)return new rW(n,n,r);if(1===i)return new rW(e,n,n);let o=rW.getABC(2,e,n,r,i);return new rW(e,o.A,r)}static cubicFromPoints(e,n,r,i,o){void 0===i&&(i=.5);let s=rW.getABC(3,e,n,r,i);void 0===o&&(o=rR.dist(n,s.C));let a=o*(1-i)/i,l=rR.dist(e,r),u=(r.x-e.x)/l,c=(r.y-e.y)/l,h=o*u,d=o*c,f={x:n.x-h,y:n.y-d},p={x:n.x+a*u,y:n.y+a*c},g=s.A,m={x:g.x+(f.x-g.x)/(1-i),y:g.y+(f.y-g.y)/(1-i)},y={x:g.x+(p.x-g.x)/i,y:g.y+(p.y-g.y)/i},v={x:e.x+(m.x-e.x)/i,y:e.y+(m.y-e.y)/i};return new rW(e,v,{x:r.x+(y.x-r.x)/(1-i),y:r.y+(y.y-r.y)/(1-i)},r)}static getUtils(){return rR}getUtils(){return rW.getUtils()}static get PolyBezier(){return rq}valueOf(){return this.toString()}toString(){return rR.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=rR.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,n=rR.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return rR.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,o=.5){let s=rR.projectionratio(o,e),a=1-s,l={x:s*n.x+a*i.x,y:s*n.y+a*i.y},u=rR.abcratio(o,e);return{A:{x:r.x+(r.x-l.x)/u,y:r.y+(r.y-l.y)/u},B:r,C:l,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return rW.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),(r=this.compute(i)).t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;let r=this.getLUT(),i=[];for(let o=0,s;o<r.length;o++)s=r[o],rR.dist(s,e)<n&&(i.push(s),r.length);return!!i.length&&(t/=i.length)}project(e){let n=this.getLUT(),r=n.length-1,i=rR.closest(n,e),o=i.mpos,s=(o-1)/r,a=(o+1)/r,l=.1/r,u=i.mdist,c=s,h=c,d;u+=1;for(let n;c<a+l;c+=l)d=this.compute(c),(n=rR.dist(e,d))<u&&(u=n,h=c);return h=h<0?0:h>1?1:h,(d=this.compute(h)).t=h,d.d=u,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?rR.computeWithRatios(e,this.points,this.ratios,this._3d):rR.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,n=[e[0]],r=e.length;for(let i=1,o,s;i<r;i++)o=e[i],s=e[i-1],n[i]={x:(r-i)/r*o.x+i/r*s.x,y:(r-i)/r*o.y+i/r*s.y};return n[r]=e[r-1],new rW(n)}derivative(e){return rR.compute(e,this.dpoints[0],this._3d)}dderivative(e){return rR.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new rW(rR.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return rR.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return rR.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let n=this.derivative(e),r=rV(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){let n=this.derivative(e),r=this.derivative(e+.01),i=rV(n.x*n.x+n.y*n.y+n.z*n.z),o=rV(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=o,r.y/=o,r.z/=o;let s={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},a=rV(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=a,s.y/=a,s.z/=a;let l=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:e,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z}}hull(e){let n=this.points,r=[],i=[],o=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){r=[];for(let s=0,a,l=n.length-1;s<l;s++)a=rR.lerp(e,n[s],n[s+1]),i[o++]=a,r.push(a);n=r}return i}split(e,n){if(0===e&&n)return this.split(n).left;if(1===n)return this.split(e).right;let r=this.hull(e),i={left:new rW(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new rW(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(i.left._t1=rR.map(0,0,1,this._t1,this._t2),i.left._t2=rR.map(e,0,1,this._t1,this._t2),i.right._t1=rR.map(e,0,1,this._t1,this._t2),i.right._t2=rR.map(1,0,1,this._t1,this._t2),n)?(n=rR.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){let e={},n=[];return this.dims.forEach((function(r){let i=function(e){return e[r]},o=this.dpoints[0].map(i);e[r]=rR.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[r]=e[r].concat(rR.droots(o))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),n=n.concat(e[r].sort(rR.numberSort))}).bind(this)),e.values=n.sort(rR.numberSort).filter(function(e,r){return n.indexOf(e)===r}),e}bbox(){let e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=rR.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){let n=this.bbox(),r=e.bbox();return rR.bboxoverlap(n,r)}offset(e,n){if(void 0!==n){let r=this.get(e),i=this.normal(e),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){let n=this.normal(0);return[new rW(this.points.map(function(r){let i={x:r.x+e*n.x,y:r.y+e*n.y};return r.z&&n.z&&(i.z=r.z+e*n.z),i}))]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(3===this.order){let e=rR.angle(this.points[0],this.points[3],this.points[1]),n=rR.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&n<0||e<0&&n>0)return!1}let e=this.normal(0),n=this.normal(1),r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),rI(rG(r))<rZ/3}reduce(){let e,n=0,r=0,i,o=[],s=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(i=this.split(n,r))._t1=n,i._t2=r,o.push(i),n=r;return o.forEach(function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(i=e.split(n,r)).simple()){if(r-=.01,.01>rI(n-r))return[];(i=e.split(n,r))._t1=rR.map(n,0,1,e._t1,e._t2),i._t2=rR.map(r,0,1,e._t1,e._t2),s.push(i),n=r;break}n<1&&((i=e.split(n,1))._t1=rR.map(n,0,1,e._t1,e._t2),i._t2=e._t2,s.push(i))}),s}translate(e,n,r){r="number"==typeof r?r:n;let i=this.order,o=this.points.map((e,o)=>(1-o/i)*n+o/i*r);return new rW(this.points.map((n,r)=>({x:n.x+e.x*o[r],y:n.y+e.y*o[r]})))}scale(e){let n=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===n)return this.raise().scale(r);let i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let s=r?r(0):e,a=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],u=[],c=rR.lli4(l[0],l[0].c,l[1],l[1].c);if(!c)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=u[e*n]=rR.copy(o[e*n]);r.x+=(e?a:s)*l[e].n.x,r.y+=(e?a:s)*l[e].n.y}),r)?[0,1].forEach(function(s){if(2!==n||!s){var a=o[s+1],l={x:a.x-c.x,y:a.y-c.y},h=r?r((s+1)/n):e;r&&!i&&(h=-h);var d=rV(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,u[s+1]={x:a.x+h*l.x,y:a.y+h*l.y}}}):[0,1].forEach(e=>{if(2===n&&e)return;let r=u[e*n],i=this.derivative(e),s={x:r.x+i.x,y:r.y+i.y};u[e+1]=rR.lli4(r,s,c,o[e+1])}),new rW(u)}outline(e,n,r,i){if(n=void 0===n?e:n,this._linear){let o,s,a,l=this.normal(0),u=this.points[0],c=this.points[this.points.length-1];void 0===r&&(r=e,i=n),o={x:u.x+l.x*e,y:u.y+l.y*e},a={x:c.x+l.x*r,y:c.y+l.y*r},s={x:(o.x+a.x)/2,y:(o.y+a.y)/2};let h=[o,s,a];o={x:u.x-l.x*n,y:u.y-l.y*n},a={x:c.x-l.x*i,y:c.y-l.y*i},s={x:(o.x+a.x)/2,y:(o.y+a.y)/2};let d=[a,s,o],f=rR.makeline(d[2],h[0]),p=rR.makeline(h[2],d[0]);return new rq([f,new rW(h),p,new rW(d)])}let o=this.reduce(),s=o.length,a=[],l=[],u,c=0,h=this.length(),d=void 0!==r&&void 0!==i;function f(e,n,r,i,o){return function(s){let a=n-e;return rR.map(s,0,1,e+i/r*a,e+(i+o)/r*a)}}o.forEach(function(o){let s=o.length();d?(a.push(o.scale(f(e,r,h,c,s))),l.push(o.scale(f(-n,-i,h,c,s)))):(a.push(o.scale(e)),l.push(o.scale(-n))),c+=s}),l=l.map(function(e){return(u=e.points)[3]?e.points=[u[3],u[2],u[1],u[0]]:e.points=[u[2],u[1],u[0]],e}).reverse();let p=a[0].points[0],g=a[s-1].points[a[s-1].points.length-1],m=l[s-1].points[l[s-1].points.length-1],y=l[0].points[0],v=rR.makeline(m,p),b=rR.makeline(g,y);return new rq([v].concat(a).concat([b]).concat(l))}outlineshapes(e,n,r){n=n||e;let i=this.outline(e,n).curves,o=[];for(let e=1,n=i.length;e<n/2;e++){let s=rR.makeshape(i[e],i[n-e],r);s.startcap.virtual=e>1,s.endcap.virtual=e<n/2-1,o.push(s)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof rW&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){let n=rU(e.p1.x,e.p2.x),r=rU(e.p1.y,e.p2.y),i=rH(e.p1.x,e.p2.x),o=rH(e.p1.y,e.p2.y);return rR.roots(this.points,e).filter(e=>{var s=this.get(e);return rR.between(s.x,n,i)&&rR.between(s.y,r,o)})}selfintersects(e){let n=this.reduce(),r=n.length-2,i=[];for(let o=0,s,a;o<r;o++)s=n.slice(o,o+1),a=n.slice(o+2),i.push(...this.curveintersects(s,a,e));return i}curveintersects(e,n,r){let i=[];e.forEach(function(e){n.forEach(function(n){e.overlaps(n)&&i.push({left:e,right:n})})});let o=[];return i.forEach(function(e){let n=rR.pairiteration(e.left,e.right,r);n.length>0&&(o=o.concat(n))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){let o=(i-r)/4,s=this.get(r+o),a=this.get(i-o),l=rR.dist(e,n),u=rR.dist(e,s),c=rR.dist(e,a);return rI(u-l)+rI(c-l)}_iterate(e,n){let r=0,i=1,o;do{o=0,i=1;let s=this.get(r),a,l,u,c,h=!1,d=!1,f,p=i,g=1;do if(d=h,c=u,p=(r+i)/2,a=this.get(p),l=this.get(i),(u=rR.getccenter(s,a,l)).interval={start:r,end:i},h=this._error(u,s,r,i)<=e,(f=d&&!h)||(g=i),h){if(i>=1){if(u.interval.end=g=1,c=u,i>1){let e={x:u.x+u.r*rB(u.e),y:u.y+u.r*r$(u.e)};u.e+=rR.angle({x:u.x,y:u.y},e,this.get(1))}break}i+=(i-r)/2}else i=p;while(!f&&o++<100)if(o>=100)break;c=c||u,n.push(c),r=g}while(i<1)return n}}function rX(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function rY(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function rJ(e,n){if(e){if("string"==typeof e)return rX(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rX(e,n):void 0}}var rQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}}),s=e.reduce(function(e,n){var i=e,s=n;return o.forEach(function(e,n){var a,l=e.keyAccessor;if(e.isProp){var u=s,c=u[l],h=function(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],n.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(u,[l].map(rY));a=c,s=h}else a=l(s,n);n+1<o.length?(i.hasOwnProperty(a)||(i[a]={}),i=i[a]):r?(i.hasOwnProperty(a)||(i[a]=[]),i[a].push(s)):i[a]=s}),e},{});r instanceof Function&&function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i===o.length?Object.keys(n).forEach(function(e){return n[e]=r(n[e])}):Object.values(n).forEach(function(n){return e(n,i+1)})}(s);var a=s;return i&&(a=[],!function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r.length===o.length?a.push({keys:r,vals:n}):Object.entries(n).forEach(function(n){var i=function(e){if(Array.isArray(e))return e}(n)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,s,a,l=[],u=!0,c=!1;try{s=(r=r.call(e)).next,!1;for(;!(u=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,2)||rJ(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0];return e(i[1],[].concat(function(e){if(Array.isArray(e))return rX(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||rJ(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]))})}(s),n instanceof Array&&0===n.length&&1===a.length&&(a[0].keys=[])),a};class rK extends Map{constructor(e,n=r1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(let[n,r]of e)this.set(n,r)}get(e){return super.get(r0(this,e))}has(e){return super.has(r0(this,e))}set(e,n){return super.set(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}(this,e),n)}delete(e){return super.delete(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}(this,e))}}function r0({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):r}function r1(e){return null!==e&&"object"==typeof e?e.valueOf():e}function r2(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}let r5=Symbol("implicit");var r3=function(e){for(var n=e.length/6|0,r=Array(n),i=0;i<n;)r[i]="#"+e.slice(6*i,6*++i);return r}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function r4(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function r6(e,n,r){if(r7())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,n),new(e.bind.apply(e,i))}function r8(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function r7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r7=function(){return!!e})()}function r9(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function ie(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?r9(Object(r),!0).forEach(function(n){r8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function it(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,s,a,l=[],u=!0,c=!1;try{if(s=(r=r.call(e)).next,0===n);else for(;!(u=(i=s.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||io(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e){return function(e){if(Array.isArray(e))return r4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||io(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,n){if(e){if("string"==typeof e)return r4(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r4(e,n):void 0}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var is=function e(){var n=new rK,r=[],i=[],o=r5;function s(e){let s=n.get(e);if(void 0===s){if(o!==r5)return o;n.set(e,s=r.push(e)-1)}return i[s%i.length]}return s.domain=function(e){if(!arguments.length)return r.slice();for(let i of(r=[],n=new rK,e))n.has(i)||n.set(i,r.push(i)-1);return s},s.range=function(e){return arguments.length?(i=Array.from(e),s):i.slice()},s.unknown=function(e){return arguments.length?(o=e,s):o},s.copy=function(){return e(r,i).unknown(o)},r2.apply(s,arguments),s}(r3);function ia(e,n,r){n&&"string"==typeof r&&e.filter(function(e){return!e[r]}).forEach(function(e){e[r]=is(n(e))})}var il=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},iu=function(e,n){if(!n.isShadow){var r=no(n.linkDirectionalParticles);n.graphData.links.forEach(function(e){var n=Math.round(Math.abs(r(e)));n?e.__photons=ir(Array(n)).map(function(){return{}}):delete e.__photons})}},ic=ni({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,iu(e,n)}},dagMode:{onChange:function(e,n){e||(n.graphData.nodes||[]).forEach(function(e){return e.fx=e.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:il},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:il},nodeColor:{default:"color",triggerUpdate:!1,onChange:il},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:il},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:il},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:il},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:il},linkColor:{default:"color",triggerUpdate:!1,onChange:il},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:il},linkWidth:{default:1,triggerUpdate:!1,onChange:il},linkCurvature:{default:0,triggerUpdate:!1,onChange:il},linkCanvasObject:{triggerUpdate:!1,onChange:il},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:il},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:il},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:il},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:il},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:iu},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,r){return void 0===r?e.forceLayout.force(n):(e.forceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){var n,r,i,o,s,a,l,u,c,h,d,f,p,g,m,y,v,b,_,x;return e.isShadow||e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick())),function(){var n=no(e.linkVisibility),r=no(e.linkColor),i=no(e.linkWidth),o=no(e.linkLineDash),s=no(e.linkCurvature),a=no(e.linkCanvasObjectMode),l=e.ctx,u=2*e.isShadow,c=e.graphData.links.filter(n);c.forEach(function(e){var n=s(e);if(!n){e.__controlPoints=null;return}var r=e.source,i=e.target;if(r&&i&&r.hasOwnProperty("x")&&i.hasOwnProperty("x")){var o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));if(o>0){var a=Math.atan2(i.y-r.y,i.x-r.x),l=o*n,u={x:(r.x+i.x)/2+l*Math.cos(a-Math.PI/2),y:(r.y+i.y)/2+l*Math.sin(a-Math.PI/2)};e.__controlPoints=[u.x,u.y]}else{var c=70*n;e.__controlPoints=[i.x,i.y-c,i.x+c,i.y]}}});var h=[],d=[],f=c;if(e.linkCanvasObject){var p=[],g=[];c.forEach(function(e){return(({before:h,after:d,replace:p})[a(e)]||g).push(e)}),f=[].concat(ir(h),d,g),h=h.concat(p)}l.save(),h.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore();var m=rQ(f,[r,i,o]);l.save(),Object.entries(m).forEach(function(n){var r=it(n,2),i=r[0],s=r[1],a=i&&"undefined"!==i?i:"rgba(0,0,0,0.15)";Object.entries(s).forEach(function(n){var r=it(n,2),i=r[0],s=r[1],c=(i||1)/e.globalScale+u;Object.entries(s).forEach(function(e){var n=it(e,2);n[0];var r=n[1],i=o(r[0]);l.beginPath(),r.forEach(function(e){var n=e.source,r=e.target;if(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")){l.moveTo(n.x,n.y);var i=e.__controlPoints;i?l[2===i.length?"quadraticCurveTo":"bezierCurveTo"].apply(l,ir(i).concat([r.x,r.y])):l.lineTo(r.x,r.y)}}),l.strokeStyle=a,l.lineWidth=c,l.setLineDash(i||[]),l.stroke()})})}),l.restore(),l.save(),d.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore()}(),e.isShadow||(n=no(e.linkDirectionalArrowLength),r=no(e.linkDirectionalArrowRelPos),i=no(e.linkVisibility),o=no(e.linkDirectionalArrowColor||e.linkColor),s=no(e.nodeVal),(a=e.ctx).save(),e.graphData.links.filter(i).forEach(function(i){var l=n(i);if(l&&!(l<0)){var u=i.source,c=i.target;if(u&&c&&u.hasOwnProperty("x")&&c.hasOwnProperty("x")){var h=Math.sqrt(Math.max(0,s(u)||1))*e.nodeRelSize,d=Math.sqrt(Math.max(0,s(c)||1))*e.nodeRelSize,f=Math.min(1,Math.max(0,r(i))),p=o(i)||"rgba(0,0,0,0.28)",g=l/1.6/2,m=i.__controlPoints&&r6(rW,[u.x,u.y].concat(ir(i.__controlPoints),[c.x,c.y])),y=m?function(e){return m.get(e)}:function(e){return{x:u.x+(c.x-u.x)*e||0,y:u.y+(c.y-u.y)*e||0}},v=m?m.length():Math.sqrt(Math.pow(c.x-u.x,2)+Math.pow(c.y-u.y,2)),b=h+l+(v-h-d-l)*f,_=y(b/v),x=y((b-l)/v),w=y((b-.8*l)/v),E=Math.atan2(_.y-x.y,_.x-x.x)-Math.PI/2;a.beginPath(),a.moveTo(_.x,_.y),a.lineTo(x.x+g*Math.cos(E),x.y+g*Math.sin(E)),a.lineTo(w.x,w.y),a.lineTo(x.x-g*Math.cos(E),x.y-g*Math.sin(E)),a.fillStyle=p,a.fill()}}}),a.restore()),e.isShadow||(l=no(e.linkDirectionalParticles),u=no(e.linkDirectionalParticleSpeed),c=no(e.linkDirectionalParticleOffset),h=no(e.linkDirectionalParticleWidth),d=no(e.linkVisibility),f=no(e.linkDirectionalParticleColor||e.linkColor),(p=e.ctx).save(),e.graphData.links.filter(d).forEach(function(n){var r=l(n);if(n.hasOwnProperty("__photons")&&n.__photons.length){var i=n.source,o=n.target;if(i&&o&&i.hasOwnProperty("x")&&o.hasOwnProperty("x")){var s=u(n),a=Math.abs(c(n)),d=n.__photons||[],g=Math.max(0,h(n)/2)/Math.sqrt(e.globalScale);p.fillStyle=f(n)||"rgba(0,0,0,0.28)";var m=n.__controlPoints?r6(rW,[i.x,i.y].concat(ir(n.__controlPoints),[o.x,o.y])):null,y=0,v=!1;d.forEach(function(l){var u=!!l.__singleHop;if(l.hasOwnProperty("__progressRatio")||(l.__progressRatio=u?0:(y+a)/r),!u&&y++,l.__progressRatio+=s,l.__progressRatio>=1)if(u){v=!0;return}else l.__progressRatio=l.__progressRatio%1;var c=l.__progressRatio,h=m?m.get(c):{x:i.x+(o.x-i.x)*c||0,y:i.y+(o.y-i.y)*c||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(h.x,h.y,n,p,e.globalScale):(p.beginPath(),p.arc(h.x,h.y,g,0,2*Math.PI,!1),p.fill())}),v&&(n.__photons=n.__photons.filter(function(e){return!e.__singleHop||e.__progressRatio<=1}))}}}),p.restore()),g=no(e.nodeVisibility),m=no(e.nodeVal),y=no(e.nodeColor),v=no(e.nodeCanvasObjectMode),b=e.ctx,_=e.isShadow/e.globalScale,x=e.graphData.nodes.filter(g),b.save(),x.forEach(function(n){var r=v(n);if(e.nodeCanvasObject&&("before"===r||"replace"===r)&&(e.nodeCanvasObject(n,b,e.globalScale),"replace"===r))return void b.restore();var i=Math.sqrt(Math.max(0,m(n)||1))*e.nodeRelSize+_;b.beginPath(),b.arc(n.x,n.y,i,0,2*Math.PI,!1),b.fillStyle=y(n)||"rgba(31, 120, 180, 0.92)",b.fill(),e.nodeCanvasObject&&"after"===r&&e.nodeCanvasObject(n,e.ctx,e.globalScale)}),b.restore(),this},emitParticle:function(e,n){return n&&(n.__photons||(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:(function(e,n){let r;var i,o=Math.min(3,Math.max(1,Math.round(n=n||2))),s=1,a=.001,l=1-Math.pow(.001,1/300),u=0,c=.6,h=new Map,d=eG(g),f=e_("tick","end"),p=(r=1,()=>(r=(1664525*r+0x3c6ef35f)%0x100000000)/0x100000000);function g(){m(),f.call("tick",i),s<a&&(d.stop(),f.call("end",i))}function m(n){var r,a,d=e.length;void 0===n&&(n=1);for(var f=0;f<n;++f)for(s+=(u-s)*l,h.forEach(function(e){e(s)}),r=0;r<d;++r)null==(a=e[r]).fx?a.x+=a.vx*=c:(a.x=a.fx,a.vx=0),o>1&&(null==a.fy?a.y+=a.vy*=c:(a.y=a.fy,a.vy=0)),o>2&&(null==a.fz?a.z+=a.vz*=c:(a.z=a.fz,a.vz=0));return i}function y(){for(var n,r=0,i=e.length;r<i;++r){if((n=e[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),null!=n.fz&&(n.z=n.fz),isNaN(n.x)||o>1&&isNaN(n.y)||o>2&&isNaN(n.z)){var s=10*(o>2?Math.cbrt(.5+r):o>1?Math.sqrt(.5+r):r),a=r*rw,l=r*rE;1===o?n.x=s:2===o?(n.x=s*Math.cos(a),n.y=s*Math.sin(a)):(n.x=s*Math.sin(a)*Math.cos(l),n.y=s*Math.cos(a),n.z=s*Math.sin(a)*Math.sin(l))}(isNaN(n.vx)||o>1&&isNaN(n.vy)||o>2&&isNaN(n.vz))&&(n.vx=0,o>1&&(n.vy=0),o>2&&(n.vz=0))}}function v(n){return n.initialize&&n.initialize(e,p,o),n}return null==e&&(e=[]),y(),i={tick:m,restart:function(){return d.restart(g),i},stop:function(){return d.stop(),i},numDimensions:function(e){return arguments.length?(o=Math.min(3,Math.max(1,Math.round(e))),h.forEach(v),i):o},nodes:function(n){return arguments.length?(e=n,y(),h.forEach(v),i):e},alpha:function(e){return arguments.length?(s=+e,i):s},alphaMin:function(e){return arguments.length?(a=+e,i):a},alphaDecay:function(e){return arguments.length?(l=+e,i):+l},alphaTarget:function(e){return arguments.length?(u=+e,i):u},velocityDecay:function(e){return arguments.length?(c=1-e,i):1-c},randomSource:function(e){return arguments.length?(p=e,h.forEach(v),i):p},force:function(e,n){return arguments.length>1?(null==n?h.delete(e):h.set(e,v(n)),i):h.get(e)},find:function(){var n,r,i,s,a,l,u=Array.prototype.slice.call(arguments),c=u.shift()||0,h=(o>1?u.shift():null)||0,d=(o>2?u.shift():null)||0,f=u.shift()||1/0,p=0,g=e.length;for(f*=f,p=0;p<g;++p)n=c-(a=e[p]).x,(s=n*n+(r=h-(a.y||0))*r+(i=d-(a.z||0))*i)<f&&(l=a,f=s);return l},on:function(e,n){return arguments.length>1?(f.on(e,n),i):f.on(e)}}})().force("link",function(e){var n,r,i,o,s,a,l,u=re,c=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},h=n7(30),d=1;function f(i){for(var s=0,u=e.length;s<d;++s)for(var c,h,f,p,g,m=0,y=0,v=0,b=0;m<u;++m)h=(c=e[m]).source,y=(f=c.target).x+f.vx-h.x-h.vx||n9(l),o>1&&(v=f.y+f.vy-h.y-h.vy||n9(l)),o>2&&(b=f.z+f.vz-h.z-h.vz||n9(l)),p=((p=Math.sqrt(y*y+v*v+b*b))-r[m])/p*i*n[m],y*=p,v*=p,b*=p,f.vx-=y*(g=a[m]),o>1&&(f.vy-=v*g),o>2&&(f.vz-=b*g),h.vx+=y*(g=1-g),o>1&&(h.vy+=v*g),o>2&&(h.vz+=b*g)}function p(){if(i){var o,l,c=i.length,h=e.length,d=new Map(i.map((e,n)=>[u(e,n,i),e]));for(o=0,s=Array(c);o<h;++o)(l=e[o]).index=o,"object"!=typeof l.source&&(l.source=rt(d,l.source)),"object"!=typeof l.target&&(l.target=rt(d,l.target)),s[l.source.index]=(s[l.source.index]||0)+1,s[l.target.index]=(s[l.target.index]||0)+1;for(o=0,a=Array(h);o<h;++o)l=e[o],a[o]=s[l.source.index]/(s[l.source.index]+s[l.target.index]);n=Array(h),g(),r=Array(h),m()}}function g(){if(i)for(var r=0,o=e.length;r<o;++r)n[r]=+c(e[r],r,e)}function m(){if(i)for(var n=0,o=e.length;n<o;++n)r[n]=+h(e[n],n,e)}return null==e&&(e=[]),f.initialize=function(e,...n){i=e,l=n.find(e=>"function"==typeof e)||Math.random,o=n.find(e=>[1,2,3].includes(e))||2,p()},f.links=function(n){return arguments.length?(e=n,p(),f):e},f.id=function(e){return arguments.length?(u=e,f):u},f.iterations=function(e){return arguments.length?(d=+e,f):d},f.strength=function(e){return arguments.length?(c="function"==typeof e?e:n7(+e),g(),f):c},f.distance=function(e){return arguments.length?(h="function"==typeof e?e:n7(+e),m(),f):h},f}()).force("charge",function(){var e,n,r,i,o,s,a=n7(-30),l=1,u=1/0,c=.81;function h(i){var s,a=e.length,l=(1===n?ro(e,rb):2===n?E(e,rb,r_):3===n?rg(e,rb,r_,rx):null).visitAfter(f);for(o=i,s=0;s<a;++s)r=e[s],l.visit(p)}function d(){if(e){var n,r,i=e.length;for(n=0,s=Array(i);n<i;++n)s[(r=e[n]).index]=+a(r,n,e)}}function f(e){var r,i,o,a,l,u,c=0,h=0,d=e.length;if(d){for(o=a=l=u=0;u<d;++u)(r=e[u])&&(i=Math.abs(r.value))&&(c+=r.value,h+=i,o+=i*(r.x||0),a+=i*(r.y||0),l+=i*(r.z||0));c*=Math.sqrt(4/d),e.x=o/h,n>1&&(e.y=a/h),n>2&&(e.z=l/h)}else{(r=e).x=r.data.x,n>1&&(r.y=r.data.y),n>2&&(r.z=r.data.z);do c+=s[r.data.index];while(r=r.next)}e.value=c}function p(e,a,h,d,f){if(!e.value)return!0;var p=[h,d,f][n-1],g=e.x-r.x,m=n>1?e.y-r.y:0,y=n>2?e.z-r.z:0,v=p-a,b=g*g+m*m+y*y;if(v*v/c<b)return b<u&&(0===g&&(b+=(g=n9(i))*g),n>1&&0===m&&(b+=(m=n9(i))*m),n>2&&0===y&&(b+=(y=n9(i))*y),b<l&&(b=Math.sqrt(l*b)),r.vx+=g*e.value*o/b,n>1&&(r.vy+=m*e.value*o/b),n>2&&(r.vz+=y*e.value*o/b)),!0;if(!e.length&&!(b>=u)){(e.data!==r||e.next)&&(0===g&&(b+=(g=n9(i))*g),n>1&&0===m&&(b+=(m=n9(i))*m),n>2&&0===y&&(b+=(y=n9(i))*y),b<l&&(b=Math.sqrt(l*b)));do e.data!==r&&(v=s[e.data.index]*o/b,r.vx+=g*v,n>1&&(r.vy+=m*v),n>2&&(r.vz+=y*v));while(e=e.next)}}return h.initialize=function(r,...o){e=r,i=o.find(e=>"function"==typeof e)||Math.random,n=o.find(e=>[1,2,3].includes(e))||2,d()},h.strength=function(e){return arguments.length?(a="function"==typeof e?e:n7(+e),d(),h):a},h.distanceMin=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h.distanceMax=function(e){return arguments.length?(u=e*e,h):Math.sqrt(u)},h.theta=function(e){return arguments.length?(c=e*e,h):Math.sqrt(c)},h}()).force("center",function(e,n,r){var i,o=1;function s(){var s,a,l=i.length,u=0,c=0,h=0;for(s=0;s<l;++s)u+=(a=i[s]).x||0,c+=a.y||0,h+=a.z||0;for(u=(u/l-e)*o,c=(c/l-n)*o,h=(h/l-r)*o,s=0;s<l;++s)a=i[s],u&&(a.x-=u),c&&(a.y-=c),h&&(a.z-=h)}return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),s.initialize=function(e){i=e},s.x=function(n){return arguments.length?(e=+n,s):e},s.y=function(e){return arguments.length?(n=+e,s):n},s.z=function(e){return arguments.length?(r=+e,s):r},s.strength=function(e){return arguments.length?(o=+e,s):o},s}()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e,n){e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&ia(e.graphData.nodes,no(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&ia(e.graphData.links,no(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(n){n.source=n[e.linkSource],n.target=n[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var r=e.forceLayout.force("link");r&&r.id(function(n){return n[e.nodeId]}).links(e.graphData.links);var i=e.dagMode&&function(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o.nodeFilter,a=void 0===s?function(){return!0}:s,l=o.onLoopError,u=void 0===l?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:l,c={};r.forEach(function(e){return c[n(e)]={data:e,out:[],depth:-1,skip:!a(e)}}),i.forEach(function(e){var r=e.source,i=e.target,o=u(r),s=u(i);if(!c.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!c.hasOwnProperty(s))throw"Missing target node with id: ".concat(s);var a=c[o],l=c[s];function u(e){return"object"===ii(e)?n(e):e}a.out.push(l)});var h=[];return function e(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=0,a=r.length;s<a;s++)if(function(){var a=r[s];if(-1!==i.indexOf(a)){var l=[].concat(ir(i.slice(i.indexOf(a))),[a]).map(function(e){return n(e.data)});return h.some(function(e){return e.length===l.length&&e.every(function(e,n){return e===l[n]})})||(h.push(l),u(l)),1}o>a.depth&&(a.depth=o,e(a.out,[].concat(ir(i),[a]),o+ +!a.skip))}())continue}(Object.values(c)),Object.assign.apply(Object,[{}].concat(ir(Object.entries(c).filter(function(e){return!it(e,2)[1].skip}).map(function(e){var n=it(e,2);return r8({},n[0],n[1].depth)}))))}(e.graphData,function(n){return n[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,ir(Object.values(i||[]))),s=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var a=["lr","rl"].includes(n.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(e){return delete e[a]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var l=["rl","bu"].includes(e.dagMode),u=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(n){return n[u]=(i[n[e.nodeId]]-o/2)*s*(l?-1:1)})}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?(function(e,n,r,i){var o,s,a,l,u=n7(.1);function c(e){for(var u=0,c=o.length;u<c;++u){var h=o[u],d=h.x-n||1e-6,f=(h.y||0)-r||1e-6,p=(h.z||0)-i||1e-6,g=Math.sqrt(d*d+f*f+p*p),m=(l[u]-g)*a[u]*e/g;h.vx+=d*m,s>1&&(h.vy+=f*m),s>2&&(h.vz+=p*m)}}function h(){if(o){var n,r=o.length;for(n=0,a=Array(r),l=Array(r);n<r;++n)l[n]=+e(o[n],n,o),a[n]=isNaN(l[n])?0:+u(o[n],n,o)}}return"function"!=typeof e&&(e=n7(+e)),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),c.initialize=function(e,...n){o=e,s=n.find(e=>[1,2,3].includes(e))||2,h()},c.strength=function(e){return arguments.length?(u="function"==typeof e?e:n7(+e),h(),c):u},c.radius=function(n){return arguments.length?(e="function"==typeof n?n:n7(+n),h(),c):e},c.x=function(e){return arguments.length?(n=+e,c):n},c.y=function(e){return arguments.length?(r=+e,c):r},c.z=function(e){return arguments.length?(i=+e,c):i},c})(function(n){var r=i[n[e.nodeId]]||-1;return("radialin"===e.dagMode?o-r:r)*s}).strength(function(n){return+!!e.dagNodeFilter(n)}):null);for(var c=0;c<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);c++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function ih(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(e){return{default:i[e](),onChange:function(n,i){r.forEach(function(r){return i[r][e](n)})},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=[];return r.forEach(function(r){var i=n[r],s=i[e].apply(i,o);s!==i&&a.push(s)}),a.length?a[0]:this}}}}var id=ih("forceGraph",ic),ip=ih(["forceGraph","shadowGraph"],ic),ig=Object.assign.apply(Object,ir(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return r8({},e,id.linkProp(e))})).concat(ir(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return r8({},e,ip.linkProp(e))})))),im=Object.assign.apply(Object,ir(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return r8({},e,id.linkMethod(e))})));function iy(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;300===n&&150===r&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(o){o.style.width="".concat(e.width,"px"),o.style.height="".concat(e.height,"px"),o.width=e.width*i,o.height=e.height*i,n||r||o.getContext("2d").scale(i,i)});var o=t_(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function iv(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function ib(e,n,r){e.save(),iv(e),e.clearRect(0,0,n,r),e.restore()}var i_=ni({props:ie({width:{default:window.innerWidth,onChange:function(e,n){return iy(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return iy(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[e.nodes,e.links].every(function(e){return(e||[]).every(function(e){return!e.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(function(e){var r=e.type;e.objs.filter(function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var r=n.colorTracker.lookup(e.__indexColor);return!r||!r.hasOwnProperty("d")||r.d!==e}).forEach(function(e){e.__indexColor=n.colorTracker.register({type:r,d:e})})}),n.forceGraph.graphData(e),n.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},ig),aliases:{stopAnimation:"pauseAnimation"},methods:ie({graph2ScreenCoords:function(e,n,r){var i=t_(e.canvas);return{x:n*i.k+i.x,y:r*i.k+i.y}},screen2GraphCoords:function(e,n,r){var i=t_(e.canvas);return{x:(n-i.x)/i.k,y:(r-i.y)/i.k}},centerAt:function(e,n,r,i){if(!e.canvas)return null;if(void 0!==n||void 0!==r){var o=Object.assign({},void 0!==n?{x:n}:{},void 0!==r?{y:r}:{});return i?e.tweenGroup.add(new(0,nt.Tween)(s()).to(o,i).easing(nt.Easing.Quadratic.Out).onUpdate(a).start()):a(o),this}return s();function s(){var n=t_(e.canvas);return{x:(e.width/2-n.x)/n.k,y:(e.height/2-n.y)/n.k}}function a(n){var r=n.x,i=n.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===r?s().x:r,void 0===i?s().y:i),e.needsRedraw=!0}},zoom:function(e,n,r){if(!e.canvas)return null;if(void 0!==n)return r?e.tweenGroup.add(new(0,nt.Tween)({k:i()}).to({k:n},r).easing(nt.Easing.Quadratic.Out).onUpdate(function(e){return o(e.k)}).start()):o(n),this;return i();function i(){return t_(e.canvas).k}function o(n){e.zoom.scaleTo(e.zoom.__baseElem,n),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length,o=Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];var a=this.getGraphBbox.apply(this,o);if(a){var l={x:(a.x[0]+a.x[1])/2,y:(a.y[0]+a.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-2*r)/(a.x[1]-a.x[0]),(e.height-2*r)/(a.y[1]-a.y[0])));this.centerAt(l.x,l.y,n),this.zoom(u,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=no(e.nodeVal),i=e.graphData.nodes.filter(n).map(function(n){return{x:n.x,y:n.y,r:Math.sqrt(Math.max(0,r(n)||1))*e.nodeRelSize}});return i.length?{x:[tD(i,function(e){return e.x-e.r}),tj(i,function(e){return e.x+e.r})],y:[tD(i,function(e){return e.y-e.r}),tj(i,function(e){return e.y+e.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},im),stateInit:function(){return{lastSetZoom:1,zoom:function(){var e,n,r,i=tE,o=tS,s=tT,a=tN,l=tC,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],h=250,d=eA,f=e_("start","zoom","end"),p=0,g=10;function m(e){e.property("__zoom",tk).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(l).on("touchstart.zoom",N).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,n){return(n=Math.max(u[0],Math.min(u[1],n)))===e.k?e:new tv(n,e.x,e.y)}function v(e,n,r){var i=n[0]-r[0]*e.k,o=n[1]-r[1]*e.k;return i===e.x&&o===e.y?e:new tv(e.k,i,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,n,r,i){e.on("start.zoom",function(){x(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(i).end()}).tween("zoom",function(){var e=arguments,s=x(this,e).event(i),a=o.apply(this,e),l=null==r?b(a):"function"==typeof r?r.apply(this,e):r,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=this.__zoom,h="function"==typeof n?n.apply(this,e):n,f=d(c.invert(l).concat(u/c.k),h.invert(l).concat(u/h.k));return function(e){if(1===e)e=h;else{var n=f(e),r=u/n[2];e=new tv(r,l[0]-n[0]*r,l[1]-n[1]*r)}s.zoom(null,e)}})}function x(e,n,r){return!r&&e.__zooming||new w(e,n)}function w(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,n),this.taps=0}function E(e,...n){if(i.apply(this,arguments)){var r=x(this,n).event(e),o=this.__zoom,l=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,a.apply(this,arguments)))),h=eO(e);if(r.wheel)(r.mouse[0][0]!==h[0]||r.mouse[0][1]!==h[1])&&(r.mouse[1]=o.invert(r.mouse[0]=h)),clearTimeout(r.wheel);else{if(o.k===l)return;r.mouse=[h,o.invert(h)],e2(this),r.start()}tw(e),r.wheel=setTimeout(function(){r.wheel=null,r.end()},150),r.zoom("mouse",s(v(y(o,l),r.mouse[0],r.mouse[1]),r.extent,c))}}function S(e,...n){if(!r&&i.apply(this,arguments)){var o=e.currentTarget,a=x(this,n,!0).event(e),l=ev(e.view).on("mousemove.zoom",function(e){if(tw(e),!a.moved){var n=e.clientX-h,r=e.clientY-d;a.moved=n*n+r*r>p}a.event(e).zoom("mouse",s(v(a.that.__zoom,a.mouse[0]=eO(e,o),a.mouse[1]),a.extent,c))},!0).on("mouseup.zoom",function(e){l.on("mousemove.zoom mouseup.zoom",null),eT(e.view,a.moved),tw(e),a.event(e).end()},!0),u=eO(e,o),h=e.clientX,d=e.clientY;eC(e.view),tx(e),a.mouse=[u,this.__zoom.invert(u)],e2(this),a.start()}}function k(e,...n){if(i.apply(this,arguments)){var r=this.__zoom,a=eO(e.changedTouches?e.changedTouches[0]:e,this),l=r.invert(a),u=r.k*(e.shiftKey?.5:2),d=s(v(y(r,u),a,l),o.apply(this,n),c);tw(e),h>0?ev(this).transition().duration(h).call(_,d,a,e):ev(this).call(m.transform,d,a,e)}}function N(r,...o){if(i.apply(this,arguments)){var s,a,l,u,c=r.touches,h=c.length,d=x(this,o,r.changedTouches.length===h).event(r);for(tx(r),a=0;a<h;++a)u=[u=eO(l=c[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,s=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(d.taps<2&&(n=u[0],e=setTimeout(function(){e=null},500)),e2(this),d.start())}}function C(e,...n){if(this.__zooming){var r,i,o,a,l=x(this,n).event(e),u=e.changedTouches,h=u.length;for(tw(e),r=0;r<h;++r)o=eO(i=u[r],this),l.touch0&&l.touch0[2]===i.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===i.identifier&&(l.touch1[0]=o);if(i=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],p=l.touch1[0],g=l.touch1[1],m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m,b=(b=g[0]-f[0])*b+(b=g[1]-f[1])*b;i=y(i,Math.sqrt(m/b)),o=[(d[0]+p[0])/2,(d[1]+p[1])/2],a=[(f[0]+g[0])/2,(f[1]+g[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],a=l.touch0[1]}l.zoom("touch",s(v(i,o,a),l.extent,c))}}function T(e,...i){if(this.__zooming){var o,s,a=x(this,i).event(e),l=e.changedTouches,u=l.length;for(tx(e),r&&clearTimeout(r),r=setTimeout(function(){r=null},500),o=0;o<u;++o)s=l[o],a.touch0&&a.touch0[2]===s.identifier?delete a.touch0:a.touch1&&a.touch1[2]===s.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(s=eO(s,this),Math.hypot(n[0]-s[0],n[1]-s[1])<g)){var c=ev(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,n,r,i){var o=e.selection?e.selection():e;o.property("__zoom",tk),e!==o?_(e,n,r,i):o.interrupt().each(function(){x(this,arguments).event(i).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},m.scaleBy=function(e,n,r,i){m.scaleTo(e,function(){var e=this.__zoom.k,r="function"==typeof n?n.apply(this,arguments):n;return e*r},r,i)},m.scaleTo=function(e,n,r,i){m.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,a=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r,l=i.invert(a),u="function"==typeof n?n.apply(this,arguments):n;return s(v(y(i,u),a,l),e,c)},r,i)},m.translateBy=function(e,n,r,i){m.transform(e,function(){return s(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),o.apply(this,arguments),c)},null,i)},m.translateTo=function(e,n,r,i,a){m.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,l=null==i?b(e):"function"==typeof i?i.apply(this,arguments):i;return s(tb.translate(l[0],l[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),e,c)},i,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,n){return this.mouse&&"mouse"!==e&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var n=ev(this.that).datum();f.call(e,this.that,new ty(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),n)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:tm(+e),m):a},m.filter=function(e){return arguments.length?(i="function"==typeof e?e:tm(!!e),m):i},m.touchable=function(e){return arguments.length?(l="function"==typeof e?e:tm(!!e),m):l},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:tm([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(s=e,m):s},m.duration=function(e){return arguments.length?(h=+e,m):h},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e*=1)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}(),forceGraph:new ic,shadowGraph:new ic().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new nL,tweenGroup:new(0,nt.Group)}},init:function(e,n){var r=this;e.innerHTML="";var i=document.createElement("div");i.classList.add("force-graph-container"),i.style.position="relative",e.appendChild(i),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),i.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var o=n.canvas.getContext("2d"),s=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),a={x:-1e12,y:-1e12},l=function(){var e=null,r=window.devicePixelRatio,i=a.x>0&&a.y>0?s.getImageData(a.x*r,a.y*r,1,1):null;return i&&(e=n.colorTracker.lookup(i.data)),e};ev(n.canvas).call((function(){var e,n,r,i,o=tO,s=tL,a=tz,l=tP,u={},c=e_("start","drag","end"),h=0,d=0;function f(e){e.on("mousedown.drag",p).filter(l).on("touchstart.drag",y).on("touchmove.drag",v,eE).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,l){if(!i&&o.call(this,a,l)){var u=_(this,s.call(this,a,l),a,l,"mouse");u&&(ev(a.view).on("mousemove.drag",g,eS).on("mouseup.drag",m,eS),eC(a.view),ek(a),r=!1,e=a.clientX,n=a.clientY,u("start",a))}}function g(i){if(eN(i),!r){var o=i.clientX-e,s=i.clientY-n;r=o*o+s*s>d}u.mouse("drag",i)}function m(e){ev(e.view).on("mousemove.drag mouseup.drag",null),eT(e.view,r),eN(e),u.mouse("end",e)}function y(e,n){if(o.call(this,e,n)){var r,i,a=e.changedTouches,l=s.call(this,e,n),u=a.length;for(r=0;r<u;++r)(i=_(this,l,e,n,a[r].identifier,a[r]))&&(ek(e),i("start",e,a[r]))}}function v(e){var n,r,i=e.changedTouches,o=i.length;for(n=0;n<o;++n)(r=u[i[n].identifier])&&(eN(e),r("drag",e,i[n]))}function b(e){var n,r,o=e.changedTouches,s=o.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<s;++n)(r=u[o[n].identifier])&&(ek(e),r("end",e,o[n]))}function _(e,n,r,i,o,s){var l,d,p,g=c.copy(),m=eO(s||r,n);if(null!=(p=a.call(e,new tA("beforestart",{sourceEvent:r,target:f,identifier:o,active:h,x:m[0],y:m[1],dx:0,dy:0,dispatch:g}),i)))return l=p.x-m[0]||0,d=p.y-m[1]||0,function r(s,a,c){var y,v=m;switch(s){case"start":u[o]=r,y=h++;break;case"end":delete u[o],--h;case"drag":m=eO(c||a,n),y=h}g.call(s,e,new tA(s,{sourceEvent:a,subject:p,target:f,identifier:o,active:y,x:m[0]+l,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:g}),i)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:tM(!!e),f):o},f.container=function(e){return arguments.length?(s="function"==typeof e?e:tM(e),f):s},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:tM(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:tM(!!e),f):l},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,f):Math.sqrt(d)},f})().subject(function(){if(!n.enableNodeDrag)return null;var e=l();return e&&"Node"===e.type?e.d:null}).on("start",function(e){var r=e.subject;r.__initialDragPos={x:r.x,y:r.y,fx:r.fx,fy:r.fy},e.active||(r.fx=r.x,r.fy=r.y),n.canvas.classList.add("grabbable")}).on("drag",function(e){var r=e.subject,i=r.__initialDragPos,o=t_(n.canvas).k,s={x:i.x+(e.x-i.x)/o-r.x,y:i.y+(e.y-i.y)/o-r.y};["x","y"].forEach(function(n){return r["f".concat(n)]=r[n]=i[n]+(e[n]-i[n])/o}),!r.__dragged&&5>=Math.sqrt(function(e,n){let r=0;for(let n of e)(n*=1)&&(r+=n);return r}(["x","y"].map(function(n){return Math.pow(e[n]-i[n],2)})))||(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,r.__dragged=!0,n.onNodeDrag(r,s))}).on("end",function(e){var r=e.subject,i=r.__initialDragPos,o={x:r.x-i.x,y:r.y-i.y};void 0===i.fx&&(r.fx=void 0),void 0===i.fy&&(r.fy=void 0),delete r.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,r.__dragged&&(delete r.__dragged,n.onNodeDragEnd(r,o))})),n.zoom(n.zoom.__baseElem=ev(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(e){return!e.button&&n.enableZoomPanInteraction&&("wheel"!==e.type||no(n.enableZoomInteraction)(e))&&("wheel"===e.type||no(n.enablePanInteraction)(e))}).on("zoom",function(e){var i=e.transform;[o,s].forEach(function(e){iv(e),e.translate(i.x,i.y),e.scale(i.k,i.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(ie(ie({},i),r.centerAt())),n.needsRedraw=!0}).on("end",function(e){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(ie(ie({},e.transform),r.centerAt()))}),iy(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){t_(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=4/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new n8(i),["pointermove","pointerdown"].forEach(function(e){return i.addEventListener(e,function(r){"pointerdown"===e&&(n.isPointerPressed=!0,n.pointerDownEvent=r),!n.isPointerDragging&&"pointermove"===r.type&&n.onBackgroundClick&&(r.pressure>0||n.isPointerPressed)&&("mouse"===r.pointerType||void 0===r.movementX||[r.movementX,r.movementY].some(function(e){return Math.abs(e)>1}))&&(n.isPointerDragging=!0);var o,s,l,u=(o=i.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,{top:o.top+l,left:o.left+s});a.x=r.pageX-u.left,a.y=r.pageY-u.top},{passive:!0})}),i.addEventListener("pointerup",function(e){if(n.isPointerPressed){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var r=[e,n.pointerDownEvent];requestAnimationFrame(function(){if(0===e.button)if(n.hoverObj){var i=n["on".concat(n.hoverObj.type,"Click")];i&&i.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,r);if(2===e.button)if(n.hoverObj){var o=n["on".concat(n.hoverObj.type,"RightClick")];o&&o.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,r)})}},{passive:!0}),i.addEventListener("contextmenu",function(e){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick||(e.preventDefault(),!1)}),n.forceGraph(o),n.shadowGraph(s);var u=ne(function(){ib(s,n.width,n.height),n.shadowGraph.linkWidth(function(e){return no(n.linkWidth)(e)+n.linkHoverPrecision});var e=t_(n.canvas);n.shadowGraph.globalScale(e.k).tickFrame()},800);n.flushShadowCanvas=u.flush,(this._animationCycle=function e(){var r=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(e){return e.__photons&&e.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var i=n.isPointerDragging?null:l();if(i!==n.hoverObj){var s=n.hoverObj,a=s?s.type:null,c=i?i.type:null;if(a&&a!==c){var h=n["on".concat(a,"Hover")];h&&h(null,s.d)}if(c){var d=n["on".concat(c,"Hover")];d&&d(i.d,a===c?s.d:null)}n.tooltip.content(i&&no(n["".concat(i.type.toLowerCase(),"Label")])(i.d)||null),n.canvas.classList[i&&n["on".concat(c,"Click")]||!i&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=i}r&&u()}if(r){ib(o,n.width,n.height);var f=t_(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(o,f),n.forceGraph.globalScale(f).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(o,f)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}});class ix{store;mount;menuMount;graph;selectedNode=null;selectedEdge=null;selectedEdgeNeighbors=[];focusedEdgeNeighbors=[];selectedNodeEdges=[];selectedNodeNeighbors=[];focusedNode=null;focusedNodeEdges=[];focusedNodeNeighbors=[];requestedRecenter=!1;nodesToUnlockPosition=[];moreOptionsTooltip=null;tools={elements:{container:null,recenter:null,zoomIn:null,zoomOut:null,viewMode:null,toggleFullscreen:null},config:{zoomInSpeed:100,zoomInIncrement:2,zoomOutIncrement:.5,zoomOutSpeed:100,recenterSpeed:200}};static ClusterMethod=Object.freeze({NEIGHBORHOOD:Symbol("Force directed in community"),LABEL:Symbol("Force directed")});static GraphSizes=Object.freeze({SMALL:Symbol("Small"),MEDIUM:Symbol("Medium"),LARGE:Symbol("Large"),UNDEFINED:Symbol("Large")});getNodeRelativeSize(){return this.NODE_REL_SIZE}NODE_REL_SIZE=4;enterFullscreenSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043"><path d="M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z"/></svg>';exitFullscreenSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043"><path d="M240-120v-120H120v-80h200v200h-80Zm400 0v-200h200v80H720v120h-80ZM120-640v-80h120v-120h80v200H120Zm520 0v-200h80v120h120v80H640Z"/></svg>';incomingEdgeSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M320-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-100 0-170-70T80-480q0-100 70-170t170-70q90 0 156.5 57T557-520h323v80H557q-14 86-80.5 143T320-240Zm0-240Z"/></svg>';outgoingEdgeSvg='<svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M640-320q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0 80q-90 0-156.5-57T403-440H80v-80h323q14-86 80.5-143T640-720q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-240Z"/></svg>';loadingSpinner=null;loadingNode=null;successToast=null;successNode=null;showLoadingStateForNode(e){this.loadingNode&&this.hideLoadingStateForNode(this.loadingNode),this.loadingNode=e,this.loadingSpinner||(this.loadingSpinner=document.createElement("div"),this.loadingSpinner.className="node-loading-spinner",this.mount.appendChild(this.loadingSpinner)),this._updateLoadingSpinnerPosition(),this.graph.nodeColor(n=>n.uid===e.uid?this.lightenColor(this.store.getColorForNode(n),.2):this.store.getColorForNode(n))}_updateLoadingSpinnerPosition(){if(!this.loadingSpinner||!this.loadingNode)return;let e=this.graph.graph2ScreenCoords(this.loadingNode.x,this.loadingNode.y);this.loadingSpinner.style.left=`${e.x}px`,this.loadingSpinner.style.top=`${e.y}px`}hideLoadingStateForNode(e){this.loadingSpinner&&(this.loadingSpinner.remove(),this.loadingSpinner=null),this.loadingNode=null,this.graph.nodeColor(e=>this.store.getColorForNode(e))}showErrorStateForNode(e,n){let r=document.createElement("div");r.className="node-error-tooltip",r.textContent=`Failed to load new data: ${n.message}`,this.mount.appendChild(r);let i=this.graph.graph2ScreenCoords(e.x,e.y);r.style.left=`${i.x}px`,r.style.top=`${i.y}px`,setTimeout(()=>r.remove(),5e3)}showSuccessStateForNode(e,n){if(!e||"object"!=typeof n||!Number.isInteger(n.nodesAdded)||!Number.isInteger(n.edgesAdded))return;this.successToast&&(this.successToast.remove(),this.successToast=null,this.successNode=null),this.successToast=document.createElement("div"),this.successToast.className="node-success-toast",this.successNode=e;let r="";r=n.nodesAdded>0&&n.edgesAdded>0?`Added ${n.nodesAdded} node${1!==n.nodesAdded?"s":""} and ${n.edgesAdded} edge${1!==n.edgesAdded?"s":""}`:n.nodesAdded>0?`Added ${n.nodesAdded} node${1!==n.nodesAdded?"s":""}`:n.edgesAdded>0?`Added ${n.edgesAdded} edge${1!==n.edgesAdded?"s":""}`:"No new data found",this.successToast.textContent=r,this.mount.appendChild(this.successToast),this._updateSuccessToastPosition(e),setTimeout(()=>{this.successToast&&(this.successToast.style.opacity="0",setTimeout(()=>{this.successToast&&(this.successToast.remove(),this.successToast=null,this.successNode=null)},300))},2e3)}_updateSuccessToastPosition(e){if(!this.successToast||!e)return;let n=this.graph.graph2ScreenCoords(e.x,e.y);this.successToast.style.left=`${n.x}px`,this.successToast.style.top=`${n.y}px`}constructor(e,n,r){if(!(e instanceof p))throw Error("Store must be an instance of GraphStore");if(!(n instanceof HTMLElement))throw Error("Mount must be an instance of HTMLElement");if(!(r instanceof HTMLElement))throw Error("Menu Mount must be an instance of HTMLElement");this.store=e,this.mount=n,this.menuMount=r,this.mount.style.display="relative",this.initializeEvents(this.store),this.graph=i_()(this.mount),this._setupGraphTools(this.graph),this._setupMoreOptionsTooltip(),this._setupDrawLabelsOnEdges(this.graph),this._setupLineLength(this.graph),this._setupDrawNodes(this.graph),this._setupDrawEdges(this.graph),this.graph.dagMode(""),this.render()}sanitize(e){return null==e?"":String(e).replace(/[&<>"'`=\/]/g,function(e){return({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;","=":"&#61;","/":"&#47;"})[e]})}initializeEvents(e){if(!(e instanceof p))throw Error("Store must be an instance of GraphStore");e.addEventListener(p.EventTypes.VIEW_MODE_CHANGE,(e,n)=>this.onViewModeChange(e,n)),e.addEventListener(p.EventTypes.CONFIG_CHANGE,e=>this.onStoreConfigChange(e)),e.addEventListener(p.EventTypes.FOCUS_OBJECT,(e,n)=>{this.focusedNode=null,this.focusedNodeEdges=[],this.focusedNodeNeighbors=[],this.focusedEdge=null,this.focusedEdgeNeighbors=[],e instanceof c&&this.onFocusedNodeChanged(e),e instanceof h&&this.onFocusedEdgeChanged(e)}),e.addEventListener(p.EventTypes.SELECT_OBJECT,(e,n)=>{this.selectedNode=null,this.selectedEdge=null,this.selectedNodeEdges=[],this.selectedNodeNeighbors=[],this.selectedEdgeNeighbors=[],e instanceof c&&e&&this.onSelectedNodeChanged(e),e instanceof h&&e&&this.onSelectedEdgeChanged(e)}),e.addEventListener(p.EventTypes.LAYOUT_MODE_CHANGE,(e,n)=>this.onLayoutModeChange(e,n)),this.store.addEventListener(p.EventTypes.GRAPH_DATA_UPDATE,(e,n,r)=>{let i={nodes:e.nodes,links:this._computeCurvature(e.edges)};this.graph.graphData(i),this.refreshCache()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.store.setSelectedObject(null)})}onViewModeChange(e,n){if(e===f.ViewModes.TABLE)return void this.graph.pauseAnimation();switch(e){case f.ViewModes.SCHEMA:this.onLayoutModeChange(f.LayoutModes.FORCE);break;case f.ViewModes.DEFAULT:this.onLayoutModeChange(this.store.config.layoutMode)}this.requestedRecenter=!0;let r={nodes:this.store.getNodes().map(e=>(delete e.x,delete e.y,delete e.fx,delete e.fy,delete e.vx,delete e.vy,e)),links:this._computeCurvature(this.store.getEdges())};requestAnimationFrame(()=>{this.graph.resumeAnimation(),this._updateGraphSize(),this.graph.centerAt(0,0),this.graph.graphData(r),this.graph.zoom(4/Math.cbrt(r.nodes.length))})}onLayoutModeChange(e,n,r){let i,o=1,s="",a=Math.max(this.store.getNodes().length,15);switch(e){case f.LayoutModes.FORCE:i=0;break;case f.LayoutModes.TOP_DOWN:s="td",i=50*Math.log10(a),o=12;break;case f.LayoutModes.LEFT_RIGHT:s="lr",i=100*Math.log10(a),o=12;break;case f.LayoutModes.RADIAL_IN:s="radialin",i=100*Math.log10(a),o=8;break;case f.LayoutModes.RADIAL_OUT:s="radialout",i=100*Math.log10(a),o=8}this.graph.dagMode(s),this.graph.dagLevelDistance(i),this.requestedRecenter=!0,this.graph.d3Force("collide",function(e){var n,r,i,o=1,s=1;function a(){for(var e,a,u,c,h,d,f,p=n.length,g=0;g<s;++g)for(e=0,a=E(n,M,A).visitAfter(l);e<p;++e)f=(d=r[(u=n[e]).index])*d,c=u.x+u.vx,h=u.y+u.vy,a.visit(m);function m(e,n,r,s,a){var l=e.data,p=e.r,g=d+p;if(l){if(l.index>u.index){var m=c-l.x-l.vx,y=h-l.y-l.vy,v=m*m+y*y;v<g*g&&(0===m&&(v+=(m=T(i))*m),0===y&&(v+=(y=T(i))*y),v=(g-(v=Math.sqrt(v)))/v*o,u.vx+=(m*=v)*(g=(p*=p)/(f+p)),u.vy+=(y*=v)*g,l.vx-=m*(g=1-g),l.vy-=y*g)}return}return n>c+g||s<c-g||r>h+g||a<h-g}}function l(e){if(e.data)return e.r=r[e.data.index];for(var n=e.r=0;n<4;++n)e[n]&&e[n].r>e.r&&(e.r=e[n].r)}function u(){if(n){var i,o,s=n.length;for(i=0,r=Array(s);i<s;++i)r[(o=n[i]).index]=+e(o,i,n)}}return"function"!=typeof e&&(e=C(null==e?1:+e)),a.initialize=function(e,r){n=e,i=r,u()},a.iterations=function(e){return arguments.length?(s=+e,a):s},a.strength=function(e){return arguments.length?(o=+e,a):o},a.radius=function(n){return arguments.length?(e="function"==typeof n?n:C(+n),u(),a):e},a}(o))}_updateGraphSize(){if(document.fullscreenElement){let e=window.innerHeight-this.menuMount.offsetHeight;this.mount.style.width=window.innerWidth+"px",this.mount.style.height=e+"px",this.graph.width(this.mount.offsetWidth),this.graph.height(e)}else this.mount.style.width="100%",this.mount.style.height="616px",this.graph.width(this.mount.offsetWidth),this.graph.height(this.mount.offsetHeight)}_getRecenterPadding(){return this.store.config.viewMode===f.ViewModes.SCHEMA?64:16}_setupGraphTools(e){let n=`
            <button id="graph-zoom-in" title="Zoom In" fill="#3C4043">
                <svg height="24" viewBox="0 -960 960 960" width="24" fill="#3C4043">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Zm-40-60v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"/>
                </svg>
            </button>
            <button id="graph-zoom-out" title="Zoom Out" fill="#3C4043">
                <svg height="24" viewBox="0 -960 960 960" width="24" fill="#3C4043">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400ZM280-540v-80h200v80H280Z"/>
                </svg>
            </button>
            <button id="graph-recenter" title="Recenter Graph" class="recenter-button" fill="#3C4043">
                <svg height="24px" viewBox="0 -960 960 960" width="24px" fill="#3C4043">
                    <path d="M480-320q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T560-480q0-33-23.5-56.5T480-560q-33 0-56.5 23.5T400-480q0 33 23.5 56.5T480-400Zm0-80ZM200-120q-33 0-56.5-23.5T120-200v-160h80v160h160v80H200Zm400 0v-80h160v-160h80v160q0 33-23.5 56.5T760-120H600ZM120-600v-160q0-33 23.5-56.5T200-840h160v80H200v160h-80Zm640 0v-160H600v-80h160q33 0 56.5 23.5T840-760v160h-80Z"/>
                </svg>
            </button>
            ${"undefined"!=typeof google?"":`
                <button id="graph-fullscreen" title="Toggle Fullscreen">
                    ${this.enterFullscreenSvg}
                </button>
            `}`;if(this.tools.elements.container=document.createElement("div"),this.tools.elements.container.id="graph-tools",this.tools.elements.container.innerHTML=n,this.mount.append(this.tools.elements.container),this.tools.elements.recenter=this.tools.elements.container.querySelector("#graph-recenter"),this.tools.elements.recenter.addEventListener("click",()=>{e.zoomToFit(this.tools.config.recenterSpeed,this._getRecenterPadding())}),this.tools.elements.zoomIn=this.tools.elements.container.querySelector("#graph-zoom-in"),this.tools.elements.zoomIn.addEventListener("click",()=>{e.zoom(e.zoom()*this.tools.config.zoomInIncrement,this.tools.config.zoomInSpeed)}),this.tools.elements.zoomOut=this.tools.elements.container.querySelector("#graph-zoom-out"),this.tools.elements.zoomOut.addEventListener("click",()=>{e.zoom(e.zoom()*this.tools.config.zoomOutIncrement,this.tools.config.zoomOutSpeed)}),"undefined"==typeof google){this.tools.elements.toggleFullscreen=this.tools.elements.container.querySelector("#graph-fullscreen");let e=(e,n=300)=>{let r=0;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>{e.apply(this,i)},n)}},n=this.mount.parentElement.parentElement.parentElement;window.addEventListener("fullscreenchange",e(e=>{n===e.target&&this._updateGraphSize()})),this.tools.elements.toggleFullscreen.addEventListener("click",()=>{document.fullscreenElement?(this.tools.elements.toggleFullscreen.innerHTML=this.enterFullscreenSvg,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(this.tools.elements.toggleFullscreen.innerHTML=this.exitFullscreenSvg,n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen())})}}_setupMoreOptionsTooltip(){this.moreOptionsTooltip=document.createElement("div"),this.moreOptionsTooltip.style.cssText=`
            position: absolute;
            top: 16px;
            right: 16px;
            background-color: white;
            color: #3C4043;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-family: "Google Sans", Roboto, Arial, sans-serif;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            border: 1px solid rgba(0, 0, 0, 0.1);
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
            user-select: none;
            -webkit-user-select: none;
        `;let e=navigator.platform.toUpperCase().indexOf("MAC")>=0;this.moreOptionsTooltip.innerHTML=`
            <div style="display: flex; align-items: center;">
                <span>Use <strong>${e?"cmd + click":"ctrl + click"}</strong> for menu actions</span>
            </div>
        `,this.mount.append(this.moreOptionsTooltip)}onStoreConfigChange(e){this.render()}refreshCache(){let{nodes:e,links:n}=this.graph.graphData();if(this.selectedNode&&(this.selectedNodeEdges=n.filter(e=>e.sourceUid===this.selectedNode.uid||e.destinationUid===this.selectedNode.uid),this.selectedNodeNeighbors=e.filter(e=>{let n=this.selectedNodeEdges.filter(n=>n.sourceUid===e.uid||n.destinationUid===e.uid),r=n.length>0;return r&&this.selectedNodeEdges.push(...n),r})),this.focusedNode){let r=n.filter(e=>e.sourceUid===this.focusedNode.uid||e.destinationUid===this.focusedNode.uid);this.focusedNodeEdges.push(...r),this.focusedNodeNeighbors=e.filter(e=>e.uid!==node.uid&&this.focusedNodeEdges.filter(n=>n.sourceUid===e.uid||n.destinationUid===e.uid).length>0)}this.selectedEdge&&(this.selectedEdgeNeighbors=[this.selectedEdge.source,this.selectedEdge.target]),this.focusedEdge&&(this.focusedEdgeNeighbors=[this.focusedEdge.source,this.focusedEdge.target])}onSelectedEdgeChanged(e){if(this.selectedEdge=e,this.selectedEdgeNeighbors=[],!this.selectedEdge){this.selectedEdge=null;return}this.selectedEdgeNeighbors=[e.source,e.target]}onSelectedNodeChanged(e){this.selectedNode=e;let{nodes:n,links:r}=this.graph.graphData();this.selectedNodeEdges=r.filter(n=>n.source.uid===e.uid||n.target.uid===e.uid),this.selectedNodeNeighbors=n.filter(e=>{let n=this.selectedNodeEdges.filter(n=>n.source.uid===e.uid||n.target.uid===e.uid),r=n.length>0;return r&&this.selectedNodeEdges.push(...n),r}),this.graph.centerAt(e.x,e.y,1e3),this.graph.zoom(4,1e3)}onFocusedEdgeChanged(e){if(this.focusedEdge=e,this.focusedEdgeNeighbors=[],!e){this.focusedEdge=null;return}this.focusedEdgeNeighbors=[e.source,e.target]}onFocusedNodeChanged(e){if(this.focusedNode=e,this.focusedNodeEdges=[],this.focusedNodeNeighbors=[],!this.focusedNode)return;let{nodes:n,links:r}=this.graph.graphData(),i=r.filter(n=>n.sourceUid===e.uid||n.destinationUid===e.uid);this.focusedNodeEdges.push(...i),this.focusedNodeNeighbors=n.filter(n=>n.uid!==e.uid&&this.focusedNodeEdges.filter(e=>e.sourceUid===n.uid||e.destinationUid===n.uid).length>0)}_setupLineLength(e){this.graph.calculateLineLengthByCluster=()=>(this.graph.d3Force("link").distance(e=>{let n=Math.max(this.store.getNodeCount(),15),r=40*Math.log10(n);return 0!==n&&(this.store.config.viewMode===f.ViewModes.SCHEMA||""!==this.graph.dagMode())?r=50*Math.log10(n):""===this.graph.dagMode()&&(r=e.source.neighborhood===e.target.neighborhood?.5*r:.8*r),r}),e)}_computeCurvature(e){let n={},r={};for(let i=0;i<e.length;i++){let o=e[i],s=o.sourceUid,a=o.destinationUid;o.curvature.amount=0,o.curvature.nodePairId=0>=s.localeCompare(a)?`${s}_${a}`:`${a}_${s}`;let l=s===a?n:r;l[o.curvature.nodePairId]||(l[o.curvature.nodePairId]=[]),l[o.curvature.nodePairId].push(o)}return Object.keys(n).forEach(e=>{let r=n[e],i=r.length-1;r[i].curvature.amount=1;let o=.65/Math.max(1,i);for(let e=0;e<i;e++)r[e].curvature.amount=.35+e*o}),Object.keys(r).forEach(e=>{let n=r[e];if(n.length<=1)return;let i=n.length-1,o=n[i];o.curvature.amount=.35;let s=.7/Math.max(1,i);for(let e=0;e<i;e++){let r=n[e];r.curvature.amount=-.35+e*s,0!==o.sourceUid.localeCompare(r.sourceUid)&&(r.curvature.amount*=-1)}}),e}_setupDrawEdges(e){e.drawEdges=(n,r,i)=>(this.graph.linkDirectionalArrowLength(4).calculateLineLengthByCluster().linkDirectionalArrowRelPos(.9875).linkCurvature(e=>e.curvature.amount).linkWidth(e=>this.store.getEdgeDesign(e).width).linkColor(e=>{let n=this.store.getEdgeDesign(e);if(!(this.store.config.focusedGraphObject instanceof c||this.store.config.selectedGraphObject instanceof c||this.store.config.focusedGraphObject instanceof h||this.store.config.selectedGraphObject instanceof h)||this.store.edgeIsConnectedToFocusedNode(e)||this.store.edgeIsConnectedToSelectedNode(e)||e===this.store.config.focusedGraphObject||e===this.store.config.selectedGraphObject)return n.color;{let e=n.color;return this.lightenColor(e,.48)}}).labelsOnEdges(2),e)}lightenColor(e,n){let r="#"===e[0],i=parseInt(e.substring(+!!r,r?3:2),16),o=parseInt(e.substring(r?3:2,r?5:4),16),s=parseInt(e.substring(r?5:4,r?7:6),16);i=Math.floor(i*(1-n)+255*n),o=Math.floor(o*(1-n)+255*n),s=Math.floor(s*(1-n)+255*n);let a=1===i.toString(16).length?"0"+i.toString(16):i.toString(16);return"#"+a+(1===o.toString(16).length?"0"+o.toString(16):o.toString(16))+(1===s.toString(16).length?"0"+s.toString(16):s.toString(16))}_setupDrawNodes(e){e.drawNodes=()=>(this.graph.nodeCanvasObject((e,n,r)=>{let i=0;(this.store.config.selectedGraphObject instanceof c||this.store.config.focusedGraphObject instanceof c)&&(i=.64,e===this.store.config.selectedGraphObject||e===this.store.config.focusedGraphObject?i=0:(this.selectedNodeNeighbors.includes(e)||this.focusedNodeNeighbors.includes(e))&&(i=0)),(this.store.config.selectedGraphObject instanceof h||this.store.config.focusedGraphObject instanceof h)&&(i=.64,(this.focusedEdgeNeighbors.includes(e)||this.selectedEdgeNeighbors.includes(e))&&(i=0));let o=e===this.store.config.selectedGraphObject||e===this.store.config.focusedGraphObject;if(o){let r=0,i=.125*this.getNodeRelativeSize();r=e===this.store.config.selectedGraphObject?.75*this.getNodeRelativeSize():.5*this.getNodeRelativeSize(),n.beginPath(),n.strokeStyle="rgba(26, 115, 232, .24)",n.lineWidth=r,n.fillStyle="rgba(0, 0, 0, 0)",n.arc(e.x,e.y,this.getNodeRelativeSize()+i+r/2,0,2*Math.PI,!1),n.stroke()}n.beginPath(),n.arc(e.x,e.y,this.getNodeRelativeSize(),0,2*Math.PI,!1),n.fillStyle=this.store.getColorForNode(e),n.fill(),i>0&&(n.beginPath(),n.arc(e.x,e.y,this.getNodeRelativeSize(),0,2*Math.PI,!1),n.fillStyle=`rgba(255, 255, 255, ${i})`,n.fill());let s=!e.isIntermediateNode()&&(this.store.config.showLabels||this.store.config.viewMode===f.ViewModes.SCHEMA||o||this.selectedNodeNeighbors.includes(e)||this.focusedNodeNeighbors.includes(e)||this.focusedEdgeNeighbors.includes(e)||this.selectedEdgeNeighbors.includes(e));if(n.save(),n.translate(e.x,e.y),n.font=`${this.store.config.viewMode===f.ViewModes.DEFAULT?"bold":""} 2px 'Google Sans', Roboto, Arial, sans-serif`,!s)return;let a=e.getLabels(),l="";this.store.config.viewMode===f.ViewModes.DEFAULT&&(l=this.store.getKeyProperties(e)).length&&(a+=` (${l})`);let u=n.measureText(a),d=this.getNodeRelativeSize()+.5,p=u.width+1;n.fillStyle=this.store.getColorForNode(e),n.beginPath(),n.roundRect(d,-1.5,p,3,.5),n.fill(),i>0&&(n.fillStyle=`rgba(255, 255, 255, ${i})`,n.beginPath(),n.roundRect(d,-1.5,p,3,.5),n.fill());let g=0;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&(g=-(.25*Math.abs(u.actualBoundingBoxAscent-u.actualBoundingBoxDescent))),this.store.config.viewMode===f.ViewModes.SCHEMA)n.textAlign="center",n.textBaseline="middle",n.fillStyle="#fff",n.font="2px 'Google Sans', Roboto, Arial, sans-serif",n.fillText(a,d+.5*p,g),n.restore();else if(this.store.config.viewMode===f.ViewModes.DEFAULT){n.textAlign="left",n.textBaseline="middle",n.fillStyle="#fff";let r=`${e.getLabels()} `;n.font="2px 'Google Sans', Roboto, Arial, sans-serif";let i=n.measureText(r);n.font="bold 2px 'Google Sans', Roboto, Arial, sans-serif";let o=d+.5+(n.measureText(r).width-i.width)*.5;n.font="2px 'Google Sans', Roboto, Arial, sans-serif",n.fillText(r,o,g);let s=`(${l})`,a=o+i.width;n.font="bold 2px 'Google Sans', Roboto, Arial, sans-serif",n.fillText(s,a,g),n.restore()}}),e)}_generateGraphElementTooltip(e){let n="#a9a9a9";e instanceof c&&(n=this.store.getColorForNode(e));let r=`
            <div class="graph-element-tooltip" style="background-color: ${n}">
                <div><strong>${this.sanitize(e.getLabels())}</strong></div>`;if(e.properties)if(1===e.key_property_names.length)for(let n of e.key_property_names)e.properties.hasOwnProperty(n)&&(r+=`<div>${this.sanitize(e.properties[n])}</div>`);else for(let n of e.key_property_names)e.properties.hasOwnProperty(n)&&(r+=`<div>${n}: ${this.sanitize(e.properties[n])}</div>`);return r+"</div>"}_setupDrawLabelsOnEdges(e){e.labelsOnEdges=n=>(e.linkCanvasObjectMode(()=>"after").linkLabel(()=>(this.store.config.selectedGraphObject,"")).linkCanvasObject((e,r,i)=>{let o=this.selectedEdge&&e===this.selectedEdge,s=this.focusedEdge&&e===this.focusedEdge;if(!(()=>{if(this.focusedEdge&&e===this.focusedEdge||this.selectedNode&&this.store.edgeIsConnectedToSelectedNode(e)||this.focusedNode&&this.store.edgeIsConnectedToFocusedNode(e)||this.selectedEdge&&e===this.selectedEdge)return!0;let r=this.focusedEdge||this.selectedEdge||this.focusedNode||this.selectedNode;return!!(i>n)&&!r||!!this.store.config.showLabels})())return;let a=e.source,l=e.target;if("object"!=typeof a||"object"!=typeof l)return;let u={x:(a.x+l.x)*.5,y:(a.y+l.y)*.5},c=e.__controlPoints,h=e.source===e.target;if(0!==e.curvature&&c)if(h){let n,r,i,o,s,a;n=e.source.x,r=e.source.y,i=c[0],o=c[1],s=c[2],a=c[3],u={x:.125*n+.375*i+.375*s+.125*e.target.x,y:.125*r+.375*o+.375*a+.125*e.target.y}}else u={x:.25*a.x+.5*c[0]+.25*l.x,y:.25*a.y+.5*c[1]+.25*l.y};let d=Math.atan2(l.y-a.y,l.x-a.x);d>Math.PI/2&&(d=-(Math.PI-d)),d<-Math.PI/2&&(d=-(-Math.PI-d));let f=e.getLabels(),p="",g=50;if(!h){let e={x:l.x-a.x,y:l.y-a.y};g=Math.sqrt(e.x*e.x+e.y*e.y)-5}r.font=`${s||o?"bold":"normal"} 2px 'Google Sans', Roboto, Arial, sans-serif`;let m=()=>(r.measureText(f).width+r.measureText(p).width)*2;for(;m()>g&&!(f.length<=1);)f=f.substring(0,f.length-1),p="...";f+=p;let y=r.measureText(f);r.save(),r.translate(u.x,u.y),r.rotate(d),r.fillStyle="rgba(255, 255, 255, 1)",r.fillRect(-y.width/2-1,-2,y.width+2,4,1);let v="#9AA0A6",b="#1A73E8";r.textAlign="center",r.textBaseline="middle";let _=0;_=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?-(.25*Math.abs(y.actualBoundingBoxAscent-y.actualBoundingBoxDescent)):.5*r.measureText("H").actualBoundingBoxDescent,r.fillStyle=o?b:s?"#3C4043":v,r.fillText(f,0,_),r.strokeStyle=o?b:v,r.lineWidth=.5,r.strokeRect(-y.width/2-1,-2,y.width+2,4),r.restore()}),e)}_showMouseContextMenu(e,n){if(this.store.config.viewMode===f.ViewModes.SCHEMA||e.isIntermediateNode())return;n.preventDefault();let r=this.store.createNodeExpansionMenu(e,(n,r)=>{e.fx=e.x,e.fy=e.y,this.nodesToUnlockPosition.push(e),this.store.setFocusedObject(),this.store.setSelectedObject(e),this.store.requestNodeExpansion(e,n,r),this.showLoadingStateForNode(e)});r.style.left=n.pageX+"px",r.style.top=n.pageY+"px",document.body.appendChild(r)}render(){let e;this.requestedRecenter=!0;let n={nodes:this.store.getNodes().map(e=>(delete e.x,delete e.y,delete e.fx,delete e.fy,delete e.vx,delete e.vy,e)),links:this._computeCurvature(this.store.getEdges())},r=document.createElement("canvas");r.width=this.mount.offsetWidth,r.height=this.mount.offsetHeight;let i=()=>{this.moreOptionsTooltip.style.opacity=1},o=()=>{this.moreOptionsTooltip.style.opacity=0};this.graph.width(this.mount.offsetWidth).height(this.mount.clientHeight).nodeId("uid").nodeVal("value").nodeColor("color").linkSource("sourceUid").linkTarget("destinationUid").linkLabel(e=>"").autoPauseRedraw(!1).onNodeHover(n=>{this.store.config.focusedGraphObject&&this.store.config.focusedGraphObject instanceof h||this.store.setFocusedObject(n),clearTimeout(e),n?e=setTimeout(i,100):o()}).onNodeDragEnd(e=>{e.fx=e.x,e.fy=e.y}).onNodeClick((e,n)=>{n.ctrlKey||n.metaKey?this._showMouseContextMenu(e,n):this.store.setSelectedObject(e)}).onNodeRightClick((e,n)=>{this._showMouseContextMenu(e,n)}).onLinkHover(e=>{this.store.setFocusedObject(e)}).onLinkClick(e=>{this.store.setSelectedObject(e)}).onBackgroundClick(e=>{this.store.setSelectedObject(null)}).onZoom(()=>{this._updateLoadingSpinnerPosition(),this.successToast&&this.successNode&&this._updateSuccessToastPosition(this.successNode)}).onEngineStop(()=>{for(let e of(this.requestedRecenter&&(this.graph.zoomToFit(1e3,this._getRecenterPadding()),this.requestedRecenter=!1),this.nodesToUnlockPosition))e.fx=void 0,e.fy=void 0;this.nodesToUnlockPosition=[],this._updateLoadingSpinnerPosition(),this.successToast&&this.successNode&&this._updateSuccessToastPosition(this.successNode)}).calculateLineLengthByCluster().drawNodes().drawEdges().cooldownTime(1250),this.graph.graphData(n)}}var iw=class{id=0;mount=null;server=null;store=null;menu=null;sidebar=null;graph=null;table=null;lastQuery="";componentMounts={menu:null,graph:null,sidebar:null,table:null};constructor({id:e,port:n,params:r,mount:i,query:o}){if(this.id=e,this.lastQuery=o,!i)throw Error("Must have a valid HTML element to mount the app");this.mount=i,this.scaffold(),this.server=new l(n,r),this.server.query(o).then(e=>{if(!e)return void this.tearDown();let{error:n,response:r}=e;this.loaderElement.classList.add("hidden");let{nodes:i,edges:o,rows:s,schema:a,query_result:l}=r,u=new f({nodesData:i,edgesData:o,colorScheme:f.ColorScheme.LABEL,rowsData:s,schemaData:a,queryResult:l});this.store=new p(u),this.menu=new y(this.store,this.componentMounts.menu),this.table=new v(this.store,this.componentMounts.table,this.componentMounts.menu);let c=this.mount.querySelector(`#graph-container-${this.id}`);c.className=this.store.config.viewMode===f.ViewModes.DEFAULT?"dots":"",(i.length&&o.length||u.schema)&&(this.sidebar=new m(this.store,this.componentMounts.sidebar),this.graph=new ix(this.store,this.componentMounts.graph,this.componentMounts.menu)),this.store.addEventListener(p.EventTypes.VIEW_MODE_CHANGE,(e,n)=>{c.className=e===f.ViewModes.DEFAULT?"dots":"",e===f.ViewModes.TABLE?(this.componentMounts.graph.parentElement.classList.add("hidden"),this.componentMounts.sidebar.classList.add("hidden"),this.componentMounts.table.classList.remove("hidden")):(this.componentMounts.graph.parentElement.classList.remove("hidden"),this.componentMounts.sidebar.classList.remove("hidden"),this.componentMounts.table.classList.add("hidden"))}),this.store.addEventListener(p.EventTypes.NODE_EXPANSION_REQUEST,(e,n,r,i,o)=>{this.graph.showLoadingStateForNode(e),this.server.nodeExpansion(e,n,r,i).then(n=>{if(!n||!n.response)return;if(n.error)return void this.graph.showErrorStateForNode(e,n.error);let r=this.store.appendGraphData(n.response.nodes,n.response.edges);r?this.graph.showSuccessStateForNode(e,{nodesAdded:r.newNodes.length,edgesAdded:r.newEdges.length}):this.graph.showSuccessStateForNode(e,{nodesAdded:0,edgesAdded:0})}).catch(n=>{this.graph.showErrorStateForNode(e,n)}).finally(()=>{this.graph.hideLoadingStateForNode(e)})}),i.length||this.store.setViewMode(f.ViewModes.TABLE),n&&(r.schema?(this.store.setViewMode(f.ViewModes.SCHEMA),this.errorElement.textContent=n,this.errorElement.classList.remove("hidden"),this.errorElement.style.bottom="20px",this.errorElement.style.top="unset"):(this.errorElement.textContent=n,this.errorElement.classList.remove("hidden")))})}tearDown(){this.mount.innerHTML=""}scaffold(){if(!this.mount)throw Error("Must have a valid HTML element to mount the app");this.mount.className=`${this.mount.className}`,this.mount.innerHTML=`
            <style>
                .container {
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
            
                    margin: 0;
                    padding: 0;
                    overflow: hidden;
                    width: calc(100% - .5rem);
                                     
                    background-color: #fff;
                    font: 16px 'Google Sans', Roboto, Arial, sans-serif;
                }
            
                .container .content {
                    border-radius: 0 0 8px 8px;
                    display: flex;
                    flex: 1;
                    height: 616px;
                    width: 100%;
                    overflow: hidden;
                    position: relative;
                }
            
                #graph-container-${this.id} {
                    background-color: #FBFDFF;
                    width: 100%;
                }
            
                #force-graph-${this.id} {
                    width: 100%;
                    height: 616px;
                    position: relative;
                }

                .node-loading-spinner {
                    position: absolute;
                    width: 40px;
                    height: 40px;
                    border: 3px solid rgba(26, 115, 232, 0.1);
                    border-radius: 50%;
                    border-top: 3px solid #1a73e8;
                    animation: spin 1s linear infinite;
                    pointer-events: none;
                    transform: translate(-50%, -50%);
                }

                .node-loading-spinner::after {
                    content: '';
                    position: absolute;
                    top: -2px;
                    left: -2px;
                    right: -2px;
                    bottom: -2px;
                    border: 2px solid rgba(26, 115, 232, 0.1);
                    border-top: 2px solid transparent;
                    border-radius: 50%;
                }

                .node-error-tooltip {
                    position: absolute;
                    background: #d93025;
                    color: white;
                    padding: 8px 12px;
                    border-radius: 4px;
                    font-size: 12px;
                    z-index: 10;
                    pointer-events: none;
                    animation: fadeInOut 5s ease-in-out;
                }

                .node-success-toast {
                    position: absolute;
                    background: white;
                    color: #3C4043;
                    padding: 8px 12px;
                    border-radius: 4px;
                    font-size: 12px;
                    z-index: 10;
                    pointer-events: none !important;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    border: 1px solid rgba(0, 0, 0, 0.1);
                    opacity: 1;
                    transition: opacity 0.3s ease-in-out;
                    user-select: none;
                    -webkit-user-select: none;
                }

                @keyframes spin {
                    0% { transform: translate(-50%, -50%) rotate(0deg); }
                    100% { transform: translate(-50%, -50%) rotate(360deg); }
                }

                @keyframes fadeInOut {
                    0% { opacity: 0; }
                    10% { opacity: 1; }
                    90% { opacity: 1; }
                    100% { opacity: 0; }
                }

                .error  {
                    position: absolute;
                    bottom : unset;
                    top : 20px;
                    left: 20px;
                    right: 20px;
                    font-family: 'Google Sans', Roboto, Arial, sans-serif;
                    font-size: 18px;
                    z-index: 10;
                    display: flex;
                    align-items: center;
                    white-space: pre-wrap;
                    
                    background-color: #f8d7da;
                    border: 1px solid #f5c6cb;
                    border-radius: .25rem;
                    padding: .75rem 1.25rem;
                    color: #721c24;
                }
                
                .error.hidden,
                .loader-container.hidden,
                .content .hidden {
                    display: none !important;
                }
                
                .loader-container {
                    position: absolute;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    
                }
                
                .loader {
                  width: 48px;
                  height: 48px;
                  border: 5px solid rgba(0, 0, 0, 0);
                  border-bottom-color: #3498db;
                  border-radius: 50%;
                  display: inline-block;
                  box-sizing: border-box;
                  animation: rotation 1s linear infinite;
                  margin-right: 2rem;
                }
                
                @keyframes rotation {
                  0% {
                    transform: rotate(0deg);
                  }
                  100% {
                    transform: rotate(360deg);
                  }
                }
                
                .graph-context-menu {
                    position: fixed;
                    background: white;
                    border-radius: 4px;
                    padding: 0;
                    min-width: 160px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    font-family: 'Google Sans', Roboto, Arial, sans-serif;
                    font-size: 14px;
                    z-index: 1000;
                }
        
                .context-menu-item {
                    padding: 12px;
                    margin-right: 0;
                    cursor: pointer;
                    color: #3c4043;
                    display: flex;
                    align-items: center;
                }
                
                .context-menu-item svg {
                    margin-right: 5px;
                }
        
                .context-menu-item:hover {
                    background-color: #f1f3f4;
                }

                .context-menu-divider {
                    height: 1px;
                    background-color: #dadce0;
                    margin: 4px 0;
                }
            </style>
            <div class="container">
                <header id="graph-menu-${this.id}"></header>
                <div class="content">
                    <div class="error hidden"></div>
                    <div class="loader-container">
                        <div class="loader"></div>
                    </div>
                    <div id="graph-container-${this.id}">
                        <div id="force-graph-${this.id}">
                        </div>
                    </div>
                    <div id="sidebar-${this.id}"></div>
                    <div id="table-${this.id}" class="hidden"></div>
                </div>
            </div>
        `,this.loaderElement=this.mount.querySelector(".loader-container"),this.errorElement=this.mount.querySelector(".error"),this.componentMounts.menu=this.mount.querySelector(`#graph-menu-${this.id}`),this.componentMounts.graph=this.mount.querySelector(`#force-graph-${this.id}`),this.componentMounts.sidebar=this.mount.querySelector(`#sidebar-${this.id}`),this.componentMounts.table=this.mount.querySelector(`#table-${this.id}`)}};window.SpannerApp=iw}();